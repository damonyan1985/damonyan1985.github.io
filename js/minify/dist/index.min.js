/*! For license information please see index.min.js.LICENSE.txt */
(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var a=function(){function e(){n(this,e)}return i(e,null,[{key:"getUrlParams",value:function(){}}]),e}();t(a,"timeFormat",(function(e){var t=parseInt(e/60),n=parseInt(e%60);return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)}));var u=i((function e(){n(this,e)}));function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},c.apply(this,arguments)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,b(o.key),o)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}t(u,"USE_STATE",!0),t(u,"USE_STATE_UI_UPDATE",!1);var g=function(){function e(t){var n=t.styleName,o=void 0===n?"":n,i=t.id,r=void 0===i?"":i,a=t.onready,u=void 0===a?void 0:a;p(this,e),this.styleName=o,this.id=r,this.onready=u}return m(e,[{key:"initWidget",value:function(){}},{key:"disposeWidget",value:function(){if(this.isContainer()&&this.children)for(var e=0;e<this.children.length;e++)this.children[e].disposeWidget();else this.isComponent()&&this.child&&this.child.disposeWidget()}},{key:"build",value:function(){return this}},{key:"isContainer",value:function(){return!1}},{key:"render",value:function(){return this.elem=this._render(),this.onready&&this.elem&&this.onready(this),this.elem}},{key:"_render",value:function(){return this.isComponent()?this.build().render():null}},{key:"isComponent",value:function(){return!1}},{key:"className",value:function(){return this.constructor.name}}]),e}(),k=function(e){d(n,e);var t=y(n);function n(e){var o=e.styleName,i=e.id,r=void 0===i?"":i,a=e.onready,u=void 0===a?void 0:a;return p(this,n),t.call(this,{styleName:o,id:r,onready:u})}return m(n,[{key:"isComponent",value:function(){return!0}},{key:"rebuild",value:function(){return this.child=this.build(),this.child}},{key:"_render",value:function(){return this.child||(this.initWidget(),this.child=this.build()),this.child.render()}}]),n}(g),w=function(e){d(n,e);var t=y(n);function n(e){var o,i=e.styleName,r=e.onready,a=void 0===r?void 0:r;return p(this,n),(o=t.call(this,{styleName:i,onready:a})).state={},o}return m(n,[{key:"rebuild",value:function(){return this.child=this.build(),this.child}},{key:"isComponent",value:function(){return!0}},{key:"setState",value:function(e){if(u.USE_STATE){this.state=e;var t=j.deepCloneWidget(this);new j(this,t).diff()}else if(u.USE_STATE_UI_UPDATE){var n;this.state=e,console.log("BoyiaStateWidget setState parent = "+(this.node&&this.node.parentNode?this.node.parentNode:null)),this.node&&this.node.parentNode&&(n=this.node.parentNode).removeChild(this.node),j.rebuild(this),this.render(),this.node&&n&&n.appendChild(this.node)}}},{key:"_render",value:function(){return this.child||(this.initWidget(),this.child=this.build()),this.child&&(this.node=this.child.render()),this.node}}]),n}(g),P=function(e){d(n,e);var t=y(n);function n(e){var o,i=e.id,r=void 0===i?"":i,a=e.styleName,u=void 0===a?"":a,l=e.children,s=void 0===l?[]:l,c=e.onready,d=void 0===c?void 0:c;return p(this,n),(o=t.call(this,{styleName:u,id:r,onready:d})).children=s,o}return m(n,[{key:"setWidth",value:function(e){this.elem&&(this.elem.style.width=e)}},{key:"setStyle",value:function(e){this.elem&&(this.elem.className=e)}},{key:"setCursor",value:function(e){this.elem&&(this.elem.style.cursor=e)}},{key:"setTop",value:function(e){this.elem&&(this.elem.style.top=e)}},{key:"setLeft",value:function(e){this.elem&&(this.elem.style.left=e)}},{key:"offsetLeft",value:function(){return this.elem?this.elem.offsetLeft:0}},{key:"offsetTop",value:function(){return this.elem?this.elem.offsetTop:0}},{key:"offsetWidth",value:function(){return this.elem?this.elem.offsetWidth:0}},{key:"offsetHeight",value:function(){return this.elem?this.elem.offsetHeight:0}},{key:"getBoundingClientRect",value:function(){return this.elem?this.elem.getBoundingClientRect():null}},{key:"isContainer",value:function(){return!0}},{key:"_render",value:function(){var e=document.createElement("div");return this.id&&e.setAttribute("id",this.id),this.styleName&&(e.className=this.styleName),this.children.forEach((function(t){try{e.appendChild(t.render())}catch(e){console.error("appendChild err:",e),console.log("child class: "+t.constructor.name)}})),e}}]),n}(g),S=function(e){d(n,e);var t=y(n);function n(e){var o,i=e.styleName,r=e.url,a=e.id,u=void 0===a?"":a,l=e.onready,s=void 0===l?void 0:l;return p(this,n),(o=t.call(this,{styleName:i,id:u,onready:s})).url=r,o}return m(n,[{key:"setImageUrl",value:function(e){this.url=e,this.elem&&(this.elem.src=this.url)}},{key:"_render",value:function(){var e=document.createElement("img");return e.src=this.url,this.styleName&&(e.className=this.styleName),e}}]),n}(g),_=function(e){d(n,e);var t=y(n);function n(e){var o,i=e.styleName,r=void 0===i?"":i,a=e.id,u=void 0===a?"":a,l=e.name,s=void 0===l?"":l,c=e.value,d=void 0===c?"":c,f=e.onClick,y=e.onready,h=void 0===y?void 0:y;return p(this,n),(o=t.call(this,{styleName:r,id:u,name:s,value:d,onready:h})).onClick=f,o}return m(n,[{key:"type",value:function(){return"checkbox"}},{key:"checked",value:function(){return!!this.elem&&this.elem.checked}},{key:"_render",value:function(){var e=c(h(n.prototype),"_render",this).call(this);return this.onClick&&(e.onclick=this.onClick),this.id&&(e.id=this.id),e}}]),n}(function(e){d(n,e);var t=y(n);function n(e){var o,i=e.styleName,r=e.id,a=void 0===r?"":r,u=e.name,l=void 0===u?"":u,s=e.value,c=void 0===s?"":s,d=e.onready,f=void 0===d?void 0:d,y=e.onChange;return p(this,n),(o=t.call(this,{styleName:i,id:a,onready:f})).name=l,o.value=c,o.onChange=y,o}return m(n,[{key:"type",value:function(){return""}},{key:"_render",value:function(){var e=this,t=document.createElement("input");return t.setAttribute("type",this.type()),t.setAttribute("name",this.name),t.setAttribute("value",this.value),this.onChange&&(t.onchange=function(){e.onChange(t.value)}),this.styleName&&(t.className=this.styleName),t}}]),n}(g)),C=function(e){d(n,e);var t=y(n);function n(e){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return p(this,n),(o=t.call(this,{styleName:"",id:"",onready:i})).text=e,o}return m(n,[{key:"setText",value:function(e){this.elem&&(this.elem.textContent=e)}},{key:"_render",value:function(){return document.createTextNode(this.text)}}]),n}(g),N=function(e){d(n,e);var t=y(n);function n(e){var o,i=e.oncanplay,r=e.onplay,a=e.onended,u=e.onprogress,l=e.ontimeupdate,s=e.onready;return p(this,n),(o=t.call(this,{styleName:"",id:"",onready:s})).oncanplay=i,o.onplay=r,o.onended=a,o.onprogress=u,o.ontimeupdate=l,o}return m(n,[{key:"seekTo",value:function(e){this.elem&&(this.elem.currentTime=e*this.elem.duration)}},{key:"currentTime",value:function(){return this.elem&&this.elem.currentTime}},{key:"duration",value:function(){return this.elem&&this.elem.duration}},{key:"hasUrl",value:function(){return this.elem&&this.elem.src}},{key:"setPlayUrl",value:function(e){this.elem&&(this.elem.src=e)}},{key:"play",value:function(){this.elem&&this.elem.play()}},{key:"pause",value:function(){this.elem&&this.elem.pause()}},{key:"setVolume",value:function(e){this.elem&&(this.elem.volume=e)}},{key:"_render",value:function(){var e=document.createElement("audio");return e.setAttribute("preload","auto"),e.oncanplay=function(){console.log("on audio prepared duration="+e.duration)},e.onplay=this.onplay,e.onended=this.onended,e.onprogress=this.onprogress,e.ontimeupdate=this.ontimeupdate,e.onerror=e.onended,this.elem=e,this.onready&&this.onready(this),e}}]),n}(g),T=function(e){d(n,e);var t=y(n);function n(e){var o,i=e.forId,r=e.styleName;return p(this,n),(o=t.call(this,{styleName:r,id:""})).forId=i,o}return m(n,[{key:"_render",value:function(){var e=document.createElement("label");return this.forId&&e.setAttribute("for",this.forId),this.styleName&&(e.className=this.styleName),e}}]),n}(g),O=function(e){d(n,e);var t=y(n);function n(e){var o,i=e.onTap,r=void 0===i?void 0:i,a=e.onHover,u=void 0===a?void 0:a,l=e.onTouchStart,s=void 0===l?void 0:l,c=e.onTouchEnd,d=void 0===c?void 0:c,f=e.onMouseDown,y=void 0===f?void 0:f,h=e.onMouseUp,v=void 0===h?void 0:h,m=e.child;return p(this,n),(o=t.call(this,{styleName:"",id:""})).onTap=r,o.onHover=u,o.child=m,o.onTouchStart=s,o.onTouchEnd=d,o.onMouseDown=y,o.onMouseUp=v,o}return m(n,[{key:"build",value:function(){return this.child}},{key:"_render",value:function(){var e=this.child.render();return this.onTap&&(e.onclick=this.onTap),this.onHover&&(e.onmouseover=this.onHover),this.onMouseDown&&(e.onmousedown=this.onMouseDown),this.onMouseUp&&(e.onmouseup=this.onMouseUp),this.onTouchStart&&(e.ontouchstart=this.onTouchStart),this.onTouchEnd&&(e.ontouchend=this.onTouchEnd),e}}]),n}(k),L=function(){function e(){p(this,e)}return m(e,null,[{key:"init",value:function(){e._root=document.getElementById("root"),window.onpopstate=function(t){console.log("onpopstate e = ",t.state),e.pop()}}},{key:"push",value:function(t){var n=t.page,o=t.path,i=t.title;if(e._root&&n){var r=n();if(r instanceof g){e._stack.push(r);var a=e._root;e._removeAll(e._root),a.appendChild(r.render()),history.pushState({title:i,path:o},i,o)}}}},{key:"_removeAll",value:function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}},{key:"pop",value:function(){if(e._root&&!(e._stack.length<=1)){var t=e._root;e._removeAll(t);var n=e._stack,o=n.splice(n.length-1,1);if(o)for(var i=0;i<o.length;i++)o[i].disposeWidget();n.length>0&&t.appendChild(n[n.length-1].render())}}},{key:"replace",value:function(t){var n=t.page,o=t.path,i=t.title;if(0==e._stack.length&&e.push({page:n,path:o,title:i}),e._root&&n){var r=n();if(r instanceof g){var a=e._stack[e._stack.length-1];a&&a.disposeWidget(),e._stack[e._stack.length-1]=r;var u=e._root;e._removeAll(e._root),u.appendChild(r.render()),history.replaceState({title:i,path:o},i,o)}}}}]),e}();s(L,"_root",void 0),s(L,"_stack",[]);var x=function(){function e(){p(this,e)}return m(e,null,[{key:"addEvent",value:function(t,n){if(t&&n){var o=e._events[t];o||(o=[],e._events[t]=o),o.push(n)}}},{key:"removeAll",value:function(){_events={}}},{key:"removeEvent",value:function(t,n){if(t&&n){var o=e._events[t];if(o&&0!=o.length)for(var i=0;i<o.length;i++)if(o[i]==n){o.splice(i,1);break}}}},{key:"sendEvent",value:function(t,n){var o=e._events[t];o&&o instanceof Array&&o.forEach((function(e){e(n)}))}}]),e}();s(x,"_events",{}),Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1},Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)},String.format=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,(function(e,n){return void 0!==t[n]?t[n]:e}))};var j=function(){function e(t,n){p(this,e),this.oldWidget=t,this.newWidget=n}return m(e,[{key:"diff",value:function(){e.rebuild(this.newWidget);var t=this.oldWidget.child,n=this.newWidget.child;this.diffImpl(t,n,this.oldWidget)}},{key:"diffImpl",value:function(e,t,n){try{if(e.className()!=t.className())return void this._replaceWidget(e,t,n)}catch(e){console.error("compare type",e)}if(e.isContainer()){var o=t.children,i=e.children,r=i.length;if(o.length<i.length){for(var a=o.length;a<i.length;a++)e.elem.removeChild(i[a].elem);i.splice(o.length,i.length-o.length)}else if(o.length>i.length){for(var u=i.length;u<o.length;u++)e.elem.appendChild(o[u].render());i.push.apply(i,o.slice(i.length,o.length))}for(var l=o.length>r?r:o.length,s=0;s<l;s++)this.diffImpl(i[s],o[s],e);try{t.styleName!=e.styleName&&(e.styleName=t.styleName,e.elem.className=t.styleName)}catch(e){console.error("set class name error",e)}}else if(e.isComponent()){var c=e.child,d=t.child;this.diffImpl(c,d,e)}}},{key:"_replaceWidget",value:function(e,t,n){if(n.isContainer()){var o=n.children.indexOf(e);n.children[o]=t,n.elem&&n.elem.replaceChild(t.render(),e.elem)}else n.isComponent()&&(n.child=t,e.elem&&e.elem.parentNode&&e.elem.parentNode.replaceChild(t.render(),e.elem));e.disposeWidget()}}],[{key:"rebuild",value:function(t){t.isContainer()?t.children.forEach((function(t){t.isComponent()?e.rebuild(t.rebuild()):t.isContainer()&&e.rebuild(t)})):t.isComponent()?e.rebuild(t.rebuild()):console.log("other type")}},{key:"isBoyiaWidget",value:function(e){return e instanceof g}},{key:"deepCloneWidget",value:function(t){if(!e.isBoyiaWidget(t))throw new Error("obj is not a boyia widget");var n=new t.constructor({styleName:t.styleName,onready:t.onready});for(var o in t)n[o]=e.isBoyiaWidget(t[o])?e.deepCloneWidget(t[o]):t[o];return n}}]),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==I(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===I(i)?i:String(i)),o)}var i}var E,V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.skinMap={},this.register({name:"black",style:{audioPlayer:"audio-player-black",audioContainerBlink:"audio-container-blink-black",audioButton:"audio-button-black",audioPlayButton:"audio-play-button-black",audioPlayPause:"audio-play-pause-black",audioPlayForwardFirst:"audio-forward-first-black",audioPlayForward:"audio-forward-black",audioBack:"audio-back-black",audioBackFirst:"audio-back-first-black",audioLayout:"audio-layout-black",audioButtonContainer:"audio-button-container-black",audioBottom:"audio-bottom-black",audioProgressCtrl:"audio-progress-ctrl-black",audioProgressContainer:"audio-progress-container-black",audioProgress:"audio-progress-black",audioImageContainer:"audio-image-container-black",audioImage:"audio-image-black",audioHeader:"audio-header-black",audioTitleContainer:"audio-title-container-black",audioTitleText:"audio-title-text-black",audioProgressText:"audio-progress-text-black",audioPlaylistContainer:"audio-playlist-container-black",audioPlaylistContainerHide:"audio-playlist-container-hide-black",audioPlaylistItem:"audio-playlist-item-black",audioItemIndex:"audio-item-index-black",audioItemName:"audio-item-name-black",audioItemAuthor:"audio-item-author-black",audioItemFocus:"audio-item-focus-black",audioListButtonContainer:"audio-list-button-container-black",audioListButtonStyle:"audio-list-button-style-black",audioVolumeIconFirst:"audio-volume-icon-first-black",audioVolumeIcon:"audio-volume-icon-black",audioVolumeView:"audio-volume-view-black",audioVolumeProgress:"audio-volume-progress-black",audioVolumeBar:"audio-volume-bar-black",audioVolumeIconContainer:"audio-volume-icon-container-black",audioVolumeContainer:"audio-volume-container-black"}}),this.register({name:"default",style:{audioPlayer:"audio-player",audioContainerBlink:"audio-container-blink",audioButton:"audio-button",audioPlayButton:"audio-play-button",audioPlayPause:"audio-play-pause",audioPlayForwardFirst:"audio-forward-first",audioPlayForward:"audio-forward",audioBack:"audio-back",audioBackFirst:"audio-back-first",audioLayout:"audio-layout",audioButtonContainer:"audio-button-container",audioBottom:"audio-bottom",audioProgressCtrl:"audio-progress-ctrl",audioProgressContainer:"audio-progress-container",audioProgress:"audio-progress",audioImageContainer:"audio-image-container",audioImage:"audio-image",audioHeader:"audio-header",audioTitleContainer:"audio-title-container",audioTitleText:"audio-title-text",audioProgressText:"audio-progress-text",audioPlaylistContainer:"audio-playlist-container",audioPlaylistContainerHide:"audio-playlist-container-hide",audioPlaylistItem:"audio-playlist-item",audioItemIndex:"audio-item-index",audioItemName:"audio-item-name",audioItemAuthor:"audio-item-author",audioItemFocus:"audio-item-focus",audioListButtonContainer:"audio-list-button-container",audioListButtonStyle:"audio-list-button-style",audioVolumeIconFirst:"audio-volume-icon-first",audioVolumeIcon:"audio-volume-icon",audioVolumeView:"audio-volume-view",audioVolumeProgress:"audio-volume-progress",audioVolumeBar:"audio-volume-bar",audioVolumeIconContainer:"audio-volume-icon-container",audioVolumeContainer:"audio-volume-container"}}),this.setSkin("black")}var t,n,o;return t=e,o=[{key:"instance",value:function(){return e.sInstance||(e.sInstance=new e),e.sInstance}}],(n=[{key:"getSkin",value:function(){return this.skin||(this.skin=this.skinMap[this.skinName]),this.skin}},{key:"register",value:function(e){console.log("SkinManager.js---register name="+e.name+" style="+e.style),this.skinMap[e.name]=e.style}},{key:"setSkin",value:function(e){this.skin=this.skinMap[e]}}])&&B(t.prototype,n),o&&B(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,W(o.key),o)}}function U(e,t,n){return(t=W(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==M(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===M(t)?t:String(t)}V.sInstance=null;var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"fetchPromise",value:function(t){var n=t.url,o=t.method,i=void 0===o?e.HttpMethod.get:o,r=t.headers,a=void 0===r?{}:r,u=t.data,l=t.responseType,s=void 0===l?"json":l;return new Promise((function(t,o){e.fetch({url:n,method:i,headers:a,data:u,responseType:s,success:function(e){t({status:"ok",data:e})},fail:function(e){o({status:"fail",reason:e})}})}))}},{key:"fetch",value:function(t){var n=t.url,o=t.method,i=void 0===o?e.HttpMethod.get:o,r=t.headers,a=void 0===r?{}:r,u=t.data,l=t.responseType,s=void 0===l?"json":l,c=t.success,d=t.fail,f=t.uploadProgress,y=t.onLoad;u=u||{};var h=e._methodMap[i](a,u);console.log("reqData = ",h),i===e.HttpMethod.get&&(n+=h);var p=new XMLHttpRequest;p.responseType=s,"blob"==s?y&&(p.onload=function(e){200==p.status&&y(e,p)}):p.onreadystatechange=function(){4===p.readyState&&(200===p.status?c&&"function"==typeof c&&c(p.response):d&&"function"==typeof d&&d(p.status))},f&&(p.upload.onprogress=function(e){e.lengthComputable&&f(e.loaded,e.total)}),p.open(i,n,!0),Object.keys(a).forEach((function(e){p.setRequestHeader(e,a[e])})),p.send(i===e.HttpMethod.post?h:null)}},{key:"_getPostJsonData",value:function(e){return JSON.stringify(e)}},{key:"_getPostFormData",value:function(e){if(0==Object.keys(e).length)return"";var t=[];for(var n in e)t.push("".concat(n,"=",e[n]));return t.join("&")}},{key:"_httpGetData",value:function(e,t){return 0==Object.keys(t).length?"":0===location.search.length?"".concat("?",t):"".concat("&",t)}},{key:"_httpPostData",value:function(t,n){var o=e._postMap[t["Content-Type"]];return o?o(n):n}},{key:"upload",value:function(t){var n=t.url,o=t.headers,i=void 0===o?{}:o,r=t.file,a=t.success,u=t.fail,l=t.uploadProgress,s=new FormData;s.append("file",r),e.fetch({url:n,headers:i,data:s,method:e.HttpMethod.post,success:a,fail:u,uploadProgress:l})}},{key:"download",value:function(t){var n=t.url,o=t.headers,i=void 0===o?{}:o;e.fetch({url:n,headers:i,responseType:"blob",method:e.HttpMethod.get,onLoad:function(e,t){var n=new Blob([t.response],{type:"application/octet-stream"}),o=t.getResponseHeader("Content-Disposition"),i=document.createElement("a"),r="unknow";if(o){var a=o.split("=");r=decodeURI(a[1])}console.log("BoyiaHttp download file name = "+r),i.href=window.URL.createObjectURL(n),i.download=r,i.click(),i.remove(),window.URL.revokeObjectURL(i.href)}})}}],null&&R(t.prototype,null),n&&R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function D(){D=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,i){var r=t&&t.prototype instanceof f?t:f,a=Object.create(r.prototype),u=new C(i||[]);return o(a,"_invoke",{value:w(e,n,u)}),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function y(){}function h(){}var p={};l(p,r,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(N([])));m&&m!==t&&n.call(m,r)&&(p=m);var b=h.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function i(o,r,a,u){var l=c(e[o],e,r);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==A(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,u)}),(function(e){i("throw",e,a,u)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return i("throw",e,a,u)}))}u(l.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){i(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function w(e,t,n){var o="suspendedStart";return function(i,r){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw r;return{value:void 0,done:!0}}for(n.method=i,n.arg=r;;){var a=n.delegate;if(a){var u=P(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var l=c(e,t,n);if("normal"===l.type){if(o=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o="completed",n.method="throw",n.arg=l.arg)}}}function P(e,t){var n=t.method,o=e.iterator[n];if(void 0===o)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=c(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=h,o(b,"constructor",{value:h,configurable:!0}),o(h,"constructor",{value:y,configurable:!0}),y.displayName=l(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(k.prototype),l(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,o,i,r){void 0===r&&(r=Promise);var a=new k(s(t,n,o,i),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,u,"Generator"),l(b,r,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var u=n.call(r,"catchLoc"),l=n.call(r,"finallyLoc");if(u&&l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(u){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function H(e,t,n,o,i,r,a){try{var u=e[r](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(o,i)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,te(o.key),o)}}function Y(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function J(){return J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},J.apply(this,arguments)}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Z(e);if(t){var i=Z(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}(this,n)}}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}function ee(e,t,n){return(t=te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==A(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===A(t)?t:String(t)}U(F,"HttpMethod",{get:"GET",post:"POST"}),U(F,"_postMap",{"application/x-www-form-urlencoded":F._getPostFormData,"application/json":F._getPostJsonData}),U(F,"_methodMap",(U(E={},F.HttpMethod.get,F._httpGetData),U(E,F.HttpMethod.post,F._httpPostData),E));var ne="play_item_click",oe="play_list_loaded",ie=function(e){q(i,e);var t,n,o=K(i);function i(e){var t,n=e.onready,r=void 0===n?void 0:n,a=e.playListUrl,u=void 0===a?"":a;return G(this,i),ee(Q(t=o.call(this,{styleName:"",onready:r})),"_onPlayItemClick",(function(e){t.playIndex=e;var n=t.playList[e];t.image.setImageUrl(n.imgUrl),t.title.setTitle(n.name+"-"+n.author),t.playListView&&t.playListView.resetPlayItem(e),t.audio.setPlayUrl(n.playUrl),t.audio.play(),t.audioButton&&t.audioButton.setPlayStatus()})),ee(Q(t),"_onPlay",(function(e){t.playList&&t.audio&&(t.audio.hasUrl()||t._onPlayItemClick(0),e?t.audio.play():t.audio.pause())})),t.playListUrl=u,t}return Y(i,[{key:"initWidget",value:function(){this._loadPlaylist(),x.addEvent(ne,this._onPlayItemClick)}},{key:"disposeWidget",value:function(){x.removeEvent(ne,this._onPlayItemClick),J(Z(i.prototype),"disposeWidget",this).call(this)}},{key:"_loadPlaylist",value:(t=D().mark((function e(){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.fetchPromise({url:this.playListUrl,headers:ee({},"User-Token","none"),method:F.HttpMethod.get});case 2:"ok"==(t=e.sent).status&&(console.log("playlist data = ",t),this.playIndex=0,this.playList=t.data,x.sendEvent(oe,this.playList));case 4:case"end":return e.stop()}}),e,this)})),n=function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(e){H(r,o,i,a,u,"next",e)}function u(e){H(r,o,i,a,u,"throw",e)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"build",value:function(){var e=this,t=V.instance().getSkin();return new P({styleName:"",children:[new P({styleName:t.audioContainerBlink}),new P({styleName:t.audioPlayer,children:[new N({oncanplay:function(){},onplay:function(){},onended:function(){console.log("on play completed"),++e.playIndex>e.playList.length-1&&(e.playIndex=0),e._onPlayItemClick(e.playIndex)},onprogress:function(){},ontimeupdate:function(){e.audioProgress&&e.audio.currentTime()&&e.audio.duration()&&e.audioProgress.setProgress(e.audio.currentTime(),e.audio.duration())},onready:function(t){e.audio=t}}),new P({styleName:t.audioHeader,children:[new re({onready:function(t){e.image=t}}),new ae({onready:function(t){e.title=t}}),new ue({onready:function(t){e.audioListButton=t},onListButtonClick:function(){e.playListView&&e.playListView.show(!e.playListView.isVisible())}})]}),this._buildTools(t)]}),new he({playList:this.playList,onready:function(t){e.playListView=t}})]})}},{key:"_buildTools",value:function(e){var t=this;return new P({styleName:e.audioBottom,children:[new le({onBack:function(){--t.playIndex<0&&(t.playIndex=0),t._onPlayItemClick(t.playIndex)}}),new se({onClick:this._onPlay,onready:function(e){t.audioButton=e}}),new ce({onForward:function(){++t.playIndex>t.playList.length-1&&(t.playIndex=0),t._onPlayItemClick(t.playIndex)}}),new de({onready:function(e){t.audioProgress=e},onAudioProgressUpdate:function(e){t.title&&t.title.updateProgressText(e)},onSeek:function(e){t.audio&&t.audio.duration()&&t.audio.seekTo(e)}}),new fe({onSetVolume:function(e){t.audio&&(console.log("audio.js---onSetVolume()---volume: "+e),t.audio.setVolume(e))}})]})}}]),i}(w),re=function(e){q(n,e);var t=K(n);function n(e){var o=e.onready,i=void 0===o?void 0:o;return G(this,n),t.call(this,{styleName:"",onready:i})}return Y(n,[{key:"setImageUrl",value:function(e){this.image&&this.image.setImageUrl(e)}},{key:"build",value:function(){var e=this,t=V.instance().getSkin();return new P({styleName:t.audioImageContainer,children:[new S({styleName:t.audioImage,onready:function(t){e.image=t}})]})}}]),n}(k),ae=function(e){q(n,e);var t=K(n);function n(e){var o,i=e.onready,r=void 0===i?void 0:i;return G(this,n),(o=t.call(this,{styleName:"",onready:r})).title="",o.progressText="00:00-00:00",o}return Y(n,[{key:"setTitle",value:function(e){this.title&&this.title.setText(e)}},{key:"updateProgressText",value:function(e){this.audioProgressText&&this.audioProgressText.setText(e)}},{key:"build",value:function(){var e=this,t=V.instance().getSkin();return new P({styleName:t.audioTitleContainer,children:[new P({styleName:t.audioTitleText,children:[new C(this.title,(function(t){e.title=t}))]}),new P({styleName:t.audioProgressText,children:[new C(this.progressText,(function(t){e.audioProgressText=t}))]})]})}}]),n}(w),ue=function(e){q(n,e);var t=K(n);function n(e){var o,i=e.onready,r=void 0===i?void 0:i,a=e.onListButtonClick,u=void 0===a?void 0:a;return G(this,n),(o=t.call(this,{styleName:"",onready:r})).onListButtonClick=u,o}return Y(n,[{key:"build",value:function(){var e=this,t=V.instance().getSkin();return new O({onTap:function(){e.onListButtonClick&&e.onListButtonClick()},child:new P({styleName:t.audioListButtonContainer,children:[new P({styleName:t.audioListButtonStyle}),new P({styleName:t.audioListButtonStyle}),new P({styleName:t.audioListButtonStyle})]})})}}]),n}(k),le=function(e){q(n,e);var t=K(n);function n(e){var o,i=e.onBack,r=void 0===i?void 0:i;return G(this,n),(o=t.call(this,{styleName:""})).onBack=r,o}return Y(n,[{key:"build",value:function(){var e=this,t=V.instance().getSkin();return new O({onTap:function(){e.onBack&&e.onBack()},child:new P({styleName:t.audioButtonContainer,children:[new P({styleName:"".concat(t.audioButton," ").concat(t.audioBackFirst)}),new P({styleName:"".concat(t.audioButton," ").concat(t.audioBack)})]})})}}]),n}(k),se=function(e){q(n,e);var t=K(n);function n(e){var o,i=e.onClick,r=void 0===i?void 0:i,a=e.onready;return G(this,n),(o=t.call(this,{styleName:"",onready:a})).onClick=r,o.status=!1,o}return Y(n,[{key:"setPlayStatus",value:function(){var e=V.instance().getSkin();this.status=!0,this.buttonStatus.setStyle("".concat(e.audioButton," ").concat(e.audioPlayPause))}},{key:"changeStyle",value:function(){var e=V.instance().getSkin();this.status=!this.status,this.buttonStatus.setStyle(this.status?"".concat(e.audioButton," ").concat(e.audioPlayPause):"".concat(e.audioButton," ").concat(e.audioPlayButton))}},{key:"build",value:function(){var e=this,t=V.instance().getSkin();return new O({onTap:function(){e.changeStyle(),e.onClick(e.status)},child:new P({styleName:"".concat(t.audioButtonContainer," ").concat(t.audioLayout),children:[new P({styleName:"".concat(t.audioButton," ").concat(t.audioPlayButton),onready:function(t){e.buttonStatus=t}})]})})}}]),n}(k),ce=function(e){q(n,e);var t=K(n);function n(e){var o,i=e.onForward,r=void 0===i?void 0:i;return G(this,n),(o=t.call(this,{styleName:""})).onForward=r,o}return Y(n,[{key:"build",value:function(){var e=this,t=V.instance().getSkin();return new O({onTap:function(){e.onForward&&e.onForward()},child:new P({styleName:"".concat(t.audioButtonContainer," ").concat(t.audioLayout),children:[new P({styleName:"".concat(t.audioButton," ").concat(t.audioPlayForwardFirst)}),new P({styleName:"".concat(t.audioButton," ").concat(t.audioPlayForward)})]})})}}]),n}(k),de=function(e){q(n,e);var t=K(n);function n(e){var o,i=e.onready,r=void 0===i?void 0:i,a=e.onAudioProgressUpdate,u=void 0===a?void 0:a,l=e.onSeek,s=void 0===l?void 0:l;return G(this,n),ee(Q(o=t.call(this,{styleName:"",onready:r})),"_onClick",(function(e){var t=o.audioProgressContainer.getBoundingClientRect();console.log("position"+JSON.stringify(t)+" event="+e.clientX),o.setProgress(e.clientX-t.left,t.right-t.left),o.onSeek&&o.onSeek((e.clientX-t.left)/(t.right-t.left))})),o.onAudioProgressUpdate=u,o.onSeek=s,o}return Y(n,[{key:"setProgress",value:function(e,t){this.progress&&(this.progress.setWidth((e/t*100).toFixed(2)+"%"),this.onAudioProgressUpdate&&this.onAudioProgressUpdate(a.timeFormat(e)+"-"+a.timeFormat(t)))}},{key:"build",value:function(){var e=this,t=V.instance().getSkin();return new P({styleName:t.audioProgressCtrl,children:[new O({onTap:this._onClick,child:new P({styleName:t.audioProgressContainer,children:[new P({styleName:t.audioProgress,onready:function(t){e.progress=t}})],onready:function(t){e.audioProgressContainer=t}})})]})}}]),n}(k),fe=function(e){q(n,e);var t=K(n);function n(e){var o,i=e.onSetVolume,r=void 0===i?void 0:i;return G(this,n),ee(Q(o=t.call(this,{styleName:""})),"_onClick",(function(e){if(o.audioVolumeContainer&&o.audioVolumeProgress&&o.audioVolumeBar){var t=o.audioVolumeContainer.getBoundingClientRect();if(t){var n=t.right-t.left,i=e.clientX-t.left;i<0&&(i=0),e.clientX-t.left>n&&(i=n),console.log("position"+JSON.stringify(t)+" event="+e.clientX),o.position=i,o._setVolume()}}})),o.mute=!1,o.onSetVolume=r,o.position=0,o}return Y(n,[{key:"_setVolume",value:function(){var e=this.audioVolumeContainer.getBoundingClientRect();if(e){var t=e.right-e.left,n=this.position,o=n/t;this.audioVolumeProgress.setWidth((100*o).toFixed(2)+"%"),console.log("audioVolumeBar width="+this.audioVolumeBar.offsetWidth()),this.audioVolumeBar.setLeft((n-this.audioVolumeBar.offsetWidth()<0?0:n-this.audioVolumeBar.offsetWidth())+"px"),n>0&&(this.mute=!1),this._setMuteStyle(),this.onSetVolume(o)}}},{key:"_setMute",value:function(){this.audioVolumeProgress.setWidth("0px"),this.audioVolumeBar.setLeft("0px"),this._setMuteStyle(),this.onSetVolume(0)}},{key:"_setMuteStyle",value:function(){this.muteRef&&this.muteRef.setStyle(this.mute?"audio-volume-mute":"audio-widget-hide")}},{key:"_buildVolumeIcon",value:function(e){var t=this;return new O({onTap:function(){t.mute=!t.mute,t.mute?t._setMute():t._setVolume()},child:new P({styleName:"audio-volume-left-container",children:[new P({styleName:e.audioVolumeIconContainer,children:[new P({styleName:"".concat(e.audioButton," ").concat(e.audioVolumeIconFirst)}),new P({styleName:"".concat(e.audioButton," ").concat(e.audioVolumeIcon)})]}),new P({styleName:this.mute?"audio-volume-mute":"audio-widget-hide",onready:function(e){t.muteRef=e}})]})})}},{key:"_buildVolumeProgress",value:function(e){var t=this;return new O({onTap:this._onClick,child:new P({styleName:e.audioVolumeView,children:[new P({styleName:e.audioVolumeProgress,onready:function(e){t.audioVolumeProgress=e}}),new P({styleName:e.audioVolumeBar,onready:function(e){t.audioVolumeBar=e}})],onready:function(e){t.audioVolumeContainer=e}})})}},{key:"build",value:function(){var e=V.instance().getSkin();return new P({styleName:e.audioVolumeContainer,children:[this._buildVolumeIcon(e),this._buildVolumeProgress(e)]})}}]),n}(k),ye=function(e){q(n,e);var t=K(n);function n(e){var o,i=e.item,r=e.index,a=e.onready,u=void 0===a?void 0:a;return G(this,n),(o=t.call(this,{styleName:"",onready:u})).item=i,o.index=r,o}return Y(n,[{key:"setItemStatus",value:function(){this.audioPlayItem&&this.audioPlayItem.setStyle(V.instance().getSkin().audioItemFocus)}},{key:"resetItemStatus",value:function(){this.audioPlayItem&&this.audioPlayItem.setStyle(V.instance().getSkin().audioPlaylistItem)}},{key:"build",value:function(){var e=this,t=V.instance().getSkin();return new O({onTap:function(){x.sendEvent(ne,e.index)},child:new P({styleName:"".concat(t.audioPlaylistItem),children:[new P({styleName:t.audioItemIndex,children:[new C("".concat(this.item.playId))]}),new P({styleName:t.audioItemName,children:[new C(this.item.name)]}),new P({styleName:t.audioItemAuthor,children:[new C(this.item.author)]}),new P({styleName:"audio-playlist-item-hover"})],onready:function(t){e.audioPlayItem=t}})})}}]),n}(k),he=function(e){q(n,e);var t=K(n);function n(e){var o,i=e.playList,r=void 0===i?void 0:i,a=e.onready,u=void 0===a?void 0:a;return G(this,n),ee(Q(o=t.call(this,{styleName:"",onready:u})),"_onPlayListLoaded",(function(e){o.setState({playList:e})})),o.state={playList:r},o}return Y(n,[{key:"initWidget",value:function(){x.addEvent(oe,this._onPlayListLoaded),this.visible=!0,this.playListItems=[],this.focusIndex=0}},{key:"disposeWidget",value:function(){x.removeEvent(oe,this._onPlayListLoaded)}},{key:"resetPlayItem",value:function(e){this.playListItems[this.focusIndex].resetItemStatus(),this.focusIndex=e,this.playListItems[this.focusIndex].setItemStatus()}},{key:"show",value:function(e){if(this.visible=e,this.audioPlaylistContainer){var t=V.instance().getSkin();this.audioPlaylistContainer.setStyle(e?t.audioPlaylistContainer:t.audioPlaylistContainerHide)}}},{key:"isVisible",value:function(){return this.visible}},{key:"build",value:function(){var e=this,t=[];this.state.playList&&this.state.playList.forEach((function(n,o){t.push(new ye({item:n,index:o,onready:function(t){e.playListItems.push(t)}}))}));var n=V.instance().getSkin();return new P({styleName:n.audioPlaylistContainer,children:t,onready:function(t){e.audioPlaylistContainer=t}})}}]),n}(w);function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function ve(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==pe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==pe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===pe(i)?i:String(i)),o)}var i}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(a,e);var t,n,o,i,r=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(o);if(i){var n=be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t,n=e.theme,o=e.id,i=e.onSwitchChecked;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,{styleName:"",id:o})).theme=n,t.onSwitchChecked=i,t}return t=a,(n=[{key:"build",value:function(){var e=this;return new P({styleName:"bui-switch",children:[new _({id:this.id,onClick:function(){e.checkbox&&e.onSwitchChecked&&e.onSwitchChecked(e.checkbox.checked())},onready:function(t){e.checkbox=t}}),new T({forId:this.id,styleName:this.theme})]})}}])&&ve(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(k);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function we(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ne(o.key),o)}}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}function Ce(e,t,n){return(t=Ne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e){var t=function(e,t){if("object"!==ke(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==ke(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ke(t)?t:String(t)}var Te={login:{path:"/boyiaweb/index/login",title:"login",page:function(){return new P({styleName:""})}},home:{path:"/boyiaweb/index/home",title:"home",page:function(){return new Oe({styleName:""})}}},Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(a,e);var t,n,o,i,r=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_e(o);if(i){var n=_e(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Se(e)}(this,e)});function a(e){var t,n=e.styleName,o=void 0===n?"":n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Ce(Se(t=r.call(this,{styleName:o})),"onMouseDown",(function(e){t.moving=!0,t.playerContainer&&(t.playerLeft=e.clientX,t.playerTop=e.clientY,t.playerOffsetLeft=t.playerContainer.offsetLeft(),t.playerOffsetTop=t.playerContainer.offsetTop(),console.log("playerOffsetLeft="+t.playerContainer.offsetLeft()+" playerOffsetLeft"+t.playerContainer.offsetTop()),t.playerContainer.setCursor("move"))})),Ce(Se(t),"_onMouseMove",(function(e){if(t.playerContainer&&t.moving){console.log("playerLeft="+t.playerLeft+" playerTop"+t.playerTop);var n=e.clientX-(t.playerLeft-t.playerOffsetLeft),o=e.clientY-(t.playerTop-t.playerOffsetTop);console.log("index.js---onMouseMove---left: "+n+" top: "+o),t.playerContainer.setLeft(n+"px"),t.playerContainer.setTop(o+"px")}})),Ce(Se(t),"onMouseUp",(function(e){console.log("index.js---onMouseUp"),t.moving=!1,t.playerContainer&&t.playerContainer.setCursor("default")})),Ce(Se(t),"_onTouchStart",(function(e){t.moving=!0,t.playerContainer&&(t.playerLeft=e.touches[0].clientX,t.playerTop=e.touches[0].clientY,t.playerOffsetLeft=t.playerContainer.offsetLeft(),t.playerOffsetTop=t.playerContainer.offsetTop(),console.log("playerOffsetLeft="+t.playerContainer.offsetLeft()+" playerOffsetLeft"+t.playerContainer.offsetTop()),t.playerContainer.setCursor("move"))})),Ce(Se(t),"_onTouchMove",(function(e){if(t.playerContainer&&t.moving){console.log("playerLeft="+t.playerLeft+" playerTop"+t.playerTop);var n=e.touches[0].clientX-(t.playerLeft-t.playerOffsetLeft),o=e.touches[0].clientY-(t.playerTop-t.playerOffsetTop);console.log("index.js---onMouseMove---left: "+n+" top: "+o),t.playerContainer.setLeft(n+"px"),t.playerContainer.setTop(o+"px")}})),window.onmousemove=t._onMouseMove,window.ontouchmove=t._onTouchMove,t.playerLeft=-1,t.playerTop=-1,t.playerOffsetLeft=-1,t.playerOffsetTop=-1,t}return t=a,(n=[{key:"_buildSetting",value:function(){var e=this;return new P({styleName:"setting-panel",children:[new P({styleName:"setting-item",children:[new P({styleName:"setting-title",children:[new C("Skin Change")]}),new ge({id:"oneOpen",theme:"bui-theme-blue",onSwitchChecked:function(t){t?V.instance().setSkin("default"):V.instance().setSkin("black"),e.audio&&e.audio.setState({})}})]})]})}},{key:"build",value:function(){var e=this;return new P({styleName:"page-main",children:[this._buildSetting(),new O({onTouchStart:this._onTouchStart,onTouchEnd:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,child:new P({styleName:"index-audio-player",children:[new ie({onready:function(t){e.audio=t},playListUrl:"/json/playlist.json"})],onready:function(t){e.playerContainer=t}})})]})}}])&&we(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(w);$(document).ready((function(){L.init(),L.push(Te.home)}))})();