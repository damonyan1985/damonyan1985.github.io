/*! For license information please see index.min.js.LICENSE.txt */
(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(){n=function(){return e};var e={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),u=new O(r||[]);return i(a,"_invoke",{value:P(t,n,u)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h={};function y(){}function p(){}function v(){}var m={};s(m,u,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==r&&o.call(b,u)&&(m=b);var w=v.prototype=y.prototype=Object.create(m);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(e,n){function r(i,a,u,c){var l=d(e[i],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==t(f)&&o.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,u,c)}),(function(t){r("throw",t,u,c)})):n.resolve(f).then((function(t){s.value=t,u(s)}),(function(t){return r("throw",t,u,c)}))}c(l.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new n((function(n,o){r(t,e,n,o)}))}return a=a?a.then(o,o):o()}})}function P(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=d(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function L(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},k(x.prototype),s(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(w),s(w,l,"Generator"),s(w,u,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function r(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var c="canvas",l=function(){function t(){o(this,t)}var e,i;return a(t,null,[{key:"show",value:(e=n().mark((function t(e){var r,o,i,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.msg,o=void 0===r?"":r,(i=document.createElement("div")).innerHTML=o,i.className="boyia-toast",document.body.appendChild(i),a=.5,t.next=8,s.asyncTaskPromise({macroTask:function(){i.style.transition="transform ".concat(a,"s ease-in, opacity ").concat(a,"s ease-in"),i.style.opacity="0"},duration:1e3});case 8:return t.next=10,s.asyncTaskPromise({macroTask:function(){document.body.removeChild(i)},duration:1e3*a});case 10:case"end":return t.stop()}}),t)})),i=function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)}))},function(t){return i.apply(this,arguments)})}]),t}(),s=function(){function t(){o(this,t)}return a(t,null,[{key:"getUrlParams",value:function(){}},{key:"remToPx",value:function(t){return 12*t}},{key:"objToStyle",value:function(t,e){if(e&&e instanceof Object){var n=t.style;for(var r in e)n[r]=e[r]}}},{key:"asyncTask",value:function(t){var e=t.macroTask,n=t.duration,r=void 0===n?0:n,o=t.completed,i=t.fail,a=setTimeout((function(){try{if(window.clearTimeout(a),!e)return void o("no macroTask");var t=e();o&&o(t)}catch(t){console.error("asyncTask error: ",t),i&&i(t)}}),r)}},{key:"asyncTaskPromise",value:function(e){var n=e.macroTask,r=e.duration,o=void 0===r?0:r;return new Promise((function(e,r){t.asyncTask({macroTask:n,duration:o,completed:function(t){e(t)},fail:function(t){r(t)}})}))}},{key:"measureText",value:function(t,e){var n=document.createElement(c).getContext("2d");return n.font=e,n.measureText(t).width}},{key:"extend",value:function(t){for(var e=t.objs,n=void 0===e?[]:e,r={},o=0;o<n.length;o++){var i=n[o];if(i instanceof Object)for(var a in i)r[a]=i[a]}return r}}]),t}();e(s,"timeFormat",(function(t){var e=parseInt(t/60),n=parseInt(t%60);return(e<10?"0"+e:e)+":"+(n<10?"0"+n:n)})),Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},Array.prototype.clear=function(){this.length>0&&this.splice(0,this.length)},String.format=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,(function(t,n){return void 0!==e[n]?e[n]:t}))};var f=function(){function t(){o(this,t)}return a(t,null,[{key:"setData",value:function(e,n){t._storage[e]=n,localStorage.setItem(e,n)}},{key:"getObject",value:function(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null}},{key:"setObject",value:function(t,e){if(e){var n=localStorage.setItem(t,JSON.stringify(e));console.log("result = ".concat(n))}}},{key:"getData",value:function(e){var n=t._storage[e];return n||((n=localStorage.getItem(e))&&(t._storage[e]=n),n)}},{key:"removeData",value:function(e){t._storage[e]&&delete t._storage[e],localStorage.removeItem(e)}}]),t}();e(f,"_storage",{});var d=window.AudioContext||window.webkitAudioContext,h=a((function t(){o(this,t)}));function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function p(t,e,n){return(e=C(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},v.apply(this,arguments)}function m(){m=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),u=new O(o||[]);return r(a,"_invoke",{value:P(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function h(){}function p(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&n.call(b,i)&&(v=b);var w=p.prototype=d.prototype=Object.create(v);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(r,i,a,u){var c=s(t[r],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==y(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function P(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=p,r(w,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(x.prototype),c(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(w),c(w,u,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function g(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x(t);if(e){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function _(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===y(e)?e:String(e)}e(h,"USE_STATE",!0),e(h,"USE_STATE_UI_UPDATE",!1);var O=function(){function t(e){var n=e.styleName,r=void 0===n?"":n,o=e.id,i=void 0===o?"":o,a=e.onready,u=void 0===a?void 0:a;P(this,t),this.styleName=r,this.id=i,this.onready=u}return _(t,[{key:"initWidget",value:function(){}},{key:"disposeWidget",value:function(){if(this.isContainer()&&this.children)for(var t=0;t<this.children.length;t++)this.children[t].disposeWidget();else this.isComponent()&&this.child&&this.child.disposeWidget()}},{key:"build",value:function(){return this}},{key:"isContainer",value:function(){return!1}},{key:"render",value:function(){return this.elem=this._render(),this.onready&&this.elem&&this.onready(this),this.elem}},{key:"_render",value:function(){return this.isComponent()?this.build().render():null}},{key:"isComponent",value:function(){return!1}},{key:"isText",value:function(){return!1}},{key:"isImage",value:function(){return!1}},{key:"classType",value:function(){return this.constructor}}]),t}(),L=function(t){b(n,t);var e=k(n);function n(t){var r=t.styleName,o=t.id,i=void 0===o?"":o,a=t.onready,u=void 0===a?void 0:a;return P(this,n),e.call(this,{styleName:r,id:i,onready:u})}return _(n,[{key:"isComponent",value:function(){return!0}},{key:"rebuild",value:function(){return this.child=this.build(),this.child}},{key:"_render",value:function(){return this.child||(this.initWidget(),this.child=this.build()),this.child.render()}}]),n}(O),T=function(t){b(o,t);var e,n,r=k(o);function o(t){var e,n=t.styleName,i=t.onready,a=void 0===i?void 0:i;return P(this,o),(e=r.call(this,{styleName:n,onready:a})).state={},e}return _(o,[{key:"rebuild",value:function(){return this.child=this.build(),this.child}},{key:"isComponent",value:function(){return!0}},{key:"setStateAsync",value:(e=m().mark((function t(e,n){var r=this;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.asyncTaskPromise({macroTask:function(){r.setState(e)}});case 2:n&&n();case 3:case"end":return t.stop()}}),t)})),n=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){g(i,r,o,a,u,"next",t)}function u(t){g(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t,e){return n.apply(this,arguments)})},{key:"setState",value:function(t){if(h.USE_STATE){this.state=t;var e=H.cloneWidget(this);new H(this,e).diff()}else if(h.USE_STATE_UI_UPDATE){var n;this.state=t,console.log("BoyiaStateWidget setState parent = "+(this.node&&this.node.parentNode?this.node.parentNode:null)),this.node&&this.node.parentNode&&(n=this.node.parentNode).removeChild(this.node),H.rebuild(this),this.render(),this.node&&n&&n.appendChild(this.node)}}},{key:"_render",value:function(){return this.child||(this.initWidget(),this.child=this.build()),this.child&&(this.node=this.child.render()),this.node}}]),o}(O),j=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.id,i=void 0===o?"":o,a=t.styleName,u=void 0===a?"":a,c=t.style,l=void 0===c?void 0:c,s=t.children,f=void 0===s?[]:s,d=t.contenteditable,h=void 0!==d&&d,y=t.onready,p=void 0===y?void 0:y;if(P(this,n),r=e.call(this,{styleName:u,id:i,onready:p}),!(f instanceof Array))throw new Error("children is not a chilren");return r.children=f,r.style=l,r.contenteditable=h,r}return _(n,[{key:"width",value:function(){return this.elem?this.elem.clientWidth:0}},{key:"height",value:function(){return this.elem?this.elem.clientHeight:0}},{key:"setWidth",value:function(t){this.elem&&(this.elem.style.width=t)}},{key:"setStyleName",value:function(t){this.styleName=t,this.elem&&(this.elem.className=t)}},{key:"setStyle",value:function(t){this.style=t,this.elem&&s.objToStyle(this.elem,t)}},{key:"getComputedStyle",value:function(t){if(this.elem)return window.getComputedStyle(this.elem)[t]}},{key:"getStylePropValue",value:function(t){if(this.elem)return this.elem.style[t]}},{key:"setStylePropValue",value:function(t,e){this.elem&&(this.elem.style[t]=e)}},{key:"setCursor",value:function(t){this.elem&&(this.elem.style.cursor=t)}},{key:"setTop",value:function(t){this.elem&&(this.elem.style.top=t)}},{key:"setLeft",value:function(t){this.elem&&(this.elem.style.left=t)}},{key:"offsetLeft",value:function(){return this.elem?this.elem.offsetLeft:0}},{key:"offsetTop",value:function(){return this.elem?this.elem.offsetTop:0}},{key:"offsetWidth",value:function(){return this.elem?this.elem.offsetWidth:0}},{key:"offsetHeight",value:function(){return this.elem?this.elem.offsetHeight:0}},{key:"getBoundingClientRect",value:function(){return this.elem?this.elem.getBoundingClientRect():null}},{key:"setScrollTop",value:function(t){this.elem&&(this.elem.scrollHeight<=this.elem.clientHeight+this.elem.scrollTop||(this.elem.scrollTop=this.elem.scrollTop+t))}},{key:"scrollBy",value:function(t){this.elem&&(this.elem.scrollHeight<=this.elem.clientHeight+this.elem.scrollTop||this.elem&&this.elem.scrollBy({left:0,top:t,behavior:"smooth"}))}},{key:"scrollTo",value:function(t){this.elem&&(this.elem.scrollHeight<=this.elem.clientHeight+this.elem.scrollTop&&this.elem.scrollHeight<=this.elem.clientHeight+t||this.elem&&this.elem.scrollTo({left:0,top:t,behavior:"smooth"}))}},{key:"positionContain",value:function(t,e){var n=this.getAbsolutePosition(),r=n.x,o=n.y;return t>r&&t<r+this.offsetWidth()&&e>o&&e<o+this.offsetHeight()}},{key:"getAbsolutePosition",value:function(){if(!this.elem)return{x:0,y:0};for(var t=this.elem,e=t.offsetLeft,n=t.offsetParent;n;)e+=n.offsetLeft,n=n.offsetParent;var r=t.offsetTop;for(n=t.offsetParent;n;)r+=n.offsetTop+n.clientTop,n=n.offsetParent;return{x:e,y:r}}},{key:"isContainer",value:function(){return!0}},{key:"_render",value:function(){var t=document.createElement("div");return this.id&&t.setAttribute("id",this.id),this.contenteditable&&(t.contenteditable=this.contenteditable),this.styleName&&(t.className=this.styleName),this.style&&s.objToStyle(t,this.style),this.children.forEach((function(e){try{t.appendChild(e.render())}catch(t){console.error("appendChild err:",t),console.log("child class: "+e.constructor.name)}})),t}}]),n}(O),E=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.style,i=t.styleName,a=t.url,u=t.id,c=void 0===u?"":u,l=t.onready,s=void 0===l?void 0:l;return P(this,n),(r=e.call(this,{styleName:i,id:c,onready:s})).url=a,r.style=o,r}return _(n,[{key:"setImageUrl",value:function(t){this.url=t,this.elem&&(this.elem.src=this.url)}},{key:"_render",value:function(){var t=document.createElement("img");return t.src=this.url,this.styleName&&(t.className=this.styleName),this.style&&s.objToStyle(t,this.style),t}},{key:"isImage",value:function(){return!0}}]),n}(O),I=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.styleName,i=t.id,a=void 0===i?"":i,u=t.name,c=void 0===u?"":u,l=t.value,s=void 0===l?"":l,f=t.style,d=t.onready,h=void 0===d?void 0:d,y=t.onChange;return P(this,n),(r=e.call(this,{styleName:o,id:a,onready:h})).name=c,r.value=s,r.onChange=y,r.style=f,r}return _(n,[{key:"type",value:function(){return""}},{key:"setValue",value:function(t){this.value=t,this.elem&&(this.elem.value=t)}},{key:"_render",value:function(){var t=this,e=document.createElement("input");return e.setAttribute("type",this.type()),e.setAttribute("name",this.name),e.setAttribute("value",this.value),this.onChange&&(e.onchange=function(){t.onChange(e.value)}),this.styleName&&(e.className=this.styleName),this.style&&s.objToStyle(e,this.style),e}}]),n}(O),N=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.styleName,i=t.style,a=t.id,u=void 0===a?"":a,c=t.name,l=void 0===c?"":c,s=t.value,f=void 0===s?"":s,d=t.placeholder,h=t.onblur,y=t.onready,p=t.onClick,v=t.onChange;return P(this,n),(r=e.call(this,{styleName:o,style:i,id:u,name:l,value:f,onready:y,onChange:v})).placeholder=d,r.onblur=h,r.onClick=p,r}return _(n,[{key:"type",value:function(){return"text"}},{key:"focus",value:function(){this.elem&&this.elem.focus()}},{key:"_render",value:function(){var t=v(x(n.prototype),"_render",this).call(this);return this.placeholder&&t.setAttribute("placeholder",this.placeholder),this.onblur&&(t.onblur=this.onblur),this.onClick&&(t.onclick=this.onClick),t}}]),n}(I),F=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.styleName,i=t.id,a=void 0===i?"":i,u=t.name,c=void 0===u?"":u,l=t.value,s=void 0===l?"":l,f=t.style,d=t.onready,h=t.onChange;return P(this,n),(r=e.call(this,{styleName:o,id:a,name:c,style:f,value:s,onready:d})).onChange=h,r}return _(n,[{key:"type",value:function(){return"file"}},{key:"filter",value:function(){return"image/*"}},{key:"_render",value:function(){var t=this,e=v(x(n.prototype),"_render",this).call(this);return e.setAttribute("accept",this.filter()),this.onChange&&(e.onchange=function(){t.onChange(e.files[0])}),e}}]),n}(I),A=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.styleName,i=void 0===o?"":o,a=t.id,u=void 0===a?"":a,c=t.name,l=void 0===c?"":c,s=t.value,f=void 0===s?"":s,d=t.checked,h=void 0!==d&&d,y=t.onClick,p=t.onready,v=void 0===p?void 0:p;return P(this,n),(r=e.call(this,{styleName:i,id:u,name:l,value:f,onready:v})).onClick=y,r.checked=h,r}return _(n,[{key:"type",value:function(){return"checkbox"}},{key:"isChecked",value:function(){return!!this.elem&&this.elem.checked}},{key:"_render",value:function(){var t=v(x(n.prototype),"_render",this).call(this);return this.onClick&&(t.onclick=this.onClick),this.checked&&(t.checked=this.checked),this.id&&(t.id=this.id),t}}]),n}(I),R=function(t){b(n,t);var e=k(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return P(this,n),(r=e.call(this,{styleName:"",id:"",onready:o})).text=t,r}return _(n,[{key:"setText",value:function(t){this.elem&&(this.elem.textContent=t)}},{key:"_render",value:function(){return document.createTextNode(this.text)}},{key:"isText",value:function(){return!0}}]),n}(O),M=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.oncanplay,i=t.onplay,a=t.onended,u=t.onprogress,c=t.ontimeupdate,l=t.onready;return P(this,n),(r=e.call(this,{styleName:"",id:"",onready:l})).oncanplay=o,r.onplay=i,r.onended=a,r.onprogress=u,r.ontimeupdate=c,r}return _(n,[{key:"seekTo",value:function(t){this.elem&&(this.elem.currentTime=t*this.elem.duration)}},{key:"currentTime",value:function(){return this.elem&&this.elem.currentTime}},{key:"duration",value:function(){return this.elem&&this.elem.duration}},{key:"hasUrl",value:function(){return this.elem&&this.elem.src}},{key:"setPlayUrl",value:function(t){this.elem&&(this.elem.src=t)}},{key:"play",value:function(){this.elem&&this.elem.play()}},{key:"pause",value:function(){this.elem&&this.elem.pause()}},{key:"setVolume",value:function(t){this.elem&&(this.elem.volume=t)}},{key:"_render",value:function(){var t=document.createElement("audio");return t.setAttribute("preload","auto"),t.oncanplay=function(){console.log("on audio prepared duration="+t.duration)},t.onplay=this.onplay,t.onended=this.onended,t.onprogress=this.onprogress,t.ontimeupdate=this.ontimeupdate,t.onerror=t.onended,this.elem=t,this.onready&&this.onready(this),t}}]),n}(O),B=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.forId,i=t.styleName;return P(this,n),(r=e.call(this,{styleName:i,id:""})).forId=o,r}return _(n,[{key:"_render",value:function(){var t=document.createElement("label");return this.forId&&t.setAttribute("for",this.forId),this.styleName&&(t.className=this.styleName),t}}]),n}(O),D=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.onTap,i=void 0===o?void 0:o,a=t.onHover,u=void 0===a?void 0:a,c=t.onTouchStart,l=void 0===c?void 0:c,s=t.onTouchEnd,f=void 0===s?void 0:s,d=t.onMouseDown,h=void 0===d?void 0:d,y=t.onMouseUp,p=void 0===y?void 0:y,v=t.onContextMenu,m=void 0===v?void 0:v,g=t.onDragStart,b=void 0===g?void 0:g,w=t.onDragOver,k=void 0===w?void 0:w,x=t.onDragEnd,S=void 0===x?void 0:x,_=t.onDrag,C=void 0===_?void 0:_,O=t.child;return P(this,n),(r=e.call(this,{styleName:"",id:""})).onTap=i,r.onHover=u,r.child=O,r.onTouchStart=l,r.onTouchEnd=f,r.onMouseDown=h,r.onMouseUp=p,r.onContextMenu=m,r.onDragStart=b,r.onDragOver=k,r.onDragEnd=S,r.onDrag=C,r}return _(n,[{key:"build",value:function(){return this.child}},{key:"_render",value:function(){var t=this.child.render();return this.onTap&&(t.onclick=this.onTap),this.onHover&&(t.onmouseover=this.onHover),this.onMouseDown&&(t.onmousedown=this.onMouseDown),this.onMouseUp&&(t.onmouseup=this.onMouseUp),this.onTouchStart&&(t.ontouchstart=this.onTouchStart),this.onTouchEnd&&(t.ontouchend=this.onTouchEnd),this.onContextMenu&&(t.oncontextmenu=this.onContextMenu),this.onDrag&&(t.ondrag=this.onDrag),this.onDragStart&&(t.ondragstart=this.onDragStart),this.onDragEnd&&(t.ondragend=this.onDragEnd),this.onDragOver&&(t.ondragover=this.onDragOver),t}}]),n}(L),W=function(t){b(n,t);var e=k(n);function n(t){var r,o=t.width,i=void 0===o?0:o,a=t.height,u=void 0===a?0:a,c=t.onready,l=void 0===c?void 0:c;return P(this,n),(r=e.call(this,{styleName:"",id:"",onready:l})).width=i,r.height=u,r}return _(n,[{key:"setCanvasSize",value:function(t,e){this.width=t,this.height=e,this.elem&&(this.elem.width=this.width,this.elem.height=this.height)}},{key:"imageData",value:function(){return this.context?this.context.getImageData(0,0,this.width,this.height):null}},{key:"putImageData",value:function(t,e,n){this.context&&this.context.putImageData(t,e,n)}},{key:"_render",value:function(){var t=document.createElement(c);return t.width=this.width,t.height=this.height,this.context=t.getContext("2d"),t}}]),n}(O),V=function(){function t(){P(this,t)}return _(t,null,[{key:"init",value:function(){t._root=document.getElementById("root"),window.onpopstate=function(e){console.log("onpopstate e = ",e.state),t.pop()}}},{key:"push",value:function(e){var n=e.page,r=e.path,o=e.title;if(t._root&&n){var i=n();if(i instanceof O){t._stack.push(i);var a=t._root;t._removeAll(t._root),a.appendChild(i.render()),history.pushState({title:o,path:r},o,r)}}}},{key:"_removeAll",value:function(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild)}},{key:"pop",value:function(){if(t._root&&!(t._stack.length<=1)){var e=t._root;t._removeAll(e);var n=t._stack,r=n.splice(n.length-1,1);if(r)for(var o=0;o<r.length;o++)r[o].disposeWidget();n.length>0&&e.appendChild(n[n.length-1].render())}}},{key:"replace",value:function(e){var n=e.page,r=e.path,o=e.title;if(0==t._stack.length&&t.push({page:n,path:r,title:o}),t._root&&n){var i=n();if(i instanceof O){var a=t._stack[t._stack.length-1];a&&a.disposeWidget(),t._stack[t._stack.length-1]=i;var u=t._root;t._removeAll(t._root),u.appendChild(i.render()),history.replaceState({title:o,path:r},o,r)}}}}]),t}();p(V,"_root",void 0),p(V,"_stack",[]);var U=function(){function t(){P(this,t)}return _(t,null,[{key:"addEvent",value:function(e,n){if(e&&n){var r=t._events[e];r||(r=[],t._events[e]=r),r.push(n)}}},{key:"removeAll",value:function(){_events={}}},{key:"removeEvent",value:function(e,n){if(e&&n){var r=t._events[e];if(r&&0!=r.length)for(var o=0;o<r.length;o++)if(r[o]==n){r.splice(o,1);break}}}},{key:"sendEvent",value:function(e,n){var r=t._events[e];r&&r instanceof Array&&r.forEach((function(t){t(n)}))}}]),t}();p(U,"_events",{});var G,H=function(){function t(e,n){P(this,t),this.oldWidget=e,this.newWidget=n}return _(t,[{key:"diff",value:function(){t.rebuild(this.newWidget,this.oldWidget);var e=this.oldWidget.child,n=this.newWidget.child;this.diffImpl(e,n,this.oldWidget)}},{key:"diffImpl",value:function(t,e,n){try{if(t.classType()!=e.classType())return void this._replaceWidget(t,e,n)}catch(t){console.error("compare type",t)}if(t.isContainer())this._diffContainer(t,e);else if(t.isComponent()){var r=t.child,o=e.child;this.diffImpl(r,o,t)}else t.isText()?t.text!=e.text&&t.setText(e.text):t.isImage()&&e.url&&t.url!=e.url&&t.setImageUrl(e.url)}},{key:"_diffContainer",value:function(t,e){var n=e.children,r=t.children,o=r.length;if(n.length<r.length){for(var i=n.length;i<r.length;i++)t.elem.removeChild(r[i].elem);r.splice(n.length,r.length-n.length)}else if(n.length>r.length){for(var a=r.length;a<n.length;a++)t.elem.appendChild(n[a].render());r.push.apply(r,n.slice(r.length,n.length))}for(var u=n.length>o?o:n.length,c=0;c<u;c++)this.diffImpl(r[c],n[c],t);try{var l;e.styleName!=t.styleName&&t.setStyleName(null!==(l=e.styleName)&&void 0!==l?l:""),e.style!=t.style&&t.setStyle(e.style)}catch(t){console.error("set class name error",t)}}},{key:"_replaceWidget",value:function(e,n,r){if(n&&n.isComponent()&&t._resetInitWidget(n),r.isContainer()){var o=r.children.indexOf(e);r.children[o]=n,r.elem&&r.elem.replaceChild(n.render(),e.elem)}else r.isComponent()&&(r.child=n,e.elem&&e.elem.parentNode&&e.elem.parentNode.replaceChild(n.render(),e.elem));e.disposeWidget()}}],[{key:"_rebuildComponent",value:function(e,n){n&&(e.initProps=n.initProps),t.rebuild(e.rebuild(),n?n.child:null)}},{key:"rebuild",value:function(e,n){var r=n&&n.classType()==e.classType();e.isContainer()?e.children.forEach((function(e,o){var i=r?n.children[o]:null;t.rebuild(e,i)})):e.isComponent()?t._rebuildComponent(e,r?n:null):console.log("other type")}},{key:"isBoyiaWidget",value:function(t){return t instanceof O}},{key:"cloneWidget",value:function(e){if(!t.isBoyiaWidget(e))throw new Error("obj is not a boyia widget");var n=new e.constructor({styleName:e.styleName,onready:e.onready});for(var r in e)n[r]=e[r];return n}},{key:"_resetContainerInit",value:function(e){e.children.forEach((function(e){e.isComponent()?t._resetInitWidget(e):e.isContainer()&&t._resetContainerInit(e)}))}},{key:"_resetInitWidget",value:function(e){e.initWidget();var n=e.child;n.isContainer()?t._resetContainerInit(n):n.isComponent()&&t._resetInitWidget(n)}}]),t}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function X(t,e,n){return(e=q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q(t){var e=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===z(e)?e:String(e)}var J=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"fetchPromise",value:function(e){var n=e.url,r=e.method,o=void 0===r?t.HttpMethod.get:r,i=e.headers,a=void 0===i?{}:i,u=e.data,c=e.responseType,l=void 0===c?"json":c;return new Promise((function(e,r){t.fetch({url:n,method:o,headers:a,data:u,responseType:l,success:function(t){e({status:"ok",data:t})},fail:function(t){r({status:"fail",reason:t})}})}))}},{key:"fetch",value:function(e){var n=e.url,r=e.method,o=void 0===r?t.HttpMethod.get:r,i=e.headers,a=void 0===i?{}:i,u=e.data,c=e.responseType,l=void 0===c?"json":c,s=e.success,f=e.fail,d=e.uploadProgress,h=e.onLoad;u=u||{};var y=t._methodMap[o](a,u);console.log("reqData = ",y),o===t.HttpMethod.get&&(n+=y);var p=new XMLHttpRequest;p.responseType=l,"blob"==l?h&&(p.onload=function(t){200!=p.status&&206!=p.status||h(t,p)}):p.onreadystatechange=function(){4===p.readyState&&(200===p.status?s&&"function"==typeof s&&s(p.response):f&&"function"==typeof f&&f(p.status))},d&&(p.upload.onprogress=function(t){t.lengthComputable&&d(t.loaded,t.total)}),p.open(o,n,!0),Object.keys(a).forEach((function(t){p.setRequestHeader(t,a[t])})),p.send(o===t.HttpMethod.post?y:null)}},{key:"_getPostJsonData",value:function(t){return JSON.stringify(t)}},{key:"_getPostFormData",value:function(t){if(0==Object.keys(t).length)return"";var e=[];for(var n in t)e.push("".concat(n,"=",t[n]));return e.join("&")}},{key:"_httpGetData",value:function(t,e){return 0==Object.keys(e).length?"":0===location.search.length?"".concat("?",e):"".concat("&",e)}},{key:"_httpPostData",value:function(e,n){var r=t._postMap[e["Content-Type"]];return r?r(n):n}},{key:"upload",value:function(e){var n=e.url,r=e.headers,o=void 0===r?{}:r,i=e.file,a=e.success,u=e.fail,c=e.uploadProgress,l=new FormData;l.append("file",i),t.fetch({url:n,headers:o,data:l,method:t.HttpMethod.post,success:a,fail:u,uploadProgress:c})}},{key:"download",value:function(e){var n=e.url,r=e.name,o=e.headers,i=void 0===o?{}:o;t.fetch({url:n,headers:i,responseType:"blob",method:t.HttpMethod.get,onLoad:function(t,e){var n=new Blob([e.response],{type:"application/octet-stream"}),o=e.getResponseHeader("Content-Disposition"),i=document.createElement("a"),a=null!=r?r:"unknow";if(o){var u=o.split("=");a=decodeURI(u[1])}console.log("BoyiaHttp download file name = "+a),i.href=window.URL.createObjectURL(n),i.download=a,i.click(),i.remove(),window.URL.revokeObjectURL(i.href)}})}}],null&&Y(e.prototype,null),n&&Y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function Q(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tt(){tt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),u=new _(o||[]);return r(a,"_invoke",{value:k(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function h(){}function y(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,i)&&(p=m);var g=y.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var c=s(t[r],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==K(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=y,r(g,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function et(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function nt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){et(i,r,o,a,u,"next",t)}function u(t){et(i,r,o,a,u,"throw",t)}a(void 0)}))}}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,it(r.key),r)}}function ot(t,e,n){return(e=it(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t){var e=function(t,e){if("object"!==K(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===K(e)?e:String(e)}X(J,"HttpMethod",{get:"GET",post:"POST"}),X(J,"_postMap",{"application/x-www-form-urlencoded":J._getPostFormData,"application/json":J._getPostJsonData}),X(J,"_methodMap",(X(G={},J.HttpMethod.get,J._httpGetData),X(G,J.HttpMethod.post,J._httpPostData),G));var at="User-Token",ut="audio",ct=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,o,i,a,u;return e=t,null,n=[{key:"clear",value:function(){t.audioData=null,f.removeData(ut)}},{key:"_getData",value:function(){var e;return t.audioData||(t.audioData=null!==(e=f.getObject(ut))&&void 0!==e?e:{}),t.audioData}},{key:"getVolume",value:function(){var t;return null!==(t=this._getData().volume)&&void 0!==t?t:1}},{key:"setVolume",value:function(t){var e=this._getData();e.volume=t,s.asyncTask({macroTask:function(){f.setObject(ut,e)}})}},{key:"isTuneCirculation",value:function(){var t;return null!==(t=this._getData().isTuneCirculation)&&void 0!==t&&t}},{key:"setTuneCirculation",value:(u=nt(tt().mark((function t(e){var n;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this._getData()).isTuneCirculation=e,t.next=4,s.asyncTaskPromise({macroTask:function(){f.setObject(ut,n)}});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"getLocalPlaylist",value:function(){var t;return null!==(t=this._getData().playlist)&&void 0!==t?t:[]}},{key:"getInternetPlaylist",value:function(){var e;return null!==(e=t.internetPlaylist)&&void 0!==e?e:[]}},{key:"getPlaylist",value:(a=nt(tt().mark((function e(n){var r,o,i,a;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getLocalPlaylist(),0!=(o=t.getInternetPlaylist()).length||!n){e.next=7;break}return e.next=5,J.fetchPromise({url:n,headers:ot({},at,"none"),method:J.HttpMethod.get});case 5:"ok"==(i=e.sent).status&&(console.log("playlist data = ",i),o=null!==(a=i.data)&&void 0!==a?a:[],t.internetPlaylist=o);case 7:return r=[].concat(Q(r),Q(o)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),function(t){return a.apply(this,arguments)})},{key:"setLocalPlaylist",value:(i=nt(tt().mark((function t(e){var n;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this._getData()).playlist=e,t.next=4,s.asyncTaskPromise({macroTask:function(){f.setObject(ut,n)}});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"deletePlayItem",value:(o=nt(tt().mark((function e(n){var r,o;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(r=t.getLocalPlaylist()).length){e.next=3;break}return e.abrupt("return");case 3:o=0;case 4:if(!(o<r.length)){e.next=11;break}if(r[o].playId!=n){e.next=8;break}return r.splice(o,1),e.abrupt("break",11);case 8:o++,e.next=4;break;case 11:return e.next=13,t.setLocalPlaylist(r);case 13:case"end":return e.stop()}}),e)}))),function(t){return o.apply(this,arguments)})},{key:"getSkin",value:function(){var t;return null!==(t=this._getData().skin)&&void 0!==t?t:"black"}},{key:"setSkin",value:(r=nt(tt().mark((function t(e){var n;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this._getData()).skin=e,t.next=4,s.asyncTaskPromise({macroTask:function(){f.setObject(ut,n)}});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}],n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===lt(o)?o:String(o)),r)}var o}ot(ct,"audioData",null),ot(ct,"internetPlaylist",null);var ft=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"createSkin",value:function(t){return{name:"".concat(t),style:{audioPlayer:"audio-player-".concat(t),audioContainerBlink:"audio-container-blink-".concat(t),audioButton:"audio-button-".concat(t),audioPlayButton:"audio-play-button-".concat(t),audioPlayPause:"audio-play-pause-".concat(t),audioPlayForwardFirst:"audio-forward-first-".concat(t),audioPlayForward:"audio-forward-".concat(t),audioBack:"audio-back-".concat(t),audioBackFirst:"audio-back-first-".concat(t),audioLayout:"audio-layout-".concat(t),audioButtonContainer:"audio-button-container-".concat(t),audioBottom:"audio-bottom-".concat(t),audioProgressCtrl:"audio-progress-ctrl-".concat(t),audioProgressContainer:"audio-progress-container-".concat(t),audioProgress:"audio-progress-".concat(t),audioImageContainer:"audio-image-container-".concat(t),audioImage:"audio-image-".concat(t),audioHeader:"audio-header-".concat(t),audioTitleContainer:"audio-title-container-".concat(t),audioTitleText:"audio-title-text-".concat(t),audioProgressText:"audio-progress-text-".concat(t),audioPlaylistShow:"audio-playlist-show-".concat(t),audioPlaylistContainer:"audio-playlist-container-".concat(t),audioPlaylistContainerHide:"audio-playlist-container-hide-".concat(t),audioPlaylistItem:"audio-playlist-item-".concat(t),audioPlaylistEvenItem:"audio-playlist-even-item-".concat(t),audioItemIndex:"audio-item-index-".concat(t),audioItemName:"audio-item-name-".concat(t),audioItemAuthor:"audio-item-author-".concat(t),audioItemFocus:"audio-item-name-focus-".concat(t),audioListButtonContainer:"audio-list-button-container-".concat(t),audioListButtonStyle:"audio-list-button-style-".concat(t),audioVolumeIconFirst:"audio-volume-icon-first-".concat(t),audioVolumeIcon:"audio-volume-icon-".concat(t),audioVolumeView:"audio-volume-view-".concat(t),audioVolumeProgress:"audio-volume-progress-".concat(t),audioVolumeBar:"audio-volume-bar-".concat(t),audioVolumeIconContainer:"audio-volume-icon-container-".concat(t),audioVolumeContainer:"audio-volume-container-".concat(t),audioLyricButtonContainer:"audio-lyric-button-container-".concat(t),audioLyricsContainer:"audio-lyrics-container-".concat(t),audioLyricItem:"audio-lyric-item-".concat(t),audioLyricRoot:"audio-lyrics-root-".concat(t),audioLyricShow:"audio-lyric-show-".concat(t),audioShadowTop:"audio-shadow-top-".concat(t),audioShadowBottom:"audio-shadow-bottom-".concat(t),audioLyricItemFocus:"audio-lyric-item-focus-".concat(t),audioNoLyricTip:"audio-no-lyric-tip-".concat(t),audioEffectContainer:"effect-container-".concat(t),audioPlaylistRoot:"audio-playlist-root-".concat(t),audioSettingButtonContainer:"audio-setting-button-container-".concat(t),audioSettingButtonOuter:"audio-setting-button-outer-".concat(t),audioSettingButtonInner:"audio-setting-button-inner-".concat(t),audioSettingsContainer:"audio-settings-container-".concat(t),audioSwitchStyle:"audio-bui-switch",audioAddSongRoot:"audio-add-song-root-".concat(t),audioAddSongContainer:"audio-add-song-container-".concat(t),audioAddSongClose:"audio-add-song-container-close-".concat(t),audioAddSongInput:"audio-add-song-input-".concat(t),audioMainColor:"audio-main-color-".concat(t)}}}}],null&&st(e.prototype,null),n&&st(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==dt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===dt(o)?o:String(o)),r)}var o}var yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.skinMap={},this.register({name:"black",style:{audioPlayer:"audio-player-black",audioContainerBlink:"audio-container-blink-black",audioButton:"audio-button-black",audioPlayButton:"audio-play-button-black",audioPlayPause:"audio-play-pause-black",audioPlayForwardFirst:"audio-forward-first-black",audioPlayForward:"audio-forward-black",audioBack:"audio-back-black",audioBackFirst:"audio-back-first-black",audioLayout:"audio-layout-black",audioButtonContainer:"audio-button-container-black",audioBottom:"audio-bottom-black",audioProgressCtrl:"audio-progress-ctrl-black",audioProgressContainer:"audio-progress-container-black",audioProgress:"audio-progress-black",audioImageContainer:"audio-image-container-black",audioImage:"audio-image-black",audioHeader:"audio-header-black",audioTitleContainer:"audio-title-container-black",audioTitleText:"audio-title-text-black",audioProgressText:"audio-progress-text-black",audioPlaylistShow:"audio-playlist-show-black",audioPlaylistContainer:"audio-playlist-container-black",audioPlaylistContainerHide:"audio-playlist-container-hide-black",audioPlaylistItem:"audio-playlist-item-black",audioPlaylistEvenItem:"audio-playlist-even-item-black",audioItemIndex:"audio-item-index-black",audioItemName:"audio-item-name-black",audioItemAuthor:"audio-item-author-black",audioItemFocus:"audio-item-name-focus-black",audioListButtonContainer:"audio-list-button-container-black",audioListButtonStyle:"audio-list-button-style-black",audioVolumeIconFirst:"audio-volume-icon-first-black",audioVolumeIcon:"audio-volume-icon-black",audioVolumeView:"audio-volume-view-black",audioVolumeProgress:"audio-volume-progress-black",audioVolumeBar:"audio-volume-bar-black",audioVolumeIconContainer:"audio-volume-icon-container-black",audioVolumeContainer:"audio-volume-container-black",audioLyricButtonContainer:"audio-lyric-button-container-black",audioLyricsContainer:"audio-lyrics-container-black",audioLyricItem:"audio-lyric-item-black",audioLyricRoot:"audio-lyrics-root-black",audioLyricShow:"audio-lyric-show-black",audioShadowTop:"audio-shadow-top-black",audioShadowBottom:"audio-shadow-bottom-black",audioLyricItemFocus:"audio-lyric-item-focus-black",audioNoLyricTip:"audio-no-lyric-tip-black",audioEffectContainer:"effect-container-black",audioPlaylistRoot:"audio-playlist-root-black",audioSettingButtonContainer:"audio-setting-button-container-black",audioSettingButtonOuter:"audio-setting-button-outer-black",audioSettingButtonInner:"audio-setting-button-inner-black",audioSettingsContainer:"audio-settings-container-black",audioSwitchStyle:"audio-bui-switch",audioAddSongRoot:"audio-add-song-root-black",audioAddSongContainer:"audio-add-song-container-black",audioAddSongClose:"audio-add-song-container-close-black",audioAddSongInput:"audio-add-song-input-black",audioMainColor:"audio-main-color-black"}}),this.register({name:"default",style:{audioPlayer:"audio-player",audioContainerBlink:"audio-container-blink",audioButton:"audio-button",audioPlayButton:"audio-play-button",audioPlayPause:"audio-play-pause",audioPlayForwardFirst:"audio-forward-first",audioPlayForward:"audio-forward",audioBack:"audio-back",audioBackFirst:"audio-back-first",audioLayout:"audio-layout",audioButtonContainer:"audio-button-container",audioBottom:"audio-bottom",audioProgressCtrl:"audio-progress-ctrl",audioProgressContainer:"audio-progress-container",audioProgress:"audio-progress",audioImageContainer:"audio-image-container",audioImage:"audio-image",audioHeader:"audio-header",audioTitleContainer:"audio-title-container",audioTitleText:"audio-title-text",audioProgressText:"audio-progress-text",audioPlaylistShow:"audio-playlist-show",audioPlaylistContainer:"audio-playlist-container",audioPlaylistContainerHide:"audio-playlist-container-hide",audioPlaylistItem:"audio-playlist-item",audioPlaylistEvenItem:"audio-playlist-even-item",audioItemIndex:"audio-item-index",audioItemName:"audio-item-name",audioItemAuthor:"audio-item-author",audioItemFocus:"audio-item-name-focus",audioListButtonContainer:"audio-list-button-container",audioListButtonStyle:"audio-list-button-style",audioVolumeIconFirst:"audio-volume-icon-first",audioVolumeIcon:"audio-volume-icon",audioVolumeView:"audio-volume-view",audioVolumeProgress:"audio-volume-progress",audioVolumeBar:"audio-volume-bar",audioVolumeIconContainer:"audio-volume-icon-container",audioVolumeContainer:"audio-volume-container",audioLyricButtonContainer:"audio-lyric-button-container",audioLyricsContainer:"audio-lyrics-container",audioLyricItem:"audio-lyric-item",audioLyricRoot:"audio-lyrics-root",audioLyricShow:"audio-lyric-show",audioShadowTop:"audio-shadow-top",audioShadowBottom:"audio-shadow-bottom",audioLyricItemFocus:"audio-lyric-item-focus",audioNoLyricTip:"audio-no-lyric-tip",audioEffectContainer:"effect-container",audioPlaylistRoot:"audio-playlist-root",audioSettingButtonContainer:"audio-setting-button-container",audioSettingButtonOuter:"audio-setting-button-outer",audioSettingButtonInner:"audio-setting-button-inner",audioSettingsContainer:"audio-settings-container",audioSwitchStyle:"audio-bui-switch",audioAddSongRoot:"audio-add-song-root",audioAddSongContainer:"audio-add-song-container",audioAddSongClose:"audio-add-song-container-close",audioAddSongInput:"audio-add-song-input",audioMainColor:"audio-main-color"}}),this.register(ft.createSkin("red")),this.register(ft.createSkin("green")),this.register(ft.createSkin("purple")),this.register(ft.createSkin("brown")),this.register(ft.createSkin("orange"));var e=ct.getSkin();this.setSkin(e)}var e,n,r;return e=t,r=[{key:"instance",value:function(){return t.sInstance||(t.sInstance=new t),t.sInstance}}],(n=[{key:"getSkin",value:function(){return this.skin||(this.skin=this.skinMap[this.skinName]),this.skin}},{key:"register",value:function(t){console.log("SkinManager.js---register name="+t.name+" style="+t.style),this.skinMap[t.name]=t.style}},{key:"setSkin",value:function(t){ct.setSkin(t);var e=this.skinMap[t];e||(e=this.skinMap.black),this.skin=e}}])&&ht(e.prototype,n),r&&ht(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function vt(){return vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},vt.apply(this,arguments)}function mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}function gt(t,e){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gt(t,e)}function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wt(t);if(e){var o=wt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function wt(t){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wt(t)}function kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,St(r.key),r)}}function Pt(t,e,n){return e&&xt(t.prototype,e),n&&xt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function St(t){var e=function(t,e){if("object"!==pt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===pt(e)?e:String(e)}yt.sInstance=null;var _t,Ct,Ot,Lt={kSpaceEffect:1,kNoEffect:2,kPillarEffect:3},Tt=250,jt=function(){function t(e){kt(this,t),this._resetWidget(e)}return Pt(t,[{key:"_resetWidget",value:function(t){this.widget=t,this.analyser=t.analyser,this.audio=t.audio,this.width=t.width,this.height=t.height}},{key:"render",value:function(){}}],[{key:"getRenderer",value:function(e,n){var r=t.effectRendererMap[e];return r?r._resetWidget(n):(r=t._createRenderer(e,n),t.effectRendererMap[e]=r),r}},{key:"_createRenderer",value:function(t,e){switch(t){case Lt.kPillarEffect:return new Ft(e);case Lt.kSpaceEffect:return new Nt(e);case Lt.kNoEffect:return new At(e)}return null}}]),t}();_t=jt,Ot={},(Ct=St(Ct="effectRendererMap"))in _t?Object.defineProperty(_t,Ct,{value:Ot,enumerable:!0,configurable:!0,writable:!0}):_t[Ct]=Ot;var Et=2*Math.PI,It=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.45;t.r<e&&(t.r=e),t.g<e&&(t.g=e),t.b<e&&(t.b=e)},Nt=function(t){mt(n,t);var e=bt(n);function n(t){var r;return kt(this,n),(r=e.call(this,t))._initResource(),r}return Pt(n,[{key:"render",value:function(){this._renderEffect(),this.context&&this.context.putImageData(this.imageData,0,0)}},{key:"_resetWidget",value:function(t){vt(wt(n.prototype),"_resetWidget",this).call(this,t),this.context=t.canvasWidget.context,this.imageData=t.imageData,this.analyser&&(this.analyser.fftSize=8192)}},{key:"_setPixel",value:function(t,e,n,r,o,i){var a=4*(t+e*this.imageData.width),u=this.imageData.data;u[a]=n,u[a+1]=r,u[a+2]=o,u[a+3]=i}},{key:"_initResource",value:function(){var t={};t.r=Math.random()*Et,t.g=Math.random()*Et,t.b=Math.random()*Et;var e={};e.r=Math.random()*Et,e.g=Math.random()*Et,e.b=Math.random()*Et,this.color=t,this.mixColor=e,this.time=0,this.colorInvertValue=0,this._addCircles()}},{key:"_renderEffect",value:function(){var t=!1;this.analyser&&(t=!0);var e=null;t&&(e=new Uint8Array(this.analyser.frequencyBinCount),this.analyser.getByteFrequencyData(e));var n,r=(n=this.color,{r:1*Math.sin(n.r+=.04)+1,g:1*Math.sin(n.g+=.028)+1,b:1*Math.sin(n.b+=.052)+1}),o=function(t){return{r:1*Math.sin(t.r+=.01)+1,g:1*Math.sin(t.g+=.007)+1,b:1*Math.sin(t.b+=.013)+1}}(this.mixColor);It(r,.45),It(o,.25);for(var i=!1,a=this.circleHolder,u=0,c=a.length;u<c;u++){var l=a[u];l.color.r=r.r-(l.z+Tt)/Tt,l.color.g=r.g-(l.z+Tt)/Tt,l.color.b=r.b-(l.z+Tt)/Tt,l.color.r<o.r&&(l.color.r=o.r),l.color.g<o.g&&(l.color.g=o.g),l.color.b<o.b&&(l.color.b=o.b);var s=void 0;u>0&&(s=a[u-1]),l.mp.x+=25e-5*(this.width/2-l.mp.x),l.mp.y+=25e-5*(this.height/2-l.mp.y),l.center.x=(this.width/2-l.mp.x)*((l.z-Tt)/500)+this.width/2,l.center.y=(this.height/2-l.mp.y)*((l.z-Tt)/500)+this.height/2;for(var f=0,d=l.segmentsOutside.length;f<d;f++){var h=l.segmentsOutside[f];if(!0===h.active){var y=Tt/(Tt+l.z),p=void 0;u>0&&(p=Tt/(Tt+s.z));var v=void 0,m=void 0;h.x2d=h.x*y+l.center.x,h.y2d=h.y*y+l.center.y,t&&(m=(v=e[h.audioBufferIndex])/20,h.radiusAudio=h.radius-m);var g=0;if(f>0&&(t&&!1===this.audio.paused?(g=Math.round(u/c*(55+v)))>255&&(g=255):g=Math.round(u/c*200)),u>0&&u<c-1){var b=h.subs[0],w=b.index*(Et/h.segments)+this.time;b.x2d=b.x*y+l.center.x,b.y2d=b.y*y+l.center.y,b.x=l.circleCenter.x+Math.cos(w)*h.radiusAudio,b.y=l.circleCenter.y+Math.sin(w)*h.radiusAudio;var k=h.subs[1],x=k.index*(Et/h.segments)+this.time;k.x2d=k.x*p+s.center.x,k.y2d=k.y*p+s.center.y,k.x=l.circleCenter.x+Math.cos(x)*h.radiusAudio,k.y=l.circleCenter.y+Math.sin(x)*h.radiusAudio;var P=h.subs[2],S=P.index*(Et/h.segments)+this.time;P.x2d=P.x*p+s.center.x,P.y2d=P.y*p+s.center.y,P.x=l.circleCenter.x+Math.cos(S)*h.radiusAudio,P.y=l.circleCenter.y+Math.sin(S)*h.radiusAudio;var _=h.subs[3],C=_.index*(Et/h.segments)+this.time;_.x2d=_.x*y+l.center.x,_.y2d=_.y*y+l.center.y,_.x=l.circleCenter.x+Math.cos(C)*h.radius,_.y=l.circleCenter.y+Math.sin(C)*h.radius;var O=h.subs[4],L=O.index*(Et/h.segments)+this.time;O.x2d=O.x*y+l.center.x,O.y2d=O.y*y+l.center.y,O.x=l.circleCenter.x+Math.cos(L)*h.radius,O.y=l.circleCenter.y+Math.sin(L)*h.radius;var T=h.subs[5],j=T.index*(Et/h.segments)+this.time;T.x2d=T.x*p+s.center.x,T.y2d=T.y*p+s.center.y,T.x=l.circleCenter.x+Math.cos(j)*h.radius,T.y=l.circleCenter.y+Math.sin(j)*h.radius;var E=h.subs[6],I=E.index*(Et/h.segments)+this.time;E.x2d=E.x*p+s.center.x,E.y2d=E.y*p+s.center.y,E.x=l.circleCenter.x+Math.cos(I)*h.radius,E.y=l.circleCenter.y+Math.sin(I)*h.radius;var N=void 0,F=void 0,A=void 0,R=void 0,M=h.subs[3],B=h.subs[4],D=h.subs[6],W=h.subs[5];m>0&&(N=h,F=h.subs[1],A=h.subs[2],R=h.subs[0]);var V=Math.round(l.color.r*g),U=Math.round(l.color.g*g),G=Math.round(l.color.b*g);m>0&&(this._drawLine(0|N.x2d,0|N.y2d,0|F.x2d,0|F.y2d,V,U,G,255),this._drawLine(0|F.x2d,0|F.y2d,0|A.x2d,0|A.y2d,V,U,G,255),this._drawLine(0|A.x2d,0|A.y2d,0|R.x2d,0|R.y2d,V,U,G,255),this._drawLine(0|R.x2d,0|R.y2d,0|N.x2d,0|N.y2d,V,U,G,255),this._drawLine(0|M.x2d,0|M.y2d,0|N.x2d,0|N.y2d,V,U,G,255),this._drawLine(0|B.x2d,0|B.y2d,0|R.x2d,0|R.y2d,V,U,G,255),this._drawLine(0|D.x2d,0|D.y2d,0|A.x2d,0|A.y2d,V,U,G,255),this._drawLine(0|W.x2d,0|W.y2d,0|F.x2d,0|F.y2d,V,U,G,255)),l.z<125&&(this._drawLine(0|M.x2d,0|M.y2d,0|B.x2d,0|B.y2d,V,U,G,255),this._drawLine(0|B.x2d,0|B.y2d,0|D.x2d,0|D.y2d,V,U,G,255),this._drawLine(0|D.x2d,0|D.y2d,0|W.x2d,0|W.y2d,V,U,G,255),this._drawLine(0|W.x2d,0|W.y2d,0|M.x2d,0|M.y2d,V,U,G,255))}var H=h.index*(Et/h.segments)+this.time;h.x=l.circleCenter.x+Math.cos(H)*h.radiusAudio,h.y=l.circleCenter.y+Math.sin(H)*h.radiusAudio}}l.z-=.75,l.z<-250&&(l.z+=500,i=!0)}i&&(a=a.sort((function(t,e){return e.z-t.z}))),this.time+=.005,this.colorInvertValue>0?this.colorInvertValue-=5:this.colorInvertValue=0,this.colorInvertValue>0&&this._dataInvert(this.colorInvertValue)}},{key:"_drawLine",value:function(t,e,n,r,o,i,a,u){for(var c=Math.abs(n-t),l=Math.abs(r-e),s=t<n?1:-1,f=e<r?1:-1,d=c-l,h=t,y=e;h>0&&h<this.width&&y>0&&y<this.height&&this._setPixel(h,y,o,i,a,u),h!==n||y!==r;){var p=2*d;p>-c&&(d-=l,h+=s),p<l&&(d+=c,y+=f)}}},{key:"_drawCircle",value:function(t,e,n){for(var r,o=[],i=0;i<=n;i++){var a=e;0===i&&(r=a),i===n&&(a=r);var u=t.x,c=t.y,l=this._getCirclePosition(u,c,a,i,n);o.push({x:l.x,y:l.y,index:i+0,radius:a,segments:n})}return o}},{key:"_getCirclePosition",value:function(t,e,n,r,o){var i=r*(Et/o)+this.time;return{x:t+Math.cos(i)*n,y:e+Math.sin(i)*n}}},{key:"_addCircles",value:function(){for(var t=[],e=8,n={x:0,y:0},r={x:0,y:0},o=1,i=0,a={x:Math.random()*this.width,y:Math.random()*this.height},u=-250;u<Tt;u+=5){var c=this._drawCircle(n,16,64),l={segmentsOutside:[],segmentsInside:[],segmentsInside2:[],segmentsCount:0};l.index=i,l.z=u,l.center=r,l.circleCenter={x:0,y:0},l.mp={x:a.x,y:a.y},l.radius=c[0].radius,l.color={r:0,g:0,b:0},o=i%2,i++,e=Math.floor(1024*Math.random())+8;for(var s=void 0,f=0,d=c.length;f<d;f++){var h=c[f];if(f%2===o){(s=this._addCircleSegment(h.x,h.y,u,e)).active=!0,s.index=h.index,s.radius=h.radius,s.radiusAudio=s.radius,s.segments=h.segments,s.coordinates=[];var y;y=f>0?c[f-1]:c[d-1];var p=this._addCircleSegment(y.x,y.y,u,e),v=this._addCircleSegment(h.x,h.y,u-5,e),m=this._addCircleSegment(y.x,y.y,u-5,e),g=this._addCircleSegment(h.x,h.y,u,e),b=this._addCircleSegment(y.x,y.y,u,e),w=this._addCircleSegment(h.x,h.y,u-5,e),k=this._addCircleSegment(y.x,y.y,u-5,e);p.index=y.index,v.index=h.index,m.index=y.index,g.index=h.index,b.index=y.index,w.index=h.index,k.index=y.index,s.subs=[],s.subs.push(p,v,m,g,b,w,k),e=f<d-1?Math.floor(1024*Math.random())+8:l.segmentsOutside[0].audioBufferIndex,l.segmentsOutside.push(s)}else l.segmentsOutside.push({active:!1})}t.push(l)}this.circleHolder=t}},{key:"_addCircleSegment",value:function(t,e,n,r){var o={};return o.x=t,o.y=e,o.x2d=0,o.y2d=0,o.audioBufferIndex=r,o}}]),n}(jt),Ft=function(t){mt(n,t);var e=bt(n);function n(t){return kt(this,n),e.call(this,t)}return Pt(n,[{key:"_resetWidget",value:function(t){vt(wt(n.prototype),"_resetWidget",this).call(this,t),this.analyser&&(this.analyser.fftSize=128),this.context=t.canvasWidget.context,this.leftOffset=0}},{key:"render",value:function(){this.analyser&&this.audio&&!1===this.audio.paused?this._renderEffect():this._renderDefault()}},{key:"_renderEffect",value:function(){var t=new Uint8Array(this.analyser.frequencyBinCount);if(this.analyser.getByteFrequencyData(t),t&&0!=t.length)if(0!=t[0]){this.leftOffset=0;var e=this.context;e.fillStyle="#000",e.fillRect(0,0,this.width,this.height);for(var n=this.analyser.frequencyBinCount,r=this.width/n,o=0,i=0;i<n;i++){var a=t[i]/255,u=i/n,c=this.height*a,l=128*a,s=243*u;e.fillStyle="rgb(".concat(l,",").concat(s,",").concat(240,")"),e.fillRect(o,this.height-c,r,c),o+=r+1}}else this._renderDefault()}},{key:"_renderDefault",value:function(){var t=.4*this.height,e=this.width/60,n=this.leftOffset,r=this.context;r.fillStyle="#000",r.fillRect(0,0,this.width,this.height);for(var o=0;o<0+this.width;o+=e+1){var i=Math.sin(.014*(o+0)+n),a=240*i,u=153*i;r.fillStyle="rgb(".concat(a,",").concat(u,",").concat(255,")");var c=t+i*this.height*.4;r.fillRect(o,this.height-c,e,c)}this.leftOffset+=.01}}]),n}(jt),At=function(t){mt(n,t);var e=bt(n);function n(t){return kt(this,n),e.call(this,t)}return Pt(n,[{key:"_resetWidget",value:function(t){vt(wt(n.prototype),"_resetWidget",this).call(this,t),this.context=t.canvasWidget.context}},{key:"render",value:function(){var t=this.context;t.fillStyle="#00000033",t.fillRect(0,0,this.width,this.height)}}]),n}(jt);function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ut(r.key),r)}}function Bt(){return Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Bt.apply(this,arguments)}function Dt(t,e){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dt(t,e)}function Wt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vt(t){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(t)}function Ut(t){var e=function(t,e){if("object"!==Rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Rt(e)?e:String(e)}var Gt=Lt,Ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vt(r);if(o){var n=Vt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wt(t)}(this,t)});function a(t){var e,n=t.volume,r=void 0===n?1:n,o=t.type,u=void 0===o?Lt.kPillarEffect:o,c=t.oncanplay,l=t.onplay,s=t.onended,f=t.onprogress,d=t.ontimeupdate,h=t.styleName,y=t.onready;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e,n){(e=Ut(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Wt(e=i.call(this,{styleName:h,onready:y})),"_animateEffect",(function(){e.renderer?(e._clearImageData(),e.renderer.render(),window.requestAnimationFrame(e._animateEffect)):e.initProps.effectRendering=!1})),e.oncanplay=c,e.onplay=l,e.onended=s,e.onprogress=f,e.ontimeupdate=d,e.type=u,e.effectPause=!1,e.volume=r,e}return e=a,(n=[{key:"initWidget",value:function(){this.initProps={effectRendering:!1}}},{key:"disposeWidget",value:function(){Bt(Vt(a.prototype),"disposeWidget",this).call(this),this.renderer=null,this.pause(),this.audio=null}},{key:"_createAudio",value:function(){var t=new Audio;t.preload=!0,t.loop=!1,t.autoplay=!0,t.volume=this.volume,t.oncanplay=function(){console.log("on audio prepared duration="+t.duration)},t.onplay=this.onplay,t.onended=this.onended,t.onprogress=this.onprogress,t.ontimeupdate=this.ontimeupdate,t.onerror=t.onended,this.audio=t}},{key:"setType",value:function(t){this.type=t,this.renderer=jt.getRenderer(this.type,this)}},{key:"seekTo",value:function(t){this.audio&&(this.audio.currentTime=t*this.audio.duration)}},{key:"currentTime",value:function(){return this.audio&&this.audio.currentTime}},{key:"duration",value:function(){return this.audio&&this.audio.duration}},{key:"hasUrl",value:function(){return this.audio&&this.audio.src}},{key:"setPlayUrl",value:function(t){this.pause(),this.renderer=null,this._createAudio(),this.audio.src=t,0!==t.indexOf("http")&&this.createAudioAnalyser()}},{key:"play",value:function(){var t=this;this.audio&&s.asyncTask({macroTask:function(){t.renderer||(t.renderer=jt.getRenderer(t.type,t)),t.initProps.effectRendering||(t.initProps.effectRendering=!0,t._animateEffect()),t.audio.play()}})}},{key:"pause",value:function(){this.audio&&this.audio.pause()}},{key:"setVolume",value:function(t){this.volume=t,this.audio&&(this.audio.volume=t)}},{key:"createAudioAnalyser",value:function(){var t=new d,e=t.createAnalyser();e.connect(t.destination),e.smoothingTimeConstant=.65,this.analyserBufferLength=e.frequencyBinCount;var n=t.createMediaElementSource(this.audio);n.connect(e),this.analyser=e,this.audioContext=t,this.audioSource=n}},{key:"build",value:function(){var t=this;return new j({styleName:this.styleName,children:[new W({onready:function(e){t.canvasWidget=e}})],onready:function(e){t.canvasWidget&&s.asyncTask({macroTask:function(){t.width=e.offsetWidth(),t.height=e.offsetHeight(),t.canvasWidget.setCanvasSize(t.width,t.height),t.imageData=t.canvasWidget.imageData()}})}})}},{key:"_clearImageData",value:function(){for(var t=this.imageData.data,e=0;e<t.length;e+=4)t[e]=0,t[e+1]=0,t[e+2]=0,t[e+3]=255}}])&&Mt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(T);function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function Yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xt(r.key),r)}}function Xt(t){var e=function(t,e){if("object"!==zt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===zt(e)?e:String(e)}function qt(t,e){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qt(t,e)}function Jt(t){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jt(t)}var $t={titleContainer:{maxWidth:"100%",display:"inline-block",verticalAlign:"top",overflow:"hidden",whiteSpace:"nowrap"},titleContent:function(t){return{animation:"audio-playlist-title-scroll linear ".concat(t,"s alternate infinite"),float:"left"}}},Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Jt(r);if(o){var n=Jt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e,n=t.text,r=t.focus,o=void 0!==r&&r,u=t.onready;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,{onready:u})).text=n,e.focus=o,e}return e=a,(n=[{key:"setFocus",value:function(t){this.focus=t,this.setState({})}},{key:"_buildFocusWidget",value:function(){var t=s.measureText(this.text,"1rem normal sans-serif");return new j({style:$t.titleContainer,children:[new j({style:$t.titleContent(t/40),children:[new R(this.text)]})]})}},{key:"build",value:function(){var t=yt.instance().getSkin(),e=this.focus?this._buildFocusWidget():new R(this.text);return new j({styleName:this.focus?t.audioItemFocus:t.audioItemName,children:[e]})}}])&&Yt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(T);function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function Zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,te(r.key),r)}}function te(t){var e=function(t,e){if("object"!==Qt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Qt(e)?e:String(e)}function ee(t,e){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ee(t,e)}function ne(t){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ne(t)}var re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ee(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ne(r);if(o){var n=ne(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Qt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e,n=t.styleName,r=void 0===n?"bui-switch":n,o=t.theme,u=t.id,c=t.checked,l=void 0!==c&&c,s=t.onSwitchChecked;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,{styleName:r,id:u})).theme=o,e.onSwitchChecked=s,e.checked=l,e}return e=a,(n=[{key:"build",value:function(){var t=this;return new j({styleName:this.styleName,children:[new A({id:this.id,checked:this.checked,onClick:function(){t.checkbox&&t.onSwitchChecked&&t.onSwitchChecked(t.checkbox.isChecked())},onready:function(e){t.checkbox=e}}),new B({forId:this.id,styleName:this.theme})]})}}])&&Zt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ce(r.key),r)}}function ue(t,e,n){return e&&ae(t.prototype,e),n&&ae(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ce(t){var e=function(t,e){if("object"!==oe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===oe(e)?e:String(e)}function le(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}function se(t,e){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},se(t,e)}function fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=de(t);if(e){var o=de(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function de(t){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},de(t)}var he=function(t){le(n,t);var e=fe(n);function n(t){var r,o=t.onClose;return ie(this,n),(r=e.call(this,{})).onClose=o,r}return ue(n,[{key:"build",value:function(){var t=this;return new D({onTap:function(){t.onClose&&t.onClose()},child:new j({styleName:"sys-close-container",children:[new R("")]})})}}]),n}(L),ye=function(t){le(n,t);var e=fe(n);function n(t){var r,o=t.onOpen;return ie(this,n),(r=e.call(this,{})).onOpen=o,r}return ue(n,[{key:"build",value:function(){var t=this;return new D({onTap:function(){t.onOpen&&t.onOpen()},child:new j({styleName:"sys-close-container",children:[new R("")]})})}}]),n}(L);function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}function ve(){ve=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),u=new _(o||[]);return r(a,"_invoke",{value:k(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function h(){}function y(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,i)&&(p=m);var g=y.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var c=s(t[r],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==pe(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=y,r(g,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function me(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ge(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){me(i,r,o,a,u,"next",t)}function u(t){me(i,r,o,a,u,"throw",t)}a(void 0)}))}}function be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xe(r.key),r)}}function ke(t,e,n){return e&&we(t.prototype,e),n&&we(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xe(t){var e=function(t,e){if("object"!==pe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===pe(e)?e:String(e)}function Pe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}function _e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oe(t);if(e){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ce(t)}(this,n)}}function Ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oe(t){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oe(t)}var Le="close_add_song",Te="play_list_refresh",je="change_skin_refresh",Ee=function(t){Pe(n,t);var e=_e(n);function n(t){var r,o=t.onClick;return be(this,n),(r=e.call(this,{})).onClick=o,r}return ke(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onClick&&t.onClick()},child:new j({styleName:e.audioSettingButtonContainer,children:[new j({styleName:e.audioSettingButtonInner})]})})}}]),n}(L),Ie="rem",Ne=.7,Fe={title:{color:"#FFFFFF",fontSize:"1.2".concat(Ie),marginBottom:"0.6".concat(Ie)},itemContainer:{width:"100%",borderRadius:"0.4rem",backgroundColor:"rgba(255, 255, 255, 0.1)",paddingLeft:"0.3rem",paddingRight:"0.3rem",paddingTop:"0.3rem",paddingBottom:"0.6rem",color:"rgba(255, 255, 255, ".concat(Ne,")"),fontSize:"1rem",marginTop:"0.3rem"},tuneContainer:{display:"flex",flexDirection:"row",alignItems:"center"},playlistHeaderContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},addPlayItemContainer:{width:"3rem",height:"2rem",textAlign:"center",lineHeight:"2rem",borderRadius:"0.6rem",backgroundColor:"rgba(255, 255, 255, 0.2)",cursor:"pointer"},audioPickerStyle:{position:"absolute",right:"0",top:"0",opacity:"0"},audioPickerContainerStyle:{backgroundColor:"rgba(255, 255, 255, ".concat(Ne,")"),height:"100%",width:"7rem",position:"relative",overflow:"hidden",textAlign:"center",lineHeight:"3".concat(Ie),fontWeight:"900",fontSize:"1.2rem",cursor:"pointer"},songAddInputStyle:{width:"100%",height:"3".concat(Ie),borderRadius:"1.5".concat(Ie),border:"0.3".concat(Ie," solid rgba(255, 255, 255, ").concat(Ne,")"),marginTop:"0.8".concat(Ie),display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"nowrap",alignItems:"center",overflow:"hidden",marginBottom:"0.6".concat(Ie)},songAddItemStyle:{width:"100%",height:"3".concat(Ie),borderRadius:"1.5".concat(Ie),border:"0.3".concat(Ie," solid rgba(255, 255, 255, ").concat(Ne,")"),marginTop:"1".concat(Ie)},songAddHeaderStyle:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",boxSizing:"border-box"},songAddTitleStyle:{color:"rgba(255, 255, 255, ".concat(Ne,")"),fontSize:"1.2".concat(Ie),lineHeight:"100%"},songAddTextFieldStyle:{backgroundColor:"#FFFFFF00",border:"0 solid #FFFFFF00",caretColor:"#FFFFFF",outline:"none",height:"100%",width:"100%",color:"#FFFFFF",fontSize:"1.2rem",paddingLeft:"0.5rem"},playItemContainerStyle:{height:"2".concat(Ie),width:"100%",borderRadius:"1".concat(Ie),backgroundColor:"rgba(255, 255, 255, 0.2)",marginTop:"0.5".concat(Ie),display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",color:"rgba(255, 255, 255, ".concat(Ne,")"),fontSize:"1rem",paddingLeft:"1rem",paddingRight:"1rem",boxSizing:"border-box"},playItemNameContainerStyle:{width:"100%",textAlign:"left",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},settingSkinRadioListContainer:function(t){return{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"999999rem",boxSizing:"border-box",paddingTop:"0.2rem",paddingBottom:"0.2rem",marginTop:"0.2rem",paddingLeft:"0.2rem",paddingRight:"0.2rem"}},settingSkinRadioContainer:{height:"1.8rem",width:"1.8rem",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",cursor:"pointer"},settingSkinRadioBorderStyle:function(t){return{position:"absolute",height:"1.8rem",width:"1.8rem",borderRadius:"50%",border:"0.2".concat(Ie," solid ").concat(t),boxSizing:"border-box"}},settingSkinRadioStyle:function(t){return{height:"1.2rem",width:"1.2rem",borderRadius:"50%",backgroundColor:t}}},Ae=[{color:"#000",skin:"black",backgroundColor:"#00000044"},{color:"rgb(108, 191, 255)",skin:"default",backgroundColor:"rgb(108, 191, 255, 0.2)"},{color:"#B22222",skin:"red",backgroundColor:"#B2222244"},{color:"#008B45",skin:"green",backgroundColor:"#008B4544"},{color:"#5D478B",skin:"purple",backgroundColor:"#5D478B44"},{color:"#8B2323",skin:"brown",backgroundColor:"#8B232344"},{color:"#CD3700",skin:"orange",backgroundColor:"#CD370044"}],Re=function(t){Pe(n,t);var e=_e(n);function n(t){var r,o=t.show,i=void 0!==o&&o,a=t.onAddSong,u=t.onready;return be(this,n),(r=e.call(this,{onready:u})).show=i,r.onAddSong=a,r}return ke(n,[{key:"showSettings",value:function(t){var e=this;if(this.show=t,t)this.setStateAsync({});else if(this.initProps.rootContainer){var n=yt.instance().getSkin();this.initProps.rootContainer.setStyleName("".concat(n.audioLyricRoot," audio-left-hide")),s.asyncTask({macroTask:function(){e.setStateAsync({})},duration:510})}}},{key:"initWidget",value:function(){this.initProps={origin:this}}},{key:"build",value:function(){var t=this;if(!this.show)return new j({onready:function(e){t.initProps.rootContainer=e}});var e=yt.instance().getSkin();return new j({styleName:"".concat(e.audioLyricRoot," audio-left-show"),onready:function(e){t.initProps.rootContainer=e},children:[this._buildSettingsContainer(e),new j({styleName:e.audioShadowTop}),new j({styleName:e.audioShadowBottom})]})}},{key:"_buildSettingsContainer",value:function(t){return new j({onready:function(t){},styleName:t.audioSettingsContainer,children:[this._buildSettingTitle(),this._buildSwitchItem({id:"tuneCirculation",title:"Tune circulation",skin:t,checked:ct.isTuneCirculation(),onSwitchChecked:function(t){ct.setTuneCirculation(t)}}),this._buildSwitchItem({id:"clearData",title:"Clear data",skin:t,onSwitchChecked:function(t){ct.clear(),U.sendEvent(Te)}}),this._buildSkinItem(),this._buildLocalPlaylist()]})}},{key:"_buildSettingTitle",value:function(){return new j({style:Fe.title,children:[new R("Player Setting")]})}},{key:"_buildSwitchItem",value:function(t){var e=t.id,n=t.title,r=t.skin,o=t.checked,i=void 0!==o&&o,a=t.onSwitchChecked,u=s.extend({objs:[Fe.itemContainer,Fe.playlistHeaderContainer]});return new j({style:u,children:[new j({children:[new R(n)]}),new re({id:e,styleName:r.audioSwitchStyle,theme:"audio-bui-theme-blue",checked:i,onSwitchChecked:a})]})}},{key:"_buildLocalPlaylistItem",value:function(t){return new j({style:Fe.playItemContainerStyle,children:[new j({style:Fe.playItemNameContainerStyle,children:[new R("L".concat(t.playId,". ").concat(t.name))]}),new he({onClose:(e=ge(ve().mark((function e(){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.deletePlayItem(t.playId);case 2:U.sendEvent(Te);case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})]});var e}},{key:"_buildLocalPlaylistHeader",value:function(){var t=this;return new j({style:Fe.playlistHeaderContainer,children:[new R("My playlist"),new D({onTap:function(){t.onAddSong&&t.onAddSong()},child:new j({style:Fe.addPlayItemContainer,children:[new R("")]})})]})}},{key:"_buildLocalPlaylist",value:function(){var t=this,e=ct.getLocalPlaylist(),n=[];return e.forEach((function(e){n.push(t._buildLocalPlaylistItem(e))})),new j({style:Fe.itemContainer,children:[this._buildLocalPlaylistHeader()].concat(n)})}},{key:"_buildSkinHeader",value:function(){return new j({style:Fe.playlistHeaderContainer,children:[new R("Skin")]})}},{key:"_buildSkinItem",value:function(){return new j({style:Fe.itemContainer,children:[this._buildSkinHeader(),this._buildSkinRadioList()]})}},{key:"_buildSkinRadioList",value:function(){var t=[];return Ae.forEach((function(e){t.push(new Me({info:e}))})),new j({style:Fe.settingSkinRadioListContainer("#008B4544"),children:t})}}]),n}(T),Me=function(t){Pe(n,t);var e=_e(n);function n(t){var r,o=t.info;return be(this,n),(r=e.call(this,{})).info=o,r}return ke(n,[{key:"initWidget",value:function(){this.initProps={}}},{key:"setFocus",value:function(t){this.focus=t,this.setStateAsync({})}},{key:"build",value:function(){var t=this,e=ct.getSkin()==this.info.skin;return new D({onTap:function(){yt.instance().setSkin(t.info.skin),U.sendEvent(je)},child:new j({style:Fe.settingSkinRadioContainer,children:[new j({style:Fe.settingSkinRadioStyle(this.info.color)}),new j({styleName:e?"audio-skin-radio-border-display":"audio-skin-radio-border",style:Fe.settingSkinRadioBorderStyle(this.info.color)})]})})}}]),n}(T),Be=function(t){Pe(n,t);var e=_e(n);function n(t){var r=t.styleName,o=t.id,i=void 0===o?"":o,a=t.name,u=void 0===a?"":a,c=t.value,l=void 0===c?"":c,s=t.style,f=t.onready,d=t.onChange;return be(this,n),e.call(this,{styleName:r,id:i,name:u,value:l,style:s,onready:f,onChange:d})}return ke(n,[{key:"filter",value:function(){return"audio/*"}}]),n}(F),De=function(t){Pe(n,t);var e=_e(n);function n(t){var r,o=t.onready;return be(this,n),function(t,e,n){(e=xe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Ce(r=e.call(this,{onready:o})),"show",(function(t){if(r.showSongAdd!=t)if(r.showSongAdd=t,t)r.playItem={imgUrl:"https://s3n.tmimgcdn.com/navigation-node--image_file-6128f77eb4304.svg",name:"anonymous",author:"anonymous",local:!0},r.setStateAsync({});else{if(r.initProps.container){var e=yt.instance().getSkin();r.initProps.container.setStyleName("".concat(e.audioAddSongContainer," audio-center-hide"))}s.asyncTask({macroTask:function(){r.setStateAsync({})},duration:510})}})),r.showSongAdd=!1,r}return ke(n,[{key:"initWidget",value:function(){U.addEvent(Le,this.show),this.initProps={}}},{key:"disposeWidget",value:function(){U.removeEvent(Le,this.show)}},{key:"build",value:function(){var t=this;if(!this.showSongAdd)return new j({});var e=yt.instance().getSkin();return new j({styleName:e.audioAddSongRoot,children:[new j({onready:function(e){t.initProps.container=e},styleName:"".concat(e.audioAddSongContainer," audio-center-show"),children:[this._buildHeaderItem(),this._buildNormalItem({onChange:function(e){t.playItem.playUrl=e},placeholder:"Add your song url"}),this._buildNormalItem({title:"Add name",value:this.playItem.author,onChange:function(e){t.playItem.name=e}}),this._buildNormalItem({title:"Add author",value:this.playItem.author,onChange:function(e){t.playItem.author=e}}),this._buildSubmitItem({title:"Add image url",value:this.playItem.imgUrl,onChange:function(e){t.playItem.imgUrl=e}})]})]})}},{key:"_buildHeaderItem",value:function(){return new j({style:Fe.songAddHeaderStyle,children:[new j({style:Fe.songAddTitleStyle,children:[new R("Add your song")]}),new he({onClose:function(){U.sendEvent(Le,!1)}})]})}},{key:"_buildLocalSongItem",value:function(t,e,n){var r=yt.instance().getSkin();return new j({style:Fe.songAddInputStyle,children:[new N({style:Fe.songAddTextFieldStyle,onChange:t,onready:n}),new j({style:Fe.audioPickerContainerStyle,styleName:r.audioMainColor,children:[new R("Add"),new Be({style:Fe.audioPickerStyle,onChange:e})]})]})}},{key:"_buildNormalItem",value:function(t){var e=t.title,n=t.value,r=t.placeholder,o=t.onChange,i=t.onready,a=yt.instance().getSkin();return new j(e?{children:[new j({style:Fe.songAddTitleStyle,children:[new R(e)]}),new j({style:Fe.songAddInputStyle,children:[new N({styleName:a.audioAddSongInput,style:Fe.songAddTextFieldStyle,value:n,onChange:o,onready:i,placeholder:r})]})]}:{children:[new j({style:Fe.songAddInputStyle,children:[new N({styleName:a.audioAddSongInput,style:Fe.songAddTextFieldStyle,value:n,onChange:o,onready:i,placeholder:r})]})]})}},{key:"_buildSubmitItem",value:function(t){var e,n=this,r=t.title,o=t.value,i=t.onChange,a=yt.instance().getSkin();return new j({children:[new j({style:Fe.songAddTitleStyle,children:[new R(r)]}),new j({style:Fe.songAddInputStyle,children:[new N({style:Fe.songAddTextFieldStyle,value:o,onChange:i}),new D({onTap:(e=ge(ve().mark((function t(){var e,r;return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.playItem.author){t.next=3;break}return l.show({msg:"author cannot be empty"}),t.abrupt("return");case 3:if(n.playItem.name){t.next=6;break}return l.show({msg:"name cannot be empty"}),t.abrupt("return");case 6:if(n.playItem.imgUrl){t.next=9;break}return l.show({msg:"image url cannot be empty"}),t.abrupt("return");case 9:if(n.playItem.playUrl){t.next=12;break}return l.show({msg:"play url cannot be empty"}),t.abrupt("return");case 12:return t.next=14,ct.getLocalPlaylist();case 14:e=t.sent,n.playItem.playId=e.length>0?e[e.length-1].playId+1:1,(r=ct.getLocalPlaylist()).push(n.playItem),ct.setLocalPlaylist(r),U.sendEvent(Le,!1),U.sendEvent(Te);case 21:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)}),child:new j({style:Fe.audioPickerContainerStyle,styleName:a.audioMainColor,children:[new R("Submit")]})})]})]})}}]),n}(T);function We(t){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ue(r.key),r)}}function Ue(t){var e=function(t,e){if("object"!==We(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===We(e)?e:String(e)}function Ge(t,e){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ge(t,e)}function He(t){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},He(t)}var ze=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ge(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=He(r);if(o){var n=He(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===We(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e,n=t.style,r=t.styleName,o=t.onTap;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,{styleName:r})).onTap=o,e.style=n,e}return e=a,(n=[{key:"build",value:function(){var t=this;return new D({onTap:function(e){t.onTap&&t.onTap(),e.stopPropagation()},child:new j({style:this.style,styleName:this.styleName,children:[new W({onready:function(e){t.canvasWidget=e}})],onready:function(e){s.asyncTask({macroTask:function(){t.canvasWidget&&(t.width=e.offsetWidth(),t.height=e.offsetHeight(),t.canvasWidget.setCanvasSize(t.width,t.height),t._drawWidget&&t._drawWidget(t.canvasWidget.context))}})}})})}}])&&Ve(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$e(r.key),r)}}function Je(t,e,n){return e&&qe(t.prototype,e),n&&qe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $e(t){var e=function(t,e){if("object"!==Ye(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ye(e)?e:String(e)}function Ke(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qe(t,e)}function Qe(t,e){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qe(t,e)}function Ze(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tn(t);if(e){var o=tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function tn(t){return tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tn(t)}var en={width:"2rem",height:"2rem",zIndex:"2"},nn=function(t){Ke(n,t);var e=Ze(n);function n(t){var r,o=t.playItem;return Xe(this,n),(r=e.call(this,{style:en,styleName:"audio-widget-opacity"})).onTap=r._onDownload,r.playItem=o,r}return Je(n,[{key:"_onDownload",value:function(){if(this.playItem&&this.playItem.playUrl){var t,e=this.playItem.playUrl,n=null!==(t=e.substring(e.lastIndexOf(".")))&&void 0!==t?t:"mp3",r=this.playItem.name.replace(/\s+/g,"_")+"_"+this.playItem.author.replace(/\s+/g,"_")+n;J.download({url:e,name:r,"User-Token":"none"})}}},{key:"_drawWidget",value:function(t){var e=this.width/2,n=this.height/4,r=e,o=3*this.height/4;this._drawDownloadIcon(t,e,n,r,o)}},{key:"_drawDownloadIcon",value:function(t,e,n,r,o,i,a,u,c){var l,s,f,d;i=null!==(l=i)&&void 0!==l?l:30,a=null!==(s=a)&&void 0!==s?s:this.height/4,u=null!==(f=u)&&void 0!==f?f:2,c=null!==(d=c)&&void 0!==d?d:"#FFFFFFFF";var h=180*Math.atan2(n-o,e-r)/Math.PI,y=(h+i)*Math.PI/180,p=(h-i)*Math.PI/180,v=a*Math.cos(y),m=a*Math.sin(y),g=a*Math.cos(p),b=a*Math.sin(p);t.save(),t.beginPath();var w=e-v,k=n-m;t.moveTo(w,k),t.moveTo(e,n),t.lineTo(r,o),w=r+v,k=o+m,t.moveTo(w,k),t.lineTo(r,o),w=r+g,k=o+b,t.lineTo(w,k),t.strokeStyle=c,t.lineWidth=u,t.moveTo(this.width/5,o+1),t.lineTo(8*this.width/10,o+1),t.stroke(),t.restore()}}]),n}(ze),rn=function(t){Ke(n,t);var e=Ze(n);function n(t){var r=t.style,o=t.styleName,i=t.onTap;return Xe(this,n),e.call(this,{style:r,styleName:o,onTap:i})}return Je(n,[{key:"_drawWidget",value:function(t){var e=this.width,n=this.height,r=e/4;this._drawRoundRect(0,0,e,n,r,!0,"#FFFAFA",t),this._drawCircle(e,n,t),this._drawTriangle(e,n,t)}},{key:"_drawTriangle",value:function(t,e,n){n.save(),n.beginPath();var r=4*t/10,o=7*e/20;n.moveTo(r,o),n.lineTo(6*t/10,e/2),n.lineTo(r,13*e/20),n.lineTo(r,o),n.closePath(),n.fillStyle="#00BFFF",n.fill(),n.restore()}},{key:"_drawCircle",value:function(t,e,n){n.save(),n.beginPath();var r=3*t/10;n.arc(t/2,e/2,r,0,2*Math.PI,!1),n.closePath(),n.strokeStyle="#00BFFF",n.lineWidth=t/16,n.stroke(),n.restore()}},{key:"_drawRoundRect",value:function(t,e,n,r,o,i,a,u){u.save(),u.beginPath(),u.arc(n-o+t,r-o+e,o,0,Math.PI/2),u.lineTo(o+t,r+e),u.arc(o+t,r-o+e,o,Math.PI/2,Math.PI),u.lineTo(t,o),u.arc(o+t,o+e,o,Math.PI,3*Math.PI/2),u.lineTo(n-o+t,e),u.arc(n-o+t,o+e,o,3*Math.PI/2,2*Math.PI),u.lineTo(n+t,r-o+e),u.closePath(),i?(u.fillStyle=a,u.fill()):(u.strokeStyle=a,u.lineWidth=20),u.restore()}}]),n}(ze),on=function(t){Ke(n,t);var e=Ze(n);function n(t){var r=t.style,o=t.styleName,i=t.onTap;return Xe(this,n),e.call(this,{style:r,styleName:o,onTap:i})}return Je(n,[{key:"_drawWidget",value:function(t){var e=this.width,n=this.height,r=e/4;this._drawRoundRect(0,0,e,n,r,!0,"#FFFAFA",t),this._drawCircle(e,n,t),this._drawText(e,n,t)}},{key:"_drawText",value:function(t,e,n){n.save(),n.font="1.8rem Georgia",n.textAlign="center",n.textBaseline="middle",n.fillStyle="#00BFFF",n.fillText("",t/2,e/2),n.restore()}},{key:"_drawCircle",value:function(t,e,n){n.save(),n.beginPath();var r=3*t/10;n.arc(t/2,e/2,r,0,2*Math.PI,!1),n.closePath(),n.strokeStyle="#00BFFF",n.lineWidth=t/16,n.stroke(),n.restore()}},{key:"_drawRoundRect",value:function(t,e,n,r,o,i,a,u){u.save(),u.beginPath(),u.arc(n-o+t,r-o+e,o,0,Math.PI/2),u.lineTo(o+t,r+e),u.arc(o+t,r-o+e,o,Math.PI/2,Math.PI),u.lineTo(t,o),u.arc(o+t,o+e,o,Math.PI,3*Math.PI/2),u.lineTo(n-o+t,e),u.arc(n-o+t,o+e,o,3*Math.PI/2,2*Math.PI),u.lineTo(n+t,r-o+e),u.closePath(),i?(u.fillStyle=a,u.fill()):(u.strokeStyle=a,u.lineWidth=20),u.restore()}}]),n}(ze),an=function(t){Ke(n,t);var e=Ze(n);function n(t){var r=t.style,o=t.styleName,i=t.onTap;return Xe(this,n),e.call(this,{style:r,styleName:o,onTap:i})}return Je(n,[{key:"_drawWidget",value:function(t){var e=this.width-2,n=this.height-2,r=3*(e-2)/4,o=1*(n-2)/4;t.save(),t.beginPath(),t.moveTo(2,2),t.lineTo(r,2),t.lineTo(e,o),t.lineTo(e,n),t.lineTo(2,n),t.lineTo(2,2),t.moveTo(r,2),t.lineTo(r,o),t.lineTo(e,o),t.moveTo(2,n),t.strokeStyle="#FFFFFFFF",t.lineWidth=2,t.stroke(),t.restore()}}]),n}(ze);function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function cn(){cn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),u=new _(o||[]);return r(a,"_invoke",{value:k(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function h(){}function y(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,i)&&(p=m);var g=y.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var c=s(t[r],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==un(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=y,r(g,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function ln(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function sn(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ln(i,r,o,a,u,"next",t)}function u(t){ln(i,r,o,a,u,"throw",t)}a(void 0)}))}}function fn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kn(r.key),r)}}function hn(t,e,n){return e&&dn(t.prototype,e),n&&dn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yn(){return yn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},yn.apply(this,arguments)}function pn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vn(t,e)}function vn(t,e){return vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vn(t,e)}function mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bn(t);if(e){var o=bn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===un(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gn(t)}(this,n)}}function gn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bn(t){return bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bn(t)}function wn(t,e,n){return(e=kn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kn(t){var e=function(t,e){if("object"!==un(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===un(e)?e:String(e)}var xn="play_item_click",Pn="play_list_loaded",Sn=function(t){pn(r,t);var e,n=mn(r);function r(t){var e,o=t.onClose,i=void 0===o?void 0:o,a=t.onready,u=void 0===a?void 0:a,c=t.playListUrl,l=void 0===c?"":c;return fn(this,r),wn(gn(e=n.call(this,{styleName:"",onready:u})),"_onPlayItemClick",(function(t){e.playIndex=t;var n=e.playList[t];e.image.setImageUrl(n.imgUrl),e.title.setTitle(n.name+"-"+n.author),e.playListView&&e.playListView.resetPlayItem(t),e.audio.setPlayUrl(n.playUrl),e.audio.play(),e.playStatus=!0,e.audioButton&&e.audioButton.setPlayStatus(e.playStatus),e.lyrics&&e.lyrics.showLyrics(e._currentLyricUrl(),!0)})),wn(gn(e),"_playListRefresh",sn(cn().mark((function t(){var n;return cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.playList.clear(),t.next=3,ct.getPlaylist(e.playListUrl);case 3:(n=t.sent).length>0&&e.playList.push.apply(e.playList,n),e.playIndex>e.playList.length-1&&(e.playIndex=e.playList.length-1),e.initProps.origin.setStateAsync({});case 7:case"end":return t.stop()}}),t)})))),wn(gn(e),"_onSkinChangeRefresh",(function(){e.initProps.origin.setStateAsync({})})),wn(gn(e),"_onPlay",(function(t){e.playList&&e.audio&&(e.audio.hasUrl()||!t?(e.playStatus=t,t&&e.audio.hasUrl()?e.audio.play():e.audio.pause()):e._onPlayItemClick(0))})),e.playListUrl=l,e.type=Gt.kSpaceEffect,e.playStatus=!1,e.onClose=i,e.volume=ct.getVolume(),e}return hn(r,[{key:"initWidget",value:function(){this._loadPlaylist(),this.showSettings=!1,this.showSongAdd=!1,this.showPlaylist=!1,this.initProps={origin:this},U.addEvent(xn,this._onPlayItemClick),U.addEvent(Te,this._playListRefresh),U.addEvent(je,this._onSkinChangeRefresh)}},{key:"disposeWidget",value:function(){U.removeEvent(xn,this._onPlayItemClick),U.removeEvent(Te,this._playListRefresh),U.removeEvent(je,this._onSkinChangeRefresh),yn(bn(r.prototype),"disposeWidget",this).call(this)}},{key:"_loadPlaylist",value:(e=sn(cn().mark((function t(){return cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playIndex=0,t.next=3,ct.getPlaylist(this.playListUrl);case 3:this.playList=t.sent,this.playList.length>0&&U.sendEvent(Pn,this.playList);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_currentPlayUrl",value:function(){return this.playList&&0!=this.playList.length?this.playList[this.playIndex].playUrl:""}},{key:"_currentLyricUrl",value:function(){return this.playList&&0!=this.playList.length?this.playList[this.playIndex].lyricUrl:""}},{key:"_nextPlayIndex",value:function(){++this.playIndex>this.playList.length-1&&(this.playIndex=0)}},{key:"_buildEffectAudio",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.type=t.type>=Gt.kPillarEffect?Gt.kSpaceEffect:t.type+1,t.audio&&t.audio.setType(t.type)},child:new Ht({volume:this.volume,type:this.type,styleName:e.audioEffectContainer,oncanplay:function(){},onplay:function(){},onended:function(){console.log("on play completed"),ct.isTuneCirculation()||t._nextPlayIndex(),t._onPlayItemClick(t.playIndex)},onprogress:function(){},ontimeupdate:function(){t.audioProgress&&t.audio.currentTime()&&t.audio.duration()&&t.audioProgress.setProgress(t.audio.currentTime(),t.audio.duration()),t.lyrics&&t.audio&&t.lyrics.setTime(t._currentLyricUrl(),t.audio.currentTime())},onready:function(e){t.audio=e}})})}},{key:"_buildAudio",value:function(){var t=this;return new M({oncanplay:function(){},onplay:function(){},onended:function(){console.log("on play completed"),++t.playIndex>t.playList.length-1&&(t.playIndex=0),t._onPlayItemClick(t.playIndex)},onprogress:function(){},ontimeupdate:function(){t.audioProgress&&t.audio.currentTime()&&t.audio.duration()&&t.audioProgress.setProgress(t.audio.currentTime(),t.audio.duration()),t.lyrics&&t.audio&&t.lyrics.setTime(t._currentLyricUrl(),t.audio.currentTime())},onready:function(e){t.audio=e}})}},{key:"_buildAudioInfo",value:function(t){var e=this;return new j({styleName:t.audioHeader,children:[new _n({onready:function(t){e.image=t}}),new Cn({widget:this._buildEffectAudio(),onready:function(t){e.title=t}}),new On({onready:function(t){e.audioListButton=t},onListButtonClick:function(){e.playListView&&(e.showPlaylist=!e.showPlaylist,e.playListView.show(e.showPlaylist))}}),new An({onLyricsButtonClick:function(){e.audioSettings&&e.showSettings&&(e.showSettings=!1,e.audioSettings.showSettings(e.showSettings)),e.lyrics&&e.lyrics.showLyrics(e._currentLyricUrl())}}),new Ee({onClick:function(){e.lyrics&&e.lyrics.isShow()&&e.lyrics.showLyrics(e._currentLyricUrl()),e.audioSettings&&(e.showSettings=!e.showSettings,e.audioSettings.showSettings(e.showSettings))}})]})}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new j({styleName:this.styleName,children:[new j({styleName:e.audioContainerBlink}),new j({styleName:e.audioPlayer,children:[this._buildAudioInfo(e),this._buildTools(e)]}),new Fn({show:this.showPlaylist,playList:this.playList,playIndex:this.playIndex,onready:function(e){t.playListView=e}}),new Rn({styleName:e.audioLyricsContainer,onready:function(e){t.lyrics=e}}),new Re({show:this.showSettings,onready:function(e){t.audioSettings=e},onAddSong:function(){t.songAddWidget&&t.songAddWidget.show(!0)}}),new De({showSongAdd:this.showSongAdd,onready:function(e){t.songAddWidget=e}}),new j({styleName:"audio-close-container",children:[new he({onClose:function(){t.initProps&&t.initProps.origin.onClose&&t.initProps.origin.onClose()}})]})]})}},{key:"_buildTools",value:function(t){var e=this;return new j({styleName:t.audioBottom,children:[new Ln({onBack:function(){--e.playIndex<0&&(e.playIndex=0),e._onPlayItemClick(e.playIndex)}}),new Tn({status:this.playStatus,onClick:this._onPlay,onready:function(t){e.audioButton=t}}),new jn({onForward:function(){++e.playIndex>e.playList.length-1&&(e.playIndex=0),e._onPlayItemClick(e.playIndex)}}),new En({onready:function(t){e.audioProgress=t},onAudioProgressUpdate:function(t){e.title&&e.title.updateProgressText(t)},onSeek:function(t){e.audio&&e.audio.duration()&&e.audio.seekTo(t)}}),new In({volume:this.volume,onSetVolume:function(t){e.audio&&(console.log("audio.js---onSetVolume()---volume: "+t),e.audio.setVolume(t))}})]})}}]),r}(T),_n=function(t){pn(n,t);var e=mn(n);function n(t){var r=t.onready,o=void 0===r?void 0:r;return fn(this,n),e.call(this,{styleName:"",onready:o})}return hn(n,[{key:"setImageUrl",value:function(t){this.image&&this.image.setImageUrl(t)}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new j({styleName:e.audioImageContainer,children:[new E({styleName:e.audioImage,onready:function(e){t.image=e}})]})}}]),n}(L),Cn=function(t){pn(n,t);var e=mn(n);function n(t){var r,o=t.widget,i=t.onready,a=void 0===i?void 0:i;return fn(this,n),(r=e.call(this,{styleName:"",onready:a})).title="",r.progressText="00:00-00:00",r.widget=o,r}return hn(n,[{key:"setTitle",value:function(t){this.title&&this.title.setText(t)}},{key:"updateProgressText",value:function(t){this.audioProgressText&&this.audioProgressText.setText(t)}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new j({styleName:e.audioTitleContainer,children:[this.widget,new j({styleName:e.audioTitleText,children:[new R(this.title,(function(e){t.title=e}))]}),new j({styleName:e.audioProgressText,children:[new R(this.progressText,(function(e){t.audioProgressText=e}))]})]})}}]),n}(L),On=function(t){pn(n,t);var e=mn(n);function n(t){var r,o=t.onready,i=void 0===o?void 0:o,a=t.onListButtonClick,u=void 0===a?void 0:a;return fn(this,n),(r=e.call(this,{styleName:"",onready:i})).onListButtonClick=u,r}return hn(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onListButtonClick&&t.onListButtonClick()},child:new j({styleName:e.audioListButtonContainer,children:[new j({styleName:e.audioListButtonStyle}),new j({styleName:e.audioListButtonStyle}),new j({styleName:e.audioListButtonStyle})]})})}}]),n}(L),Ln=function(t){pn(n,t);var e=mn(n);function n(t){var r,o=t.onBack,i=void 0===o?void 0:o;return fn(this,n),(r=e.call(this,{styleName:""})).onBack=i,r}return hn(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onBack&&t.onBack()},child:new j({styleName:e.audioButtonContainer,children:[new j({styleName:"".concat(e.audioButton," ").concat(e.audioBackFirst)}),new j({styleName:"".concat(e.audioButton," ").concat(e.audioBack)})]})})}}]),n}(L),Tn=function(t){pn(n,t);var e=mn(n);function n(t){var r,o=t.status,i=void 0!==o&&o,a=t.onClick,u=void 0===a?void 0:a,c=t.onready;return fn(this,n),(r=e.call(this,{styleName:"",onready:c})).onClick=u,r.status=i,r}return hn(n,[{key:"setPlayStatus",value:function(t){var e=yt.instance().getSkin();this.status=t,this.buttonStatus.setStyleName("".concat(e.audioButton," ").concat(e.audioPlayPause))}},{key:"changeStyle",value:function(){var t=yt.instance().getSkin();this.status=!this.status,this.buttonStatus.setStyleName(this.status?"".concat(t.audioButton," ").concat(t.audioPlayPause):"".concat(t.audioButton," ").concat(t.audioPlayButton))}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.changeStyle(),t.onClick(t.status)},child:new j({styleName:"".concat(e.audioButtonContainer," ").concat(e.audioLayout),children:[new j({styleName:this.status?"".concat(e.audioButton," ").concat(e.audioPlayPause):"".concat(e.audioButton," ").concat(e.audioPlayButton),onready:function(e){t.buttonStatus=e}})]})})}}]),n}(L),jn=function(t){pn(n,t);var e=mn(n);function n(t){var r,o=t.onForward,i=void 0===o?void 0:o;return fn(this,n),(r=e.call(this,{styleName:""})).onForward=i,r}return hn(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onForward&&t.onForward()},child:new j({styleName:"".concat(e.audioButtonContainer," ").concat(e.audioLayout),children:[new j({styleName:"".concat(e.audioButton," ").concat(e.audioPlayForwardFirst)}),new j({styleName:"".concat(e.audioButton," ").concat(e.audioPlayForward)})]})})}}]),n}(L),En=function(t){pn(n,t);var e=mn(n);function n(t){var r,o=t.onready,i=void 0===o?void 0:o,a=t.onAudioProgressUpdate,u=void 0===a?void 0:a,c=t.onSeek,l=void 0===c?void 0:c;return fn(this,n),wn(gn(r=e.call(this,{styleName:"",onready:i})),"_onClick",(function(t){var e=r.audioProgressContainer.getBoundingClientRect();console.log("position"+JSON.stringify(e)+" event="+t.clientX),r.setProgress(t.clientX-e.left,e.right-e.left),r.onSeek&&r.onSeek((t.clientX-e.left)/(e.right-e.left))})),r.onAudioProgressUpdate=u,r.onSeek=l,r}return hn(n,[{key:"setProgress",value:function(t,e){var n=this;this.progress&&(this.progress.setWidth((t/e*100).toFixed(2)+"%"),s.asyncTask({macroTask:function(){n.onAudioProgressUpdate&&n.onAudioProgressUpdate(s.timeFormat(t)+"-"+s.timeFormat(e))}}))}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new j({styleName:e.audioProgressCtrl,children:[new D({onTap:this._onClick,child:new j({styleName:e.audioProgressContainer,children:[new j({styleName:e.audioProgress,onready:function(e){t.progress=e}})],onready:function(e){t.audioProgressContainer=e}})})]})}}]),n}(L),In=function(t){pn(n,t);var e=mn(n);function n(t){var r,o=t.volume,i=void 0===o?1:o,a=t.onSetVolume,u=void 0===a?void 0:a;return fn(this,n),wn(gn(r=e.call(this,{styleName:""})),"_onClick",(function(t){if(r.audioVolumeContainer&&r.audioVolumeProgress&&r.audioVolumeBar){var e=r.audioVolumeContainer.getBoundingClientRect();if(e){var n=e.right-e.left,o=t.clientX-e.left;o<0&&(o=0),t.clientX-e.left>n&&(o=n),console.log("position"+JSON.stringify(e)+" event="+t.clientX),r.volume=o/n,r._setVolume()}}})),r.mute=0==i,r.volume=i,r.onSetVolume=u,r}return hn(n,[{key:"initWidget",value:function(){var t=this;s.asyncTask({macroTask:function(){t._setVolume(t.volume)}})}},{key:"_setVolume",value:function(){var t=this.audioVolumeContainer.getBoundingClientRect();if(t){var e=t.right-t.left,n=this.volume,r=n*e;this.audioVolumeProgress.setWidth((100*n).toFixed(2)+"%"),console.log("audioVolumeBar width="+this.audioVolumeBar.offsetWidth());var o=n*this.audioVolumeContainer.offsetWidth(),i=this.audioVolumeBar.offsetWidth();this.audioVolumeBar.setLeft((o-i<0?0:o-i)+"px"),r>0&&(this.mute=!1),this._setMuteStyle(),this.onSetVolume(n),ct.setVolume(n)}}},{key:"_setMute",value:function(){this.audioVolumeProgress.setWidth("0px"),this.audioVolumeBar.setLeft("0px"),this._setMuteStyle(),this.onSetVolume(0)}},{key:"_setMuteStyle",value:function(){this.muteRef&&this.muteRef.setStyleName(this.mute?"audio-volume-mute":"audio-widget-hide")}},{key:"_buildVolumeIcon",value:function(t){var e=this;return new D({onTap:function(){e.mute=!e.mute,e.mute?e._setMute():e._setVolume()},child:new j({styleName:"audio-volume-left-container",children:[new j({styleName:t.audioVolumeIconContainer,children:[new j({styleName:"".concat(t.audioButton," ").concat(t.audioVolumeIconFirst)}),new j({styleName:"".concat(t.audioButton," ").concat(t.audioVolumeIcon)})]}),new j({styleName:this.mute?"audio-volume-mute":"audio-widget-hide",onready:function(t){e.muteRef=t}})]})})}},{key:"_buildVolumeProgress",value:function(t){var e=this;return new D({onTap:this._onClick,child:new j({styleName:t.audioVolumeView,children:[new j({styleName:t.audioVolumeProgress,onready:function(t){e.audioVolumeProgress=t}}),new j({styleName:t.audioVolumeBar,onready:function(t){e.audioVolumeBar=t}})],onready:function(t){e.audioVolumeContainer=t}})})}},{key:"build",value:function(){var t=yt.instance().getSkin();return new j({styleName:t.audioVolumeContainer,children:[this._buildVolumeIcon(t),this._buildVolumeProgress(t)]})}}]),n}(L),Nn=function(t){pn(n,t);var e=mn(n);function n(t){var r,o=t.item,i=t.index,a=t.focus,u=void 0!==a&&a,c=t.onready,l=void 0===c?void 0:c;return fn(this,n),(r=e.call(this,{styleName:"",onready:l})).item=o,r.index=i,r.focus=u,r}return hn(n,[{key:"setItemStatus",value:function(){this.audioPlayItemName&&this.audioPlayItemName.setFocus(!0)}},{key:"resetItemStatus",value:function(){this.audioPlayItemName&&this.audioPlayItemName.setFocus(!1)}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){U.sendEvent(xn,t.index)},child:new j({styleName:this.index%2==0?e.audioPlaylistItem:e.audioPlaylistEvenItem,children:[new j({styleName:e.audioItemIndex,children:[new R("".concat(this.item.local?"L":"").concat(this.item.playId,". "))]}),new Kt({text:this.item.name,focus:this.focus,onready:function(e){t.audioPlayItemName=e}}),new j({styleName:e.audioItemAuthor,children:[new R(this.item.author)]}),new j({styleName:"audio-playlist-item-hover"}),new nn({playItem:this.item})]})})}}]),n}(L),Fn=function(t){pn(r,t);var e,n=mn(r);function r(t){var e,o=t.playIndex,i=void 0===o?0:o,a=t.playList,u=void 0===a?void 0:a,c=t.show,l=void 0!==c&&c,s=t.onready,f=void 0===s?void 0:s;return fn(this,r),wn(gn(e=n.call(this,{styleName:"",onready:f})),"_onPlayListLoaded",(function(t){e.playList=t,e.setStateAsync({},(function(){U.sendEvent(xn,e.focusIndex)}))})),e.focusIndex=i,e.playList=u,e.showPlaylist=l,e}return hn(r,[{key:"initWidget",value:function(){U.addEvent(Pn,this._onPlayListLoaded),this.initProps={origin:this}}},{key:"disposeWidget",value:function(){U.removeEvent(Pn,this._onPlayListLoaded)}},{key:"resetPlayItem",value:function(t){if(this.initProps.audioPlaylistView){var e=this.initProps.audioPlaylistView.children;e[this.focusIndex].resetItemStatus(),this.focusIndex=t,e[this.focusIndex].setItemStatus()}}},{key:"show",value:(e=sn(cn().mark((function t(e){var n;return cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.showPlaylist!=e){t.next=2;break}return t.abrupt("return");case 2:if(this.showPlaylist=e,e){t.next=8;break}return n=yt.instance().getSkin(),this.initProps.audioPlaylistContainer&&this.initProps.audioPlaylistContainer.setStyleName(n.audioPlaylistContainerHide),t.next=8,s.asyncTaskPromise({duration:510});case 8:this.initProps.origin.setStateAsync({});case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isVisible",value:function(){return this.showPlaylist}},{key:"build",value:function(){var t=this;if(!this.showPlaylist)return new D({child:new j({})});var e=[];this.playList&&this.playList.forEach((function(n,r){e.push(new Nn({item:n,index:r,focus:t.focusIndex==r}))}));var n=yt.instance().getSkin();return new j({styleName:"audio-playlist-show ".concat(n.audioPlaylistRoot),children:[new j({styleName:n.audioPlaylistContainer,children:e,onready:function(e){t.initProps.audioPlaylistView=e}}),new j({styleName:n.audioShadowTop}),new j({styleName:n.audioShadowBottom})],onready:function(e){t.initProps.audioPlaylistContainer=e}})}}]),r}(T),An=function(t){pn(n,t);var e=mn(n);function n(t){var r,o=t.onLyricsButtonClick,i=void 0===o?void 0:o;return fn(this,n),(r=e.call(this,{styleName:""})).onLyricsButtonClick=i,r}return hn(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onLyricsButtonClick&&t.onLyricsButtonClick()},child:new j({styleName:e.audioLyricButtonContainer,children:[new R("")]})})}}]),n}(L),Rn=function(t){pn(r,t);var e,n=mn(r);function r(t){var e=t.styleName,o=void 0===e?"":e,i=t.onready,a=void 0===i?void 0:i;return fn(this,r),n.call(this,{styleName:o,onready:a})}return hn(r,[{key:"initWidget",value:function(){this.show=!1,this.lyricsMap={},this.focusIndex=0,this.showBuild=!1,this.initProps={}}},{key:"_parseLyric",value:function(t){var e,n=[],r=null!==(e=t.split("\n"))&&void 0!==e?e:[];if(0==r.length)return n;for(var o=/\[\d{2}:\d{2}.\d{2}\]/g;r.length>0&&!o.test(r[0]);)r=r.slice(1);return 0===r[r.length-1].length&&r.pop(),r.forEach((function(t){var e=t.match(o),r=t.replace(o,"");e.forEach((function(t){var e=t.slice(1,-1).split(":");n.push({time:60*parseInt(e[0],10)+parseFloat(e[1]),lyric:r})}))})),n.sort((function(t,e){return t.time-e.time})),n}},{key:"isShow",value:function(){return this.show}},{key:"showLyrics",value:(e=sn(cn().mark((function t(e){var n,r,o,i=this,a=arguments;return cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length>1&&void 0!==a[1]&&a[1])){t.next=7;break}if(this.show){t.next=4;break}return t.abrupt("return");case 4:this.initProps.reuse=!0,t.next=9;break;case 7:this.initProps.reuse=!1,this.show=!this.show;case 9:if(this.show){t.next=12;break}return this.initProps.rootContainer?(n=yt.instance().getSkin(),this.initProps.rootContainer.setStyleName("".concat(n.audioLyricRoot," audio-left-hide")),s.asyncTask({macroTask:function(){i.setStateAsync({})},duration:510})):this.setStateAsync({}),t.abrupt("return");case 12:if(e){t.next=16;break}return this.lyrics=null,this.setStateAsync({}),t.abrupt("return");case 16:if(r=this.lyricsMap[e]){t.next=22;break}return t.next=20,J.fetchPromise({url:e,headers:wn({},at,"none"),method:J.HttpMethod.get,responseType:"text"});case 20:"ok"==(o=t.sent).status&&(console.log("lyric data = ",o),r=this._parseLyric(o.data),this.lyricsMap[e]=r);case 22:this.lyrics=r,this.setStateAsync({});case 24:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"setTime",value:function(t,e){var n=this.lyricsMap[t];if(n)for(var r=n.length-1;r>=0;r--)if(e>n[r].time){this._setFocus(r);break}}},{key:"_setFocus",value:function(t){this.focusIndex!=t&&(this.focusIndex=t,this.show&&(this.initProps.container&&this.initProps.container.scrollTo(s.remToPx(2.2)*t),this.setStateAsync({})))}},{key:"_buildItemListContainer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=n.length>0;return new j({onready:function(t){e.initProps.container=t},styleName:r?t.audioLyricsContainer:t.audioNoLyricTip,children:r?n:[new R("No Lyric")]})}},{key:"build",value:function(){var t=this;if(!this.show)return new j({onready:function(e){t.initProps.rootContainer=e}});var e=yt.instance().getSkin(),n=[];return this.lyrics&&this.lyrics.length>0&&this.lyrics.forEach((function(r,o){n.push(t._buildLyricItem(r.lyric,o,e))})),new j({styleName:this.initProps.reuse?"".concat(e.audioLyricRoot):"".concat(e.audioLyricRoot," audio-left-show"),onready:function(e){t.initProps.rootContainer=e},children:[this._buildItemListContainer(e,n),new j({styleName:e.audioShadowTop}),new j({styleName:e.audioShadowBottom})]})}},{key:"_buildLyricItem",value:function(t,e,n){return new j({styleName:e==this.focusIndex?n.audioLyricItemFocus:n.audioLyricItem,children:[new R(t)]})}}]),r}(T);function Mn(t){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mn(t)}function Bn(t,e){return Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bn(t,e)}function Dn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wn(t){return Wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wn(t)}function Vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zn(r.key),r)}}function Gn(t,e,n){return e&&Un(t.prototype,e),n&&Un(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hn(t,e,n){return(e=zn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zn(t){var e=function(t,e){if("object"!==Mn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Mn(e)?e:String(e)}var Yn=function(){function t(){var e=this;Vn(this,t),Hn(this,"_onTouchMove",(function(t){e.target&&e.target.onTouchMove&&e.target.onTouchMove(t)})),Hn(this,"_onMouseMove",(function(t){e.target&&e.target.onMouseMove&&e.target.onMouseMove(t)})),window.onmousemove=this._onMouseMove,window.ontouchmove=this._onTouchMove,this.targetPosition=""}return Gn(t,[{key:"setTarget",value:function(t){t instanceof O&&(this.target=t)}},{key:"resetTarget",value:function(){this.target=null}}],[{key:"instance",value:function(){return t.sInstance||(t.sInstance=new t),t.sInstance}}]),t}(),Xn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bn(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Wn(e);if(n){var o=Wn(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return function(t,e){if(e&&("object"===Mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Dn(t)}(this,t)});function o(t){var e,n=t.styleName,i=t.style,a=t.onTap,u=t.onStartMove,c=t.onready,l=t.widget;return Vn(this,o),Hn(Dn(e=r.call(this,{styleName:n,onready:c})),"onMouseMove",(function(t){if(e.playerContainer){e._onMovePrepared(),console.log("playerLeft="+e.playerLeft+" playerTop"+e.playerTop);var n=t.clientX-(e.playerLeft-e.playerOffsetLeft),r=t.clientY-(e.playerTop-e.playerOffsetTop);console.log("index.js---onMouseMove---left: "+n+" top: "+r),e.playerContainer.setLeft(n+"px"),e.playerContainer.setTop(r+"px")}})),Hn(Dn(e),"onTouchMove",(function(t){if(e.playerContainer){e._onMovePrepared(),console.log("playerLeft="+e.playerLeft+" playerTop"+e.playerTop);var n=t.touches[0].clientX-(e.playerLeft-e.playerOffsetLeft),r=t.touches[0].clientY-(e.playerTop-e.playerOffsetTop);console.log("index.js---onMouseMove---left: "+n+" top: "+r),e.playerContainer.setLeft(n+"px"),e.playerContainer.setTop(r+"px")}})),Hn(Dn(e),"_onMouseDown",(function(t){e.moving=!1,0==t.button&&(Yn.instance().setTarget(Dn(e)),e.playerContainer&&(e.playerLeft=t.clientX,e.playerTop=t.clientY,e.playerOffsetLeft=e.playerContainer.offsetLeft(),e.playerOffsetTop=e.playerContainer.offsetTop(),console.log("playerOffsetLeft="+e.playerContainer.offsetLeft()+" playerOffsetLeft"+e.playerContainer.offsetTop()),e.playerContainer.setCursor("move")))})),Hn(Dn(e),"_onMouseUp",(function(t){console.log("index.js---onMouseUp"),Yn.instance().resetTarget(),e.playerContainer&&(e.playerContainer.setCursor("default"),null!=e.targetPosition&&e.playerContainer.setStylePropValue("position",e.targetPosition),e.targetPosition=void 0),!e.moving&&e.onTap&&e.onTap(t),e.moving=!1})),Hn(Dn(e),"_onTouchStart",(function(t){e.moving=!1,Yn.instance().setTarget(Dn(e)),e.playerContainer&&(e.playerLeft=t.touches[0].clientX,e.playerTop=t.touches[0].clientY,e.playerOffsetLeft=e.playerContainer.offsetLeft(),e.playerOffsetTop=e.playerContainer.offsetTop(),console.log("playerOffsetLeft="+e.playerContainer.offsetLeft()+" playerOffsetLeft"+e.playerContainer.offsetTop()),e.playerContainer.setCursor("move"))})),e.widget=l,e.playerLeft=-1,e.playerTop=-1,e.playerOffsetLeft=-1,e.playerOffsetTop=-1,e.style=i,e.onTap=a,e.onStartMove=u,e.targetPosition=void 0,e}return Gn(o,[{key:"_onMovePrepared",value:function(){this.moving||(this.moving=!0,this.onStartMove&&this.onStartMove()),this._setPositionStyle()}},{key:"_setPositionStyle",value:function(){if(null==this.targetPosition){var t,e=this.playerContainer.getComputedStyle("position");"absolute"!=e&&"fixed"!=e&&("absolute"!=(e=null!==(t=this.playerContainer.getStylePropValue("position"))&&void 0!==t?t:"static")&&"fixed"!=e&&this.playerContainer.setStylePropValue("position","absolute"),this.targetPosition=e)}}},{key:"build",value:function(){var t=this;return new D({onTouchStart:this._onTouchStart,onTouchEnd:this._onMouseUp,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,child:new j({styleName:this.styleName,style:this.style,children:[this.widget],onready:function(e){t.playerContainer=e}})})}}]),o}(L),qn="event_sys_close_context_menu",Jn="event_sys_open_context_menu",$n="event_sys_add_new_file",Kn="event_audio_app_open";function Qn(t){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(t)}function Zn(){Zn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),u=new _(o||[]);return r(a,"_invoke",{value:k(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function h(){}function y(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,i)&&(p=m);var g=y.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var c=s(t[r],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Qn(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=y,r(g,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function tr(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ir(r.key),r)}}function nr(t,e){return nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nr(t,e)}function rr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function or(t){return or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},or(t)}function ir(t){var e=function(t,e){if("object"!==Qn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Qn(e)?e:String(e)}var ar={page:{width:"100%",height:"100%",overflow:"hidden",backgroundColor:"#000000CC",boxSizing:"border-box",paddingLeft:"2rem",paddingRight:"2rem",paddingTop:"2rem",position:"absolute"},containerScoll:{width:"100%",height:"80%",overflowX:"hidden",overflowY:"scroll",boxSizing:"border-box",marginTop:"2rem"},container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap"},head:{boxSizing:"border-box",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},headRightSyle:{width:"4rem",display:"flex",flexDirection:"row",justifyContent:"space-between"}},ur={fileIcon:function(t,e){return{position:"absolute",top:"".concat(e,"rem"),left:"".concat(t,"rem")}},iconStyle:{width:"3rem",height:"4em",pointerEvents:"none"},iconNameStyle:{width:"fit-content",color:"#FFFFFF",fontSize:"1.2rem"},iconContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"fit-content"},fileTextFieldNameStyle:{width:"6rem",height:"2rem",fontSize:"1.2rem",outline:"none",backgroundColor:"#FFFFFF33",color:"#FFFFFF",border:"0 solid #FFFFFF00",caretColor:"#FFFFFF"}},cr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nr(t,e)}(c,t);var e,n,r,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=or(i);if(a){var n=or(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Qn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rr(t)}(this,t)});function c(t){var e,n=t.onready;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),function(t,e,n){(e=ir(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(rr(e=u.call(this,{onready:n})),"_onAddNewFile",(function(){e.initProps&&e.initProps.show&&(e.initProps.itemList.push({name:"newfile.bdc",type:"doc",isnew:!0}),e.setStateAsync({}))})),e}return e=c,n=[{key:"initWidget",value:function(){this.initProps={origin:this,show:!1,itemList:[]},U.addEvent($n,this._onAddNewFile)}},{key:"disposeWidget",value:function(){U.removeEvent($n,this._onAddNewFile)}},{key:"showFileUI",value:(r=Zn().mark((function t(e){return Zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initProps.show!=e){t.next=2;break}return t.abrupt("return");case 2:if(this.initProps.show=e,e){t.next=7;break}return this.initProps.page&&this.initProps.page.setStyleName("sys-fileui-hide"),t.next=7,s.asyncTaskPromise({duration:600});case 7:this.setStateAsync({});case 8:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){tr(i,n,o,a,u,"next",t)}function u(t){tr(i,n,o,a,u,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"build",value:function(){var t=this;if(!this.initProps.show)return new D({child:new j({})});var e=[];return this.initProps&&this.initProps.itemList&&this.initProps.itemList.forEach((function(n,r){e.push(t._buildFileItem({item:n,onTap:function(e){n.isnew=!1,t.initProps.origin.setStateAsync({}),e.stopPropagation()}}))})),new j({styleName:"sys-fileui-display",style:ar.page,onready:function(e){t.initProps.page=e},children:[this._buildHeader(),new j({styleName:"sys-fileui-container",style:ar.containerScoll,children:[new j({style:ar.container,children:e})]})]})}},{key:"_buildHeader",value:function(){var t=this;return new j({style:ar.head,children:[new j({}),new j({style:ar.headRightSyle,children:[new ye({onOpen:function(){U.sendEvent(Jn)}}),new he({onClose:function(){t.initProps.origin.showFileUI(!1)}})]})]})}},{key:"_buildFileItem",value:function(t){var e=this,n=t.item,r=t.onTap;return new Xn({styleName:"sys-desktop-app-icon-container",onTap:r,widget:new j({style:ur.iconContainer,children:[new an({style:ur.iconStyle}),new D({onTap:function(t){t.stopPropagation(),n.isnew=!0,e.initProps.origin.setStateAsync({})},onMouseDown:function(t){t.stopPropagation()},onMouseUp:function(t){t.stopPropagation()},onTouchStart:function(t){t.stopPropagation()},onTouchEnd:function(t){t.stopPropagation()},child:new j({style:ur.iconNameStyle,children:[n.isnew?new N({style:ur.fileTextFieldNameStyle,value:n.name,onChange:function(t){n.name=t},onClick:function(t){t.stopPropagation()}}):new R(n.name)]})})]})})}}],n&&er(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(T);function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pr(r.key),r)}}function fr(t,e){return fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fr(t,e)}function dr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hr(t){return hr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hr(t)}function yr(t,e,n){return(e=pr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pr(t){var e=function(t,e){if("object"!==lr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===lr(e)?e:String(e)}var vr={desktop:{width:"100%",height:"100%",position:"absolute",top:"7rem",left:"0"},appIconContainer:function(t){return{position:"absolute",top:"".concat(10*t+2,"rem"),left:"2rem"}},computerContainer:{position:"absolute",top:"2rem",left:"2rem"},desktopIconStyle:{width:"5rem",height:"5rem",objectFit:"contain",pointerEvents:"none"},desktopIconNameStyle:{width:"fit-content",color:"#FFFFFF",fontSize:"1.2rem"},iconContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"fit-content"},audioAppContainer:{position:"absolute",top:"12rem",left:"2rem"},audioAppIconStyle:{width:"5rem",height:"5rem"},videoAppContainer:{position:"absolute",top:"17rem",left:"2rem"}},mr={computerIcon:"".concat(kHostPath,"/img/sys/computer.webp")},gr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=hr(r);if(o){var n=hr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dr(t)}(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),yr(dr(t=i.call(this,{})),"_buildComputer",(function(e,n){return t._buildAppIcon({widget:new E({style:vr.desktopIconStyle,url:mr.computerIcon}),index:n,name:e,onTap:function(){t.initProps.fileUi&&t.initProps.fileUi.showFileUI(!0)}})})),yr(dr(t),"_buildAppIcon",(function(t){var e=t.widget,n=t.name,r=t.index,o=t.onTap;return new Xn({styleName:"sys-desktop-app-icon-container",style:vr.appIconContainer(r),onTap:o,widget:new j({style:vr.iconContainer,children:[e,new j({style:vr.desktopIconNameStyle,children:[new R(n)]})]})})})),yr(dr(t),"_buildAudioAppIcon",(function(e,n){return t._buildAppIcon({widget:new on({style:vr.audioAppIconStyle}),index:n,name:e,onTap:function(){U.sendEvent(Kn)}})})),yr(dr(t),"_buildVideoAppIcon",(function(e,n){return t._buildAppIcon({widget:new rn({style:vr.audioAppIconStyle}),index:n,name:e,onTap:function(){U.sendEvent(Kn)}})})),t}return e=a,(n=[{key:"initWidget",value:function(){this.initProps={apps:[{name:"Computer",creator:this._buildComputer},{name:"Video",creator:this._buildVideoAppIcon},{name:"Audio",creator:this._buildAudioAppIcon}]}}},{key:"build",value:function(){var t=this,e=[];return this.initProps.apps.forEach((function(t,n){e.push(t.creator(t.name,n))})),new j({style:vr.desktop,children:[].concat(e,[new cr({onready:function(e){t.initProps.fileUi=e}})])})}}])&&sr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(T);function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function wr(){wr=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),u=new _(o||[]);return r(a,"_invoke",{value:k(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function h(){}function y(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,i)&&(p=m);var g=y.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var c=s(t[r],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==br(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=y,r(g,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function kr(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pr(r.key),r)}}function Pr(t){var e=function(t,e){if("object"!==br(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===br(e)?e:String(e)}function Sr(t,e){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sr(t,e)}function _r(t){return _r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_r(t)}var Cr={container:{width:"12rem",heigth:"fit-content",backgroundColor:"#FFFFFF",zIndex:"99999",position:"absolute"},menuItemContainer:{width:"100%",height:"3rem",fontSize:"1.2rem",color:"#000000EE",display:"flex",alignItems:"center",paddingLeft:"2rem",boxSizing:"border-box"}},Or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sr(t,e)}(c,t);var e,n,r,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_r(i);if(a){var n=_r(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(t){var e,n=t.show,r=void 0!==n&&n,o=t.styleName,i=t.onready;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=u.call(this,{styleName:o,onready:i})).show=r,e}return e=c,n=[{key:"initWidget",value:function(){this.initProps={}}},{key:"showMenu",value:(r=wr().mark((function t(e,n){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.show=e,this.styleName=n,t.next=4,this.setStateAsync({});case 4:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){kr(i,n,o,a,u,"next",t)}function u(t){kr(i,n,o,a,u,"throw",t)}a(void 0)}))},function(t,e){return o.apply(this,arguments)})},{key:"isShow",value:function(){return this.show}},{key:"setPosition",value:function(t,e){this.initProps.container&&(this.initProps.container.setLeft(t),this.initProps.container.setTop(e))}},{key:"positionContain",value:function(t,e){return!!this.initProps.container&&this.initProps.container.positionContain(t,e)}},{key:"build",value:function(){var t=this;return this.show?new j({onready:function(e){t.initProps.container=e},styleName:this.styleName,style:Cr.container,children:[this._buildRefresh(),this._buildNew()]}):new D({child:new j({onready:function(e){t.initProps.container=e}})})}},{key:"_buildMenuItem",value:function(t){var e=t.widget,n=t.onClick;return new D({onTap:function(){U.sendEvent(qn),n&&n()},child:new j({styleName:"sys-context-menu-item",style:Cr.menuItemContainer,children:[e]})})}},{key:"_buildRefresh",value:function(){return this._buildMenuItem({widget:new R("Refresh")})}},{key:"_buildNew",value:function(){return this._buildMenuItem({widget:new R("New"),onClick:function(){U.sendEvent($n)}})}},{key:"_buildOpen",value:function(){return this._buildMenuItem({widget:new R("Open")})}}],n&&xr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(T);function Lr(t){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lr(t)}function Tr(){Tr=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),u=new _(o||[]);return r(a,"_invoke",{value:k(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function h(){}function y(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,i)&&(p=m);var g=y.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var c=s(t[r],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Lr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=y,r(g,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function jr(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rr(r.key),r)}}function Ir(t,e){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ir(t,e)}function Nr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fr(t){return Fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fr(t)}function Ar(t,e,n){return(e=Rr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rr(t){var e=function(t,e){if("object"!==Lr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Lr(e)?e:String(e)}var Mr={login:{path:"/boyiaweb/index/login",title:"login",page:function(){return new j({styleName:""})}},home:{path:"/boyiaweb/index/home",title:"home",page:function(){return new Br({styleName:""})}}},Br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ir(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Fr(r);if(o){var n=Fr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Nr(t)}(this,t)});function a(t){var e,n=t.styleName,r=void 0===n?"":n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Ar(Nr(e=i.call(this,{styleName:r})),"_onOpenAudioApp",(function(){e.initProps.origin.showAudio||(e.initProps.origin.showAudio=!0,e.initProps.origin.setStateAsync({}))})),Ar(Nr(e),"_onOpenContextMenu",(function(){e.initProps.contextMenu&&e.initProps.contextMenu.showMenu(!0,"sys-position-center")})),Ar(Nr(e),"_onCloseContextMenu",(function(){e.initProps.contextMenu&&e.initProps.contextMenu.showMenu(!1)})),e.showAudio=!0,e}return e=a,n=[{key:"initWidget",value:function(){this.initProps={origin:this},U.addEvent(qn,this._onCloseContextMenu),U.addEvent(Jn,this._onOpenContextMenu),U.addEvent(Kn,this._onOpenAudioApp)}},{key:"disposeWidget",value:function(){U.removeEvent(qn,this._onCloseContextMenu),U.removeEvent(Jn,this._onOpenContextMenu),U.removeEvent(Kn,this._onOpenAudioApp)}},{key:"_buildTitle",value:function(){return new j({styleName:"desktop-title",children:[new R("Boyia work desktop")]})}},{key:"_buildSetting",value:function(){var t=this;return new j({styleName:"setting-panel",children:[this._buildTitle(),new j({styleName:"setting-item",children:[new j({styleName:"setting-title",children:[new R("Desktop system enable")]}),new j({styleName:"switch-container",children:[new re({id:"oneOpen",theme:"bui-theme-blue",onSwitchChecked:function(e){e?yt.instance().setSkin("default"):yt.instance().setSkin("black"),t.audio&&t.audio.setState({})}})]})]})]})}},{key:"build",value:function(){var t,e,n=this;return new D({onContextMenu:function(){return!1},onMouseDown:(t=Tr().mark((function t(e){return Tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(2!=e.button){t.next=7;break}if(!n.initProps.contextMenu){t.next=5;break}return t.next=4,n.initProps.contextMenu.showMenu(!0);case 4:n.initProps.contextMenu.setPosition(e.clientX+"px",e.clientY+"px");case 5:t.next=8;break;case 7:0==e.button&&n.initProps.contextMenu&&n.initProps.contextMenu.isShow()&&!n.initProps.contextMenu.positionContain(e.clientX,e.clientY)&&n.initProps.contextMenu.showMenu(!1);case 8:case"end":return t.stop()}}),t)})),e=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){jr(i,r,o,a,u,"next",t)}function u(t){jr(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){return e.apply(this,arguments)}),child:this._buildUI()})}},{key:"_buildAudio",value:function(){var t=this;return this.showAudio?new Xn({styleName:"index-audio-player",widget:new Sn({onClose:function(){t.initProps.origin.showAudio=!1,t.initProps.origin.setStateAsync({})},onready:function(e){t.audio=e},playListUrl:kPlaylistUrl})}):new j({})}},{key:"_buildUI",value:function(){var t=this;return new j({styleName:"page-main",children:[new gr,this._buildSetting(),this._buildAudio(),new Or({onready:function(e){t.initProps.contextMenu=e}})]})}}],n&&Er(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(T);$(document).ready((function(){V.init(),V.push(Mr.home)}))})();