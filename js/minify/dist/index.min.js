/*! For license information please see index.min.js.LICENSE.txt */
(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(){n=function(){return e};var e={},o=Object.prototype,r=o.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function d(t,e,n,o){var r=e&&e.prototype instanceof y?e:y,a=Object.create(r.prototype),u=new L(o||[]);return i(a,"_invoke",{value:x(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var h={};function y(){}function p(){}function v(){}var m={};s(m,u,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==o&&r.call(b,u)&&(m=b);var w=v.prototype=y.prototype=Object.create(m);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(e,n){function o(i,a,u,c){var l=f(e[i],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==t(d)&&r.call(d,"__await")?n.resolve(d.__await).then((function(t){o("next",t,u,c)}),(function(t){o("throw",t,u,c)})):n.resolve(d).then((function(t){s.value=t,u(s)}),(function(t){return o("throw",t,u,c)}))}c(l.arg)}var a;i(this,"_invoke",{value:function(t,e){function r(){return new n((function(n,r){o(t,e,n,r)}))}return a=a?a.then(r,r):r()}})}function x(t,e,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return{value:void 0,done:!0}}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var u=P(a,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=f(t,e,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function P(t,e){var n=e.method,o=t.iterator[n];if(void 0===o)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,P(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=f(o,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new S(d(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(w),s(w,l,"Generator"),s(w,u,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return a.type="throw",a.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function o(t,e,n,o,r,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(o,r)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var c="canvas",l=function(){function t(){r(this,t)}var e,i;return a(t,null,[{key:"show",value:(e=n().mark((function t(e){var o,r,i,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.msg,r=void 0===o?"":o,(i=document.createElement("div")).innerHTML=r,i.className="boyia-toast",document.body.appendChild(i),a=.5,t.next=8,s.asyncTaskPromise({macroTask:function(){i.style.transition="-webkit-transform "+a+"s ease-in, opacity "+a+"s ease-in",i.style.opacity="0"},duration:1e3});case 8:return t.next=10,s.asyncTaskPromise({macroTask:function(){document.body.removeChild(i)},duration:1e3*a});case 10:case"end":return t.stop()}}),t)})),i=function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(t){o(a,r,i,u,c,"next",t)}function c(t){o(a,r,i,u,c,"throw",t)}u(void 0)}))},function(t){return i.apply(this,arguments)})}]),t}(),s=function(){function t(){r(this,t)}return a(t,null,[{key:"getUrlParams",value:function(){}},{key:"remToPx",value:function(t){return 12*t}},{key:"objToStyle",value:function(t,e){if(e&&e instanceof Object){var n=t.style;for(var o in e)n[o]=e[o]}}},{key:"asyncTask",value:function(t){var e=t.macroTask,n=t.duration,o=void 0===n?0:n,r=t.completed,i=t.fail,a=setTimeout((function(){try{var t=e();window.clearTimeout(a),r&&r(t)}catch(t){console.error("asyncTask error: ",t),i&&i(t)}}),o)}},{key:"asyncTaskPromise",value:function(e){var n=e.macroTask,o=e.duration,r=void 0===o?0:o;return new Promise((function(e,o){t.asyncTask({macroTask:n,duration:r,completed:function(t){e(t)},fail:function(t){o(t)}})}))}},{key:"measureText",value:function(t,e){var n=document.createElement(c).getContext("2d");return n.font=e,n.measureText(t).width}},{key:"extend",value:function(t){for(var e=t.objs,n=void 0===e?[]:e,o={},r=0;r<n.length;r++){var i=n[r];if(i instanceof Object)for(var a in i)o[a]=i[a]}return o}}]),t}();e(s,"timeFormat",(function(t){var e=parseInt(t/60),n=parseInt(t%60);return(e<10?"0"+e:e)+":"+(n<10?"0"+n:n)})),Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},Array.prototype.clear=function(){this.length>0&&this.splice(0,this.length)},String.format=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,(function(t,n){return void 0!==e[n]?e[n]:t}))};var d=function(){function t(){r(this,t)}return a(t,null,[{key:"setData",value:function(e,n){t._storage[e]=n,localStorage.setItem(e,n)}},{key:"getObject",value:function(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null}},{key:"setObject",value:function(t,e){if(e){var n=localStorage.setItem(t,JSON.stringify(e));console.log("result = ".concat(n))}}},{key:"getData",value:function(e){var n=t._storage[e];return n||((n=localStorage.getItem(e))&&(t._storage[e]=n),n)}},{key:"removeData",value:function(e){t._storage[e]&&delete t._storage[e],localStorage.removeItem(e)}}]),t}();e(d,"_storage",{});var f=window.AudioContext||window.webkitAudioContext,h=a((function t(){r(this,t)}));function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function p(t,e,n){return(e=C(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},v.apply(this,arguments)}function m(){m=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:x(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function h(){}function p(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==e&&n.call(b,i)&&(v=b);var w=p.prototype=f.prototype=Object.create(v);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,u){var c=s(t[o],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==y(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(t,e,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return{value:void 0,done:!0}}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var u=P(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=s(t,e,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function P(t,e){var n=e.method,o=t.iterator[n];if(void 0===o)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,P(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=s(o,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,o(w,"constructor",{value:p,configurable:!0}),o(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(S.prototype),c(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new S(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(w),c(w,u,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return a.type="throw",a.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function g(t,e,n,o,r,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(o,r)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=S(t);if(e){var r=S(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,C(o.key),o)}}function _(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===y(e)?e:String(e)}e(h,"USE_STATE",!0),e(h,"USE_STATE_UI_UPDATE",!1);var L=function(){function t(e){var n=e.styleName,o=void 0===n?"":n,r=e.id,i=void 0===r?"":r,a=e.onready,u=void 0===a?void 0:a;x(this,t),this.styleName=o,this.id=i,this.onready=u}return _(t,[{key:"initWidget",value:function(){}},{key:"disposeWidget",value:function(){if(this.isContainer()&&this.children)for(var t=0;t<this.children.length;t++)this.children[t].disposeWidget();else this.isComponent()&&this.child&&this.child.disposeWidget()}},{key:"build",value:function(){return this}},{key:"isContainer",value:function(){return!1}},{key:"render",value:function(){return this.elem=this._render(),this.onready&&this.elem&&this.onready(this),this.elem}},{key:"_render",value:function(){return this.isComponent()?this.build().render():null}},{key:"isComponent",value:function(){return!1}},{key:"isText",value:function(){return!1}},{key:"isImage",value:function(){return!1}},{key:"classType",value:function(){return this.constructor}}]),t}(),T=function(t){b(n,t);var e=k(n);function n(t){var o=t.styleName,r=t.id,i=void 0===r?"":r,a=t.onready,u=void 0===a?void 0:a;return x(this,n),e.call(this,{styleName:o,id:i,onready:u})}return _(n,[{key:"isComponent",value:function(){return!0}},{key:"rebuild",value:function(){return this.child=this.build(),this.child}},{key:"_render",value:function(){return this.child||(this.initWidget(),this.child=this.build()),this.child.render()}}]),n}(L),O=function(t){b(r,t);var e,n,o=k(r);function r(t){var e,n=t.styleName,i=t.onready,a=void 0===i?void 0:i;return x(this,r),(e=o.call(this,{styleName:n,onready:a})).state={},e}return _(r,[{key:"rebuild",value:function(){return this.child=this.build(),this.child}},{key:"isComponent",value:function(){return!0}},{key:"setStateAsync",value:(e=m().mark((function t(e,n){var o=this;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.asyncTaskPromise({macroTask:function(){o.setState(e)}});case 2:n&&n();case 3:case"end":return t.stop()}}),t)})),n=function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(t){g(i,o,r,a,u,"next",t)}function u(t){g(i,o,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return n.apply(this,arguments)})},{key:"setState",value:function(t){if(h.USE_STATE){this.state=t;var e=G.cloneWidget(this);new G(this,e).diff()}else if(h.USE_STATE_UI_UPDATE){var n;this.state=t,console.log("BoyiaStateWidget setState parent = "+(this.node&&this.node.parentNode?this.node.parentNode:null)),this.node&&this.node.parentNode&&(n=this.node.parentNode).removeChild(this.node),G.rebuild(this),this.render(),this.node&&n&&n.appendChild(this.node)}}},{key:"_render",value:function(){return this.child||(this.initWidget(),this.child=this.build()),this.child&&(this.node=this.child.render()),this.node}}]),r}(L),I=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.id,i=void 0===r?"":r,a=t.styleName,u=void 0===a?"":a,c=t.style,l=void 0===c?void 0:c,s=t.children,d=void 0===s?[]:s,f=t.onready,h=void 0===f?void 0:f;if(x(this,n),o=e.call(this,{styleName:u,id:i,onready:h}),!(d instanceof Array))throw new Error("children is not a chilren");return o.children=d,o.style=l,o}return _(n,[{key:"width",value:function(){return this.elem?this.elem.clientWidth:0}},{key:"height",value:function(){return this.elem?this.elem.clientHeight:0}},{key:"setWidth",value:function(t){this.elem&&(this.elem.style.width=t)}},{key:"setStyleName",value:function(t){this.styleName=t,this.elem&&(this.elem.className=t)}},{key:"setStyle",value:function(t){this.style=t,this.elem&&s.objToStyle(this.elem,t)}},{key:"setCursor",value:function(t){this.elem&&(this.elem.style.cursor=t)}},{key:"setTop",value:function(t){this.elem&&(this.elem.style.top=t)}},{key:"setLeft",value:function(t){this.elem&&(this.elem.style.left=t)}},{key:"offsetLeft",value:function(){return this.elem?this.elem.offsetLeft:0}},{key:"offsetTop",value:function(){return this.elem?this.elem.offsetTop:0}},{key:"offsetWidth",value:function(){return this.elem?this.elem.offsetWidth:0}},{key:"offsetHeight",value:function(){return this.elem?this.elem.offsetHeight:0}},{key:"getBoundingClientRect",value:function(){return this.elem?this.elem.getBoundingClientRect():null}},{key:"setScrollTop",value:function(t){this.elem&&(this.elem.scrollHeight<=this.elem.clientHeight+this.elem.scrollTop||(this.elem.scrollTop=this.elem.scrollTop+t))}},{key:"scrollBy",value:function(t){this.elem&&(this.elem.scrollHeight<=this.elem.clientHeight+this.elem.scrollTop||this.elem&&this.elem.scrollBy({left:0,top:t,behavior:"smooth"}))}},{key:"scrollTo",value:function(t){this.elem&&(this.elem.scrollHeight<=this.elem.clientHeight+this.elem.scrollTop||this.elem&&this.elem.scrollTo({left:0,top:t,behavior:"smooth"}))}},{key:"isContainer",value:function(){return!0}},{key:"_render",value:function(){var t=document.createElement("div");return this.id&&t.setAttribute("id",this.id),this.styleName&&(t.className=this.styleName),this.style&&s.objToStyle(t,this.style),this.children.forEach((function(e){try{t.appendChild(e.render())}catch(t){console.error("appendChild err:",t),console.log("child class: "+e.constructor.name)}})),t}}]),n}(L),j=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.styleName,i=t.url,a=t.id,u=void 0===a?"":a,c=t.onready,l=void 0===c?void 0:c;return x(this,n),(o=e.call(this,{styleName:r,id:u,onready:l})).url=i,o}return _(n,[{key:"setImageUrl",value:function(t){this.url=t,this.elem&&(this.elem.src=this.url)}},{key:"_render",value:function(){var t=document.createElement("img");return t.src=this.url,this.styleName&&(t.className=this.styleName),t}},{key:"isImage",value:function(){return!0}}]),n}(L),E=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.styleName,i=t.id,a=void 0===i?"":i,u=t.name,c=void 0===u?"":u,l=t.value,s=void 0===l?"":l,d=t.style,f=t.onready,h=void 0===f?void 0:f,y=t.onChange;return x(this,n),(o=e.call(this,{styleName:r,id:a,onready:h})).name=c,o.value=s,o.onChange=y,o.style=d,o}return _(n,[{key:"type",value:function(){return""}},{key:"setValue",value:function(t){this.value=t,this.elem&&(this.elem.value=t)}},{key:"_render",value:function(){var t=this,e=document.createElement("input");return e.setAttribute("type",this.type()),e.setAttribute("name",this.name),e.setAttribute("value",this.value),this.onChange&&(e.onchange=function(){t.onChange(e.value)}),this.styleName&&(e.className=this.styleName),this.style&&s.objToStyle(e,this.style),e}}]),n}(L),N=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.styleName,i=t.style,a=t.id,u=void 0===a?"":a,c=t.name,l=void 0===c?"":c,s=t.value,d=void 0===s?"":s,f=t.placeholder,h=t.onready,y=t.onChange;return x(this,n),(o=e.call(this,{styleName:r,style:i,id:u,name:l,value:d,onready:h,onChange:y})).placeholder=f,o}return _(n,[{key:"type",value:function(){return"text"}},{key:"_render",value:function(){var t=v(S(n.prototype),"_render",this).call(this);return this.placeholder&&t.setAttribute("placeholder",this.placeholder),t}}]),n}(E),B=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.styleName,i=t.id,a=void 0===i?"":i,u=t.name,c=void 0===u?"":u,l=t.value,s=void 0===l?"":l,d=t.style,f=t.onready,h=t.onChange;return x(this,n),(o=e.call(this,{styleName:r,id:a,name:c,style:d,value:s,onready:f})).onChange=h,o}return _(n,[{key:"type",value:function(){return"file"}},{key:"filter",value:function(){return"image/*"}},{key:"_render",value:function(){var t=this,e=v(S(n.prototype),"_render",this).call(this);return e.setAttribute("accept",this.filter()),this.onChange&&(e.onchange=function(){t.onChange(e.files[0])}),e}}]),n}(E),A=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.styleName,i=void 0===r?"":r,a=t.id,u=void 0===a?"":a,c=t.name,l=void 0===c?"":c,s=t.value,d=void 0===s?"":s,f=t.checked,h=void 0!==f&&f,y=t.onClick,p=t.onready,v=void 0===p?void 0:p;return x(this,n),(o=e.call(this,{styleName:i,id:u,name:l,value:d,onready:v})).onClick=y,o.checked=h,o}return _(n,[{key:"type",value:function(){return"checkbox"}},{key:"isChecked",value:function(){return!!this.elem&&this.elem.checked}},{key:"_render",value:function(){var t=v(S(n.prototype),"_render",this).call(this);return this.onClick&&(t.onclick=this.onClick),this.checked&&(t.checked=this.checked),this.id&&(t.id=this.id),t}}]),n}(E),R=function(t){b(n,t);var e=k(n);function n(t){var o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return x(this,n),(o=e.call(this,{styleName:"",id:"",onready:r})).text=t,o}return _(n,[{key:"setText",value:function(t){this.elem&&(this.elem.textContent=t)}},{key:"_render",value:function(){return document.createTextNode(this.text)}},{key:"isText",value:function(){return!0}}]),n}(L),M=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.oncanplay,i=t.onplay,a=t.onended,u=t.onprogress,c=t.ontimeupdate,l=t.onready;return x(this,n),(o=e.call(this,{styleName:"",id:"",onready:l})).oncanplay=r,o.onplay=i,o.onended=a,o.onprogress=u,o.ontimeupdate=c,o}return _(n,[{key:"seekTo",value:function(t){this.elem&&(this.elem.currentTime=t*this.elem.duration)}},{key:"currentTime",value:function(){return this.elem&&this.elem.currentTime}},{key:"duration",value:function(){return this.elem&&this.elem.duration}},{key:"hasUrl",value:function(){return this.elem&&this.elem.src}},{key:"setPlayUrl",value:function(t){this.elem&&(this.elem.src=t)}},{key:"play",value:function(){this.elem&&this.elem.play()}},{key:"pause",value:function(){this.elem&&this.elem.pause()}},{key:"setVolume",value:function(t){this.elem&&(this.elem.volume=t)}},{key:"_render",value:function(){var t=document.createElement("audio");return t.setAttribute("preload","auto"),t.oncanplay=function(){console.log("on audio prepared duration="+t.duration)},t.onplay=this.onplay,t.onended=this.onended,t.onprogress=this.onprogress,t.ontimeupdate=this.ontimeupdate,t.onerror=t.onended,this.elem=t,this.onready&&this.onready(this),t}}]),n}(L),F=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.forId,i=t.styleName;return x(this,n),(o=e.call(this,{styleName:i,id:""})).forId=r,o}return _(n,[{key:"_render",value:function(){var t=document.createElement("label");return this.forId&&t.setAttribute("for",this.forId),this.styleName&&(t.className=this.styleName),t}}]),n}(L),D=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.onTap,i=void 0===r?void 0:r,a=t.onHover,u=void 0===a?void 0:a,c=t.onTouchStart,l=void 0===c?void 0:c,s=t.onTouchEnd,d=void 0===s?void 0:s,f=t.onMouseDown,h=void 0===f?void 0:f,y=t.onMouseUp,p=void 0===y?void 0:y,v=t.child;return x(this,n),(o=e.call(this,{styleName:"",id:""})).onTap=i,o.onHover=u,o.child=v,o.onTouchStart=l,o.onTouchEnd=d,o.onMouseDown=h,o.onMouseUp=p,o}return _(n,[{key:"build",value:function(){return this.child}},{key:"_render",value:function(){var t=this.child.render();return this.onTap&&(t.onclick=this.onTap),this.onHover&&(t.onmouseover=this.onHover),this.onMouseDown&&(t.onmousedown=this.onMouseDown),this.onMouseUp&&(t.onmouseup=this.onMouseUp),this.onTouchStart&&(t.ontouchstart=this.onTouchStart),this.onTouchEnd&&(t.ontouchend=this.onTouchEnd),t}}]),n}(T),V=function(t){b(n,t);var e=k(n);function n(t){var o,r=t.width,i=void 0===r?0:r,a=t.height,u=void 0===a?0:a,c=t.onready,l=void 0===c?void 0:c;return x(this,n),(o=e.call(this,{styleName:"",id:"",onready:l})).width=i,o.height=u,o}return _(n,[{key:"setCanvasSize",value:function(t,e){this.width=t,this.height=e,this.elem&&(this.elem.width=this.width,this.elem.height=this.height)}},{key:"imageData",value:function(){return this.context?this.context.getImageData(0,0,this.width,this.height):null}},{key:"putImageData",value:function(t,e,n){this.context&&this.context.putImageData(t,e,n)}},{key:"_render",value:function(){var t=document.createElement(c);return t.width=this.width,t.height=this.height,this.context=t.getContext("2d"),t}}]),n}(L),W=function(){function t(){x(this,t)}return _(t,null,[{key:"init",value:function(){t._root=document.getElementById("root"),window.onpopstate=function(e){console.log("onpopstate e = ",e.state),t.pop()}}},{key:"push",value:function(e){var n=e.page,o=e.path,r=e.title;if(t._root&&n){var i=n();if(i instanceof L){t._stack.push(i);var a=t._root;t._removeAll(t._root),a.appendChild(i.render()),history.pushState({title:r,path:o},r,o)}}}},{key:"_removeAll",value:function(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild)}},{key:"pop",value:function(){if(t._root&&!(t._stack.length<=1)){var e=t._root;t._removeAll(e);var n=t._stack,o=n.splice(n.length-1,1);if(o)for(var r=0;r<o.length;r++)o[r].disposeWidget();n.length>0&&e.appendChild(n[n.length-1].render())}}},{key:"replace",value:function(e){var n=e.page,o=e.path,r=e.title;if(0==t._stack.length&&t.push({page:n,path:o,title:r}),t._root&&n){var i=n();if(i instanceof L){var a=t._stack[t._stack.length-1];a&&a.disposeWidget(),t._stack[t._stack.length-1]=i;var u=t._root;t._removeAll(t._root),u.appendChild(i.render()),history.replaceState({title:r,path:o},r,o)}}}}]),t}();p(W,"_root",void 0),p(W,"_stack",[]);var U=function(){function t(){x(this,t)}return _(t,null,[{key:"addEvent",value:function(e,n){if(e&&n){var o=t._events[e];o||(o=[],t._events[e]=o),o.push(n)}}},{key:"removeAll",value:function(){_events={}}},{key:"removeEvent",value:function(e,n){if(e&&n){var o=t._events[e];if(o&&0!=o.length)for(var r=0;r<o.length;r++)if(o[r]==n){o.splice(r,1);break}}}},{key:"sendEvent",value:function(e,n){var o=t._events[e];o&&o instanceof Array&&o.forEach((function(t){t(n)}))}}]),t}();p(U,"_events",{});var H,G=function(){function t(e,n){x(this,t),this.oldWidget=e,this.newWidget=n}return _(t,[{key:"diff",value:function(){this.oldWidget.initProps&&(this.newWidget.initProps=this.oldWidget.initProps),t.rebuild(this.newWidget);var e=this.oldWidget.child,n=this.newWidget.child;this.diffImpl(e,n,this.oldWidget)}},{key:"diffImpl",value:function(t,e,n){try{if(t.classType()!=e.classType())return void this._replaceWidget(t,e,n)}catch(t){console.error("compare type",t)}if(t.isContainer())this._diffContainer(t,e);else if(t.isComponent()){this.oldWidget.initProps&&(this.newWidget.initProps=this.oldWidget.initProps);var o=t.child,r=e.child;this.diffImpl(o,r,t)}else t.isText()?t.text!=e.text&&t.setText(e.text):t.isImage()&&e.url&&t.url!=e.url&&t.setImageUrl(e.url)}},{key:"_diffContainer",value:function(t,e){var n=e.children,o=t.children,r=o.length;if(n.length<o.length){for(var i=n.length;i<o.length;i++)t.elem.removeChild(o[i].elem);o.splice(n.length,o.length-n.length)}else if(n.length>o.length){for(var a=o.length;a<n.length;a++)t.elem.appendChild(n[a].render());o.push.apply(o,n.slice(o.length,n.length))}for(var u=n.length>r?r:n.length,c=0;c<u;c++)this.diffImpl(o[c],n[c],t);try{e.styleName!=t.styleName&&t.setStyleName(e.styleName),e.style!=t.style&&t.setStyle(e.style)}catch(t){console.error("set class name error",t)}}},{key:"_replaceWidget",value:function(t,e,n){if(n.isContainer()){var o=n.children.indexOf(t);n.children[o]=e,n.elem&&n.elem.replaceChild(e.render(),t.elem)}else n.isComponent()&&(n.child=e,t.elem&&t.elem.parentNode&&t.elem.parentNode.replaceChild(e.render(),t.elem));t.disposeWidget()}}],[{key:"rebuild",value:function(e){e.isContainer()?e.children.forEach((function(e){e.isComponent()?t.rebuild(e.rebuild()):e.isContainer()&&t.rebuild(e)})):e.isComponent()?t.rebuild(e.rebuild()):console.log("other type")}},{key:"isBoyiaWidget",value:function(t){return t instanceof L}},{key:"cloneWidget",value:function(e){if(!t.isBoyiaWidget(e))throw new Error("obj is not a boyia widget");var n=new e.constructor({styleName:e.styleName,onready:e.onready});for(var o in e)n[o]=e[o];return n}}]),t}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function Y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,q(o.key),o)}}function X(t,e,n){return(e=q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q(t){var e=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==z(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===z(e)?e:String(e)}var J=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"fetchPromise",value:function(e){var n=e.url,o=e.method,r=void 0===o?t.HttpMethod.get:o,i=e.headers,a=void 0===i?{}:i,u=e.data,c=e.responseType,l=void 0===c?"json":c;return new Promise((function(e,o){t.fetch({url:n,method:r,headers:a,data:u,responseType:l,success:function(t){e({status:"ok",data:t})},fail:function(t){o({status:"fail",reason:t})}})}))}},{key:"fetch",value:function(e){var n=e.url,o=e.method,r=void 0===o?t.HttpMethod.get:o,i=e.headers,a=void 0===i?{}:i,u=e.data,c=e.responseType,l=void 0===c?"json":c,s=e.success,d=e.fail,f=e.uploadProgress,h=e.onLoad;u=u||{};var y=t._methodMap[r](a,u);console.log("reqData = ",y),r===t.HttpMethod.get&&(n+=y);var p=new XMLHttpRequest;p.responseType=l,"blob"==l?h&&(p.onload=function(t){200!=p.status&&206!=p.status||h(t,p)}):p.onreadystatechange=function(){4===p.readyState&&(200===p.status?s&&"function"==typeof s&&s(p.response):d&&"function"==typeof d&&d(p.status))},f&&(p.upload.onprogress=function(t){t.lengthComputable&&f(t.loaded,t.total)}),p.open(r,n,!0),Object.keys(a).forEach((function(t){p.setRequestHeader(t,a[t])})),p.send(r===t.HttpMethod.post?y:null)}},{key:"_getPostJsonData",value:function(t){return JSON.stringify(t)}},{key:"_getPostFormData",value:function(t){if(0==Object.keys(t).length)return"";var e=[];for(var n in t)e.push("".concat(n,"=",t[n]));return e.join("&")}},{key:"_httpGetData",value:function(t,e){return 0==Object.keys(e).length?"":0===location.search.length?"".concat("?",e):"".concat("&",e)}},{key:"_httpPostData",value:function(e,n){var o=t._postMap[e["Content-Type"]];return o?o(n):n}},{key:"upload",value:function(e){var n=e.url,o=e.headers,r=void 0===o?{}:o,i=e.file,a=e.success,u=e.fail,c=e.uploadProgress,l=new FormData;l.append("file",i),t.fetch({url:n,headers:r,data:l,method:t.HttpMethod.post,success:a,fail:u,uploadProgress:c})}},{key:"download",value:function(e){var n=e.url,o=e.name,r=e.headers,i=void 0===r?{}:r;t.fetch({url:n,headers:i,responseType:"blob",method:t.HttpMethod.get,onLoad:function(t,e){var n=new Blob([e.response],{type:"application/octet-stream"}),r=e.getResponseHeader("Content-Disposition"),i=document.createElement("a"),a=null!=o?o:"unknow";if(r){var u=r.split("=");a=decodeURI(u[1])}console.log("BoyiaHttp download file name = "+a),i.href=window.URL.createObjectURL(n),i.download=a,i.click(),i.remove(),window.URL.revokeObjectURL(i.href)}})}}],null&&Y(e.prototype,null),n&&Y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function Q(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function tt(){tt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new _(r||[]);return o(a,"_invoke",{value:k(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function h(){}function y(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,i)&&(p=m);var g=y.prototype=f.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(o,i,a,u){var c=s(t[o],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==K(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function k(t,e,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return{value:void 0,done:!0}}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=s(t,e,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function S(t,e){var n=e.method,o=t.iterator[n];if(void 0===o)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=s(o,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=y,o(g,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new w(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},t.values=C,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return a.type="throw",a.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function et(t,e,n,o,r,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(o,r)}function nt(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){et(i,o,r,a,u,"next",t)}function u(t){et(i,o,r,a,u,"throw",t)}a(void 0)}))}}function ot(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,it(o.key),o)}}function rt(t,e,n){return(e=it(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t){var e=function(t,e){if("object"!==K(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==K(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===K(e)?e:String(e)}X(J,"HttpMethod",{get:"GET",post:"POST"}),X(J,"_postMap",{"application/x-www-form-urlencoded":J._getPostFormData,"application/json":J._getPostJsonData}),X(J,"_methodMap",(X(H={},J.HttpMethod.get,J._httpGetData),X(H,J.HttpMethod.post,J._httpPostData),H));var at="User-Token",ut="audio",ct=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o,r,i,a,u;return e=t,null,n=[{key:"clear",value:function(){t.audioData=null,d.removeData(ut)}},{key:"_getData",value:function(){var e;return t.audioData||(t.audioData=null!==(e=d.getObject(ut))&&void 0!==e?e:{}),t.audioData}},{key:"getVolume",value:function(){var t;return null!==(t=this._getData().volume)&&void 0!==t?t:1}},{key:"setVolume",value:function(t){var e=this._getData();e.volume=t,s.asyncTask({macroTask:function(){d.setObject(ut,e)}})}},{key:"isTuneCirculation",value:function(){var t;return null!==(t=this._getData().isTuneCirculation)&&void 0!==t&&t}},{key:"setTuneCirculation",value:(u=nt(tt().mark((function t(e){var n;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this._getData()).isTuneCirculation=e,t.next=4,s.asyncTaskPromise({macroTask:function(){d.setObject(ut,n)}});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"getLocalPlaylist",value:function(){var t;return null!==(t=this._getData().playlist)&&void 0!==t?t:[]}},{key:"getInternetPlaylist",value:function(){var e;return null!==(e=t.internetPlaylist)&&void 0!==e?e:[]}},{key:"getPlaylist",value:(a=nt(tt().mark((function e(n){var o,r,i,a;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getLocalPlaylist(),0!=(r=t.getInternetPlaylist()).length||!n){e.next=7;break}return e.next=5,J.fetchPromise({url:n,headers:rt({},at,"none"),method:J.HttpMethod.get});case 5:"ok"==(i=e.sent).status&&(console.log("playlist data = ",i),r=null!==(a=i.data)&&void 0!==a?a:[],t.internetPlaylist=r);case 7:return o=[].concat(Q(o),Q(r)),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)}))),function(t){return a.apply(this,arguments)})},{key:"setLocalPlaylist",value:(i=nt(tt().mark((function t(e){var n;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this._getData()).playlist=e,t.next=4,s.asyncTaskPromise({macroTask:function(){d.setObject(ut,n)}});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"deletePlayItem",value:(r=nt(tt().mark((function e(n){var o,r;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(o=t.getLocalPlaylist()).length){e.next=3;break}return e.abrupt("return");case 3:r=0;case 4:if(!(r<o.length)){e.next=11;break}if(o[r].playId!=n){e.next=8;break}return o.splice(r,1),e.abrupt("break",11);case 8:r++,e.next=4;break;case 11:return e.next=13,t.setLocalPlaylist(o);case 13:case"end":return e.stop()}}),e)}))),function(t){return r.apply(this,arguments)})},{key:"getSkin",value:function(){var t;return null!==(t=this._getData().skin)&&void 0!==t?t:"black"}},{key:"setSkin",value:(o=nt(tt().mark((function t(e){var n;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this._getData()).skin=e,t.next=4,s.asyncTaskPromise({macroTask:function(){d.setObject(ut,n)}});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],n&&ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function st(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==lt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===lt(r)?r:String(r)),o)}var r}rt(ct,"audioData",null),rt(ct,"internetPlaylist",null);var dt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"createSkin",value:function(t){return{name:"".concat(t),style:{audioPlayer:"audio-player-".concat(t),audioContainerBlink:"audio-container-blink-".concat(t),audioButton:"audio-button-".concat(t),audioPlayButton:"audio-play-button-".concat(t),audioPlayPause:"audio-play-pause-".concat(t),audioPlayForwardFirst:"audio-forward-first-".concat(t),audioPlayForward:"audio-forward-".concat(t),audioBack:"audio-back-".concat(t),audioBackFirst:"audio-back-first-".concat(t),audioLayout:"audio-layout-".concat(t),audioButtonContainer:"audio-button-container-".concat(t),audioBottom:"audio-bottom-".concat(t),audioProgressCtrl:"audio-progress-ctrl-".concat(t),audioProgressContainer:"audio-progress-container-".concat(t),audioProgress:"audio-progress-".concat(t),audioImageContainer:"audio-image-container-".concat(t),audioImage:"audio-image-".concat(t),audioHeader:"audio-header-".concat(t),audioTitleContainer:"audio-title-container-".concat(t),audioTitleText:"audio-title-text-".concat(t),audioProgressText:"audio-progress-text-".concat(t),audioPlaylistShow:"audio-playlist-show-".concat(t),audioPlaylistContainer:"audio-playlist-container-".concat(t),audioPlaylistContainerHide:"audio-playlist-container-hide-".concat(t),audioPlaylistItem:"audio-playlist-item-".concat(t),audioPlaylistEvenItem:"audio-playlist-even-item-".concat(t),audioItemIndex:"audio-item-index-".concat(t),audioItemName:"audio-item-name-".concat(t),audioItemAuthor:"audio-item-author-".concat(t),audioItemFocus:"audio-item-name-focus-".concat(t),audioListButtonContainer:"audio-list-button-container-".concat(t),audioListButtonStyle:"audio-list-button-style-".concat(t),audioVolumeIconFirst:"audio-volume-icon-first-".concat(t),audioVolumeIcon:"audio-volume-icon-".concat(t),audioVolumeView:"audio-volume-view-".concat(t),audioVolumeProgress:"audio-volume-progress-".concat(t),audioVolumeBar:"audio-volume-bar-".concat(t),audioVolumeIconContainer:"audio-volume-icon-container-".concat(t),audioVolumeContainer:"audio-volume-container-".concat(t),audioLyricButtonContainer:"audio-lyric-button-container-".concat(t),audioLyricsContainer:"audio-lyrics-container-".concat(t),audioLyricItem:"audio-lyric-item-".concat(t),audioLyricRoot:"audio-lyrics-root-".concat(t),audioLyricShow:"audio-lyric-show-".concat(t),audioShadowTop:"audio-shadow-top-".concat(t),audioShadowBottom:"audio-shadow-bottom-".concat(t),audioLyricItemFocus:"audio-lyric-item-focus-".concat(t),audioNoLyricTip:"audio-no-lyric-tip-".concat(t),audioEffectContainer:"effect-container-".concat(t),audioPlaylistRoot:"audio-playlist-root-".concat(t),audioSettingButtonContainer:"audio-setting-button-container-".concat(t),audioSettingButtonOuter:"audio-setting-button-outer-".concat(t),audioSettingButtonInner:"audio-setting-button-inner-".concat(t),audioSettingsContainer:"audio-settings-container-".concat(t),audioSwitchStyle:"audio-bui-switch",audioAddSongRoot:"audio-add-song-root-".concat(t),audioAddSongContainer:"audio-add-song-container-".concat(t),audioAddSongClose:"audio-add-song-container-close-".concat(t),audioAddSongInput:"audio-add-song-input-".concat(t),audioMainColor:"audio-main-color-".concat(t)}}}}],null&&st(e.prototype,null),n&&st(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==ft(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==ft(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===ft(r)?r:String(r)),o)}var r}var yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.skinMap={},this.register({name:"black",style:{audioPlayer:"audio-player-black",audioContainerBlink:"audio-container-blink-black",audioButton:"audio-button-black",audioPlayButton:"audio-play-button-black",audioPlayPause:"audio-play-pause-black",audioPlayForwardFirst:"audio-forward-first-black",audioPlayForward:"audio-forward-black",audioBack:"audio-back-black",audioBackFirst:"audio-back-first-black",audioLayout:"audio-layout-black",audioButtonContainer:"audio-button-container-black",audioBottom:"audio-bottom-black",audioProgressCtrl:"audio-progress-ctrl-black",audioProgressContainer:"audio-progress-container-black",audioProgress:"audio-progress-black",audioImageContainer:"audio-image-container-black",audioImage:"audio-image-black",audioHeader:"audio-header-black",audioTitleContainer:"audio-title-container-black",audioTitleText:"audio-title-text-black",audioProgressText:"audio-progress-text-black",audioPlaylistShow:"audio-playlist-show-black",audioPlaylistContainer:"audio-playlist-container-black",audioPlaylistContainerHide:"audio-playlist-container-hide-black",audioPlaylistItem:"audio-playlist-item-black",audioPlaylistEvenItem:"audio-playlist-even-item-black",audioItemIndex:"audio-item-index-black",audioItemName:"audio-item-name-black",audioItemAuthor:"audio-item-author-black",audioItemFocus:"audio-item-name-focus-black",audioListButtonContainer:"audio-list-button-container-black",audioListButtonStyle:"audio-list-button-style-black",audioVolumeIconFirst:"audio-volume-icon-first-black",audioVolumeIcon:"audio-volume-icon-black",audioVolumeView:"audio-volume-view-black",audioVolumeProgress:"audio-volume-progress-black",audioVolumeBar:"audio-volume-bar-black",audioVolumeIconContainer:"audio-volume-icon-container-black",audioVolumeContainer:"audio-volume-container-black",audioLyricButtonContainer:"audio-lyric-button-container-black",audioLyricsContainer:"audio-lyrics-container-black",audioLyricItem:"audio-lyric-item-black",audioLyricRoot:"audio-lyrics-root-black",audioLyricShow:"audio-lyric-show-black",audioShadowTop:"audio-shadow-top-black",audioShadowBottom:"audio-shadow-bottom-black",audioLyricItemFocus:"audio-lyric-item-focus-black",audioNoLyricTip:"audio-no-lyric-tip-black",audioEffectContainer:"effect-container-black",audioPlaylistRoot:"audio-playlist-root-black",audioSettingButtonContainer:"audio-setting-button-container-black",audioSettingButtonOuter:"audio-setting-button-outer-black",audioSettingButtonInner:"audio-setting-button-inner-black",audioSettingsContainer:"audio-settings-container-black",audioSwitchStyle:"audio-bui-switch",audioAddSongRoot:"audio-add-song-root-black",audioAddSongContainer:"audio-add-song-container-black",audioAddSongClose:"audio-add-song-container-close-black",audioAddSongInput:"audio-add-song-input-black",audioMainColor:"audio-main-color-black"}}),this.register({name:"default",style:{audioPlayer:"audio-player",audioContainerBlink:"audio-container-blink",audioButton:"audio-button",audioPlayButton:"audio-play-button",audioPlayPause:"audio-play-pause",audioPlayForwardFirst:"audio-forward-first",audioPlayForward:"audio-forward",audioBack:"audio-back",audioBackFirst:"audio-back-first",audioLayout:"audio-layout",audioButtonContainer:"audio-button-container",audioBottom:"audio-bottom",audioProgressCtrl:"audio-progress-ctrl",audioProgressContainer:"audio-progress-container",audioProgress:"audio-progress",audioImageContainer:"audio-image-container",audioImage:"audio-image",audioHeader:"audio-header",audioTitleContainer:"audio-title-container",audioTitleText:"audio-title-text",audioProgressText:"audio-progress-text",audioPlaylistShow:"audio-playlist-show",audioPlaylistContainer:"audio-playlist-container",audioPlaylistContainerHide:"audio-playlist-container-hide",audioPlaylistItem:"audio-playlist-item",audioPlaylistEvenItem:"audio-playlist-even-item",audioItemIndex:"audio-item-index",audioItemName:"audio-item-name",audioItemAuthor:"audio-item-author",audioItemFocus:"audio-item-name-focus",audioListButtonContainer:"audio-list-button-container",audioListButtonStyle:"audio-list-button-style",audioVolumeIconFirst:"audio-volume-icon-first",audioVolumeIcon:"audio-volume-icon",audioVolumeView:"audio-volume-view",audioVolumeProgress:"audio-volume-progress",audioVolumeBar:"audio-volume-bar",audioVolumeIconContainer:"audio-volume-icon-container",audioVolumeContainer:"audio-volume-container",audioLyricButtonContainer:"audio-lyric-button-container",audioLyricsContainer:"audio-lyrics-container",audioLyricItem:"audio-lyric-item",audioLyricRoot:"audio-lyrics-root",audioLyricShow:"audio-lyric-show",audioShadowTop:"audio-shadow-top",audioShadowBottom:"audio-shadow-bottom",audioLyricItemFocus:"audio-lyric-item-focus",audioNoLyricTip:"audio-no-lyric-tip",audioEffectContainer:"effect-container",audioPlaylistRoot:"audio-playlist-root",audioSettingButtonContainer:"audio-setting-button-container",audioSettingButtonOuter:"audio-setting-button-outer",audioSettingButtonInner:"audio-setting-button-inner",audioSettingsContainer:"audio-settings-container",audioSwitchStyle:"audio-bui-switch",audioAddSongRoot:"audio-add-song-root",audioAddSongContainer:"audio-add-song-container",audioAddSongClose:"audio-add-song-container-close",audioAddSongInput:"audio-add-song-input",audioMainColor:"audio-main-color"}}),this.register(dt.createSkin("red")),this.register(dt.createSkin("green")),this.register(dt.createSkin("purple")),this.register(dt.createSkin("brown")),this.register(dt.createSkin("orange"));var e=ct.getSkin();this.setSkin(e)}var e,n,o;return e=t,o=[{key:"instance",value:function(){return t.sInstance||(t.sInstance=new t),t.sInstance}}],(n=[{key:"getSkin",value:function(){return this.skin||(this.skin=this.skinMap[this.skinName]),this.skin}},{key:"register",value:function(t){console.log("SkinManager.js---register name="+t.name+" style="+t.style),this.skinMap[t.name]=t.style}},{key:"setSkin",value:function(t){ct.setSkin(t);var e=this.skinMap[t];e||(e=this.skinMap.black),this.skin=e}}])&&ht(e.prototype,n),o&&ht(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function vt(){return vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wt(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},vt.apply(this,arguments)}function mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}function gt(t,e){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gt(t,e)}function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=wt(t);if(e){var r=wt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function wt(t){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wt(t)}function kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function St(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Pt(o.key),o)}}function xt(t,e,n){return e&&St(t.prototype,e),n&&St(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pt(t){var e=function(t,e){if("object"!==pt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==pt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===pt(e)?e:String(e)}yt.sInstance=null;var _t,Ct,Lt,Tt={kSpaceEffect:1,kNoEffect:2,kPillarEffect:3},Ot=250,It=function(){function t(e){kt(this,t),this._resetWidget(e)}return xt(t,[{key:"_resetWidget",value:function(t){this.widget=t,this.analyser=t.analyser,this.audio=t.audio,this.width=t.width,this.height=t.height}},{key:"render",value:function(){}}],[{key:"getRenderer",value:function(e,n){var o=t.effectRendererMap[e];return o?o._resetWidget(n):(o=t._createRenderer(e,n),t.effectRendererMap[e]=o),o}},{key:"_createRenderer",value:function(t,e){switch(t){case Tt.kPillarEffect:return new Bt(e);case Tt.kSpaceEffect:return new Nt(e);case Tt.kNoEffect:return new At(e)}return null}}]),t}();_t=It,Lt={},(Ct=Pt(Ct="effectRendererMap"))in _t?Object.defineProperty(_t,Ct,{value:Lt,enumerable:!0,configurable:!0,writable:!0}):_t[Ct]=Lt;var jt=2*Math.PI,Et=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.45;t.r<e&&(t.r=e),t.g<e&&(t.g=e),t.b<e&&(t.b=e)},Nt=function(t){mt(n,t);var e=bt(n);function n(t){var o;return kt(this,n),(o=e.call(this,t))._initResource(),o}return xt(n,[{key:"render",value:function(){this._renderEffect(),this.context&&this.context.putImageData(this.imageData,0,0)}},{key:"_resetWidget",value:function(t){vt(wt(n.prototype),"_resetWidget",this).call(this,t),this.context=t.canvasWidget.context,this.imageData=t.imageData,this.analyser&&(this.analyser.fftSize=8192)}},{key:"_setPixel",value:function(t,e,n,o,r,i){var a=4*(t+e*this.imageData.width),u=this.imageData.data;u[a]=n,u[a+1]=o,u[a+2]=r,u[a+3]=i}},{key:"_initResource",value:function(){var t={};t.r=Math.random()*jt,t.g=Math.random()*jt,t.b=Math.random()*jt;var e={};e.r=Math.random()*jt,e.g=Math.random()*jt,e.b=Math.random()*jt,this.color=t,this.mixColor=e,this.time=0,this.colorInvertValue=0,this._addCircles()}},{key:"_renderEffect",value:function(){var t=!1;this.analyser&&(t=!0);var e=null;t&&(e=new Uint8Array(this.analyser.frequencyBinCount),this.analyser.getByteFrequencyData(e));var n,o=(n=this.color,{r:1*Math.sin(n.r+=.04)+1,g:1*Math.sin(n.g+=.028)+1,b:1*Math.sin(n.b+=.052)+1}),r=function(t){return{r:1*Math.sin(t.r+=.01)+1,g:1*Math.sin(t.g+=.007)+1,b:1*Math.sin(t.b+=.013)+1}}(this.mixColor);Et(o,.45),Et(r,.25);for(var i=!1,a=this.circleHolder,u=0,c=a.length;u<c;u++){var l=a[u];l.color.r=o.r-(l.z+Ot)/Ot,l.color.g=o.g-(l.z+Ot)/Ot,l.color.b=o.b-(l.z+Ot)/Ot,l.color.r<r.r&&(l.color.r=r.r),l.color.g<r.g&&(l.color.g=r.g),l.color.b<r.b&&(l.color.b=r.b);var s=void 0;u>0&&(s=a[u-1]),l.mp.x+=25e-5*(this.width/2-l.mp.x),l.mp.y+=25e-5*(this.height/2-l.mp.y),l.center.x=(this.width/2-l.mp.x)*((l.z-Ot)/500)+this.width/2,l.center.y=(this.height/2-l.mp.y)*((l.z-Ot)/500)+this.height/2;for(var d=0,f=l.segmentsOutside.length;d<f;d++){var h=l.segmentsOutside[d];if(!0===h.active){var y=Ot/(Ot+l.z),p=void 0;u>0&&(p=Ot/(Ot+s.z));var v=void 0,m=void 0;h.x2d=h.x*y+l.center.x,h.y2d=h.y*y+l.center.y,t&&(m=(v=e[h.audioBufferIndex])/20,h.radiusAudio=h.radius-m);var g=0;if(d>0&&(t&&!1===this.audio.paused?(g=Math.round(u/c*(55+v)))>255&&(g=255):g=Math.round(u/c*200)),u>0&&u<c-1){var b=h.subs[0],w=b.index*(jt/h.segments)+this.time;b.x2d=b.x*y+l.center.x,b.y2d=b.y*y+l.center.y,b.x=l.circleCenter.x+Math.cos(w)*h.radiusAudio,b.y=l.circleCenter.y+Math.sin(w)*h.radiusAudio;var k=h.subs[1],S=k.index*(jt/h.segments)+this.time;k.x2d=k.x*p+s.center.x,k.y2d=k.y*p+s.center.y,k.x=l.circleCenter.x+Math.cos(S)*h.radiusAudio,k.y=l.circleCenter.y+Math.sin(S)*h.radiusAudio;var x=h.subs[2],P=x.index*(jt/h.segments)+this.time;x.x2d=x.x*p+s.center.x,x.y2d=x.y*p+s.center.y,x.x=l.circleCenter.x+Math.cos(P)*h.radiusAudio,x.y=l.circleCenter.y+Math.sin(P)*h.radiusAudio;var _=h.subs[3],C=_.index*(jt/h.segments)+this.time;_.x2d=_.x*y+l.center.x,_.y2d=_.y*y+l.center.y,_.x=l.circleCenter.x+Math.cos(C)*h.radius,_.y=l.circleCenter.y+Math.sin(C)*h.radius;var L=h.subs[4],T=L.index*(jt/h.segments)+this.time;L.x2d=L.x*y+l.center.x,L.y2d=L.y*y+l.center.y,L.x=l.circleCenter.x+Math.cos(T)*h.radius,L.y=l.circleCenter.y+Math.sin(T)*h.radius;var O=h.subs[5],I=O.index*(jt/h.segments)+this.time;O.x2d=O.x*p+s.center.x,O.y2d=O.y*p+s.center.y,O.x=l.circleCenter.x+Math.cos(I)*h.radius,O.y=l.circleCenter.y+Math.sin(I)*h.radius;var j=h.subs[6],E=j.index*(jt/h.segments)+this.time;j.x2d=j.x*p+s.center.x,j.y2d=j.y*p+s.center.y,j.x=l.circleCenter.x+Math.cos(E)*h.radius,j.y=l.circleCenter.y+Math.sin(E)*h.radius;var N=void 0,B=void 0,A=void 0,R=void 0,M=h.subs[3],F=h.subs[4],D=h.subs[6],V=h.subs[5];m>0&&(N=h,B=h.subs[1],A=h.subs[2],R=h.subs[0]);var W=Math.round(l.color.r*g),U=Math.round(l.color.g*g),H=Math.round(l.color.b*g);m>0&&(this._drawLine(0|N.x2d,0|N.y2d,0|B.x2d,0|B.y2d,W,U,H,255),this._drawLine(0|B.x2d,0|B.y2d,0|A.x2d,0|A.y2d,W,U,H,255),this._drawLine(0|A.x2d,0|A.y2d,0|R.x2d,0|R.y2d,W,U,H,255),this._drawLine(0|R.x2d,0|R.y2d,0|N.x2d,0|N.y2d,W,U,H,255),this._drawLine(0|M.x2d,0|M.y2d,0|N.x2d,0|N.y2d,W,U,H,255),this._drawLine(0|F.x2d,0|F.y2d,0|R.x2d,0|R.y2d,W,U,H,255),this._drawLine(0|D.x2d,0|D.y2d,0|A.x2d,0|A.y2d,W,U,H,255),this._drawLine(0|V.x2d,0|V.y2d,0|B.x2d,0|B.y2d,W,U,H,255)),l.z<125&&(this._drawLine(0|M.x2d,0|M.y2d,0|F.x2d,0|F.y2d,W,U,H,255),this._drawLine(0|F.x2d,0|F.y2d,0|D.x2d,0|D.y2d,W,U,H,255),this._drawLine(0|D.x2d,0|D.y2d,0|V.x2d,0|V.y2d,W,U,H,255),this._drawLine(0|V.x2d,0|V.y2d,0|M.x2d,0|M.y2d,W,U,H,255))}var G=h.index*(jt/h.segments)+this.time;h.x=l.circleCenter.x+Math.cos(G)*h.radiusAudio,h.y=l.circleCenter.y+Math.sin(G)*h.radiusAudio}}l.z-=.75,l.z<-250&&(l.z+=500,i=!0)}i&&(a=a.sort((function(t,e){return e.z-t.z}))),this.time+=.005,this.colorInvertValue>0?this.colorInvertValue-=5:this.colorInvertValue=0,this.colorInvertValue>0&&this._dataInvert(this.colorInvertValue)}},{key:"_drawLine",value:function(t,e,n,o,r,i,a,u){for(var c=Math.abs(n-t),l=Math.abs(o-e),s=t<n?1:-1,d=e<o?1:-1,f=c-l,h=t,y=e;h>0&&h<this.width&&y>0&&y<this.height&&this._setPixel(h,y,r,i,a,u),h!==n||y!==o;){var p=2*f;p>-c&&(f-=l,h+=s),p<l&&(f+=c,y+=d)}}},{key:"_drawCircle",value:function(t,e,n){for(var o,r=[],i=0;i<=n;i++){var a=e;0===i&&(o=a),i===n&&(a=o);var u=t.x,c=t.y,l=this._getCirclePosition(u,c,a,i,n);r.push({x:l.x,y:l.y,index:i+0,radius:a,segments:n})}return r}},{key:"_getCirclePosition",value:function(t,e,n,o,r){var i=o*(jt/r)+this.time;return{x:t+Math.cos(i)*n,y:e+Math.sin(i)*n}}},{key:"_addCircles",value:function(){for(var t=[],e=8,n={x:0,y:0},o={x:0,y:0},r=1,i=0,a={x:Math.random()*this.width,y:Math.random()*this.height},u=-250;u<Ot;u+=5){var c=this._drawCircle(n,16,64),l={segmentsOutside:[],segmentsInside:[],segmentsInside2:[],segmentsCount:0};l.index=i,l.z=u,l.center=o,l.circleCenter={x:0,y:0},l.mp={x:a.x,y:a.y},l.radius=c[0].radius,l.color={r:0,g:0,b:0},r=i%2,i++,e=Math.floor(1024*Math.random())+8;for(var s=void 0,d=0,f=c.length;d<f;d++){var h=c[d];if(d%2===r){(s=this._addCircleSegment(h.x,h.y,u,e)).active=!0,s.index=h.index,s.radius=h.radius,s.radiusAudio=s.radius,s.segments=h.segments,s.coordinates=[];var y;y=d>0?c[d-1]:c[f-1];var p=this._addCircleSegment(y.x,y.y,u,e),v=this._addCircleSegment(h.x,h.y,u-5,e),m=this._addCircleSegment(y.x,y.y,u-5,e),g=this._addCircleSegment(h.x,h.y,u,e),b=this._addCircleSegment(y.x,y.y,u,e),w=this._addCircleSegment(h.x,h.y,u-5,e),k=this._addCircleSegment(y.x,y.y,u-5,e);p.index=y.index,v.index=h.index,m.index=y.index,g.index=h.index,b.index=y.index,w.index=h.index,k.index=y.index,s.subs=[],s.subs.push(p,v,m,g,b,w,k),e=d<f-1?Math.floor(1024*Math.random())+8:l.segmentsOutside[0].audioBufferIndex,l.segmentsOutside.push(s)}else l.segmentsOutside.push({active:!1})}t.push(l)}this.circleHolder=t}},{key:"_addCircleSegment",value:function(t,e,n,o){var r={};return r.x=t,r.y=e,r.x2d=0,r.y2d=0,r.audioBufferIndex=o,r}}]),n}(It),Bt=function(t){mt(n,t);var e=bt(n);function n(t){return kt(this,n),e.call(this,t)}return xt(n,[{key:"_resetWidget",value:function(t){vt(wt(n.prototype),"_resetWidget",this).call(this,t),this.analyser&&(this.analyser.fftSize=128),this.context=t.canvasWidget.context,this.leftOffset=0}},{key:"render",value:function(){this.analyser&&this.audio&&!1===this.audio.paused?this._renderEffect():this._renderDefault()}},{key:"_renderEffect",value:function(){var t=new Uint8Array(this.analyser.frequencyBinCount);if(this.analyser.getByteFrequencyData(t),t&&0!=t.length)if(0!=t[0]){this.leftOffset=0;var e=this.context;e.fillStyle="#000",e.fillRect(0,0,this.width,this.height);for(var n=this.analyser.frequencyBinCount,o=this.width/n,r=0,i=0;i<n;i++){var a=t[i]/255,u=i/n,c=this.height*a,l=128*a,s=243*u;e.fillStyle="rgb(".concat(l,",").concat(s,",").concat(240,")"),e.fillRect(r,this.height-c,o,c),r+=o+1}}else this._renderDefault()}},{key:"_renderDefault",value:function(){var t=.4*this.height,e=this.width/60,n=this.leftOffset,o=this.context;o.fillStyle="#000",o.fillRect(0,0,this.width,this.height);for(var r=0;r<0+this.width;r+=e+1){var i=Math.sin(.014*(r+0)+n),a=240*i,u=153*i;o.fillStyle="rgb(".concat(a,",").concat(u,",").concat(255,")");var c=t+i*this.height*.4;o.fillRect(r,this.height-c,e,c)}this.leftOffset+=.01}}]),n}(It),At=function(t){mt(n,t);var e=bt(n);function n(t){return kt(this,n),e.call(this,t)}return xt(n,[{key:"_resetWidget",value:function(t){vt(wt(n.prototype),"_resetWidget",this).call(this,t),this.context=t.canvasWidget.context}},{key:"render",value:function(){var t=this.context;t.fillStyle="#00000033",t.fillRect(0,0,this.width,this.height)}}]),n}(It);function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Mt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Wt(o.key),o)}}function Ft(t,e){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ft(t,e)}function Dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vt(t){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(t)}function Wt(t){var e=function(t,e){if("object"!==Rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Rt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Rt(e)?e:String(e)}var Ut=Tt,Ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ft(t,e)}(a,t);var e,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vt(o);if(r){var n=Vt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Dt(t)}(this,t)});function a(t){var e,n=t.volume,o=void 0===n?1:n,r=t.type,u=void 0===r?Tt.kPillarEffect:r,c=t.oncanplay,l=t.onplay,s=t.onended,d=t.onprogress,f=t.ontimeupdate,h=t.styleName,y=t.onready;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e,n){(e=Wt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Dt(e=i.call(this,{styleName:h,onready:y})),"_animateEffect",(function(){e.renderer?(e._clearImageData(),e.renderer.render(),window.requestAnimationFrame(e._animateEffect)):e.initProps.effectRendering=!1})),e.oncanplay=c,e.onplay=l,e.onended=s,e.onprogress=d,e.ontimeupdate=f,e.type=u,e.effectPause=!1,e.volume=o,e}return e=a,(n=[{key:"initWidget",value:function(){this.initProps={effectRendering:!1}}},{key:"_createAudio",value:function(){var t=new Audio;t.preload=!0,t.loop=!1,t.autoplay=!0,t.volume=this.volume,t.oncanplay=function(){console.log("on audio prepared duration="+t.duration)},t.onplay=this.onplay,t.onended=this.onended,t.onprogress=this.onprogress,t.ontimeupdate=this.ontimeupdate,t.onerror=t.onended,this.audio=t}},{key:"setType",value:function(t){this.type=t,this.renderer=It.getRenderer(this.type,this)}},{key:"seekTo",value:function(t){this.audio&&(this.audio.currentTime=t*this.audio.duration)}},{key:"currentTime",value:function(){return this.audio&&this.audio.currentTime}},{key:"duration",value:function(){return this.audio&&this.audio.duration}},{key:"hasUrl",value:function(){return this.audio&&this.audio.src}},{key:"setPlayUrl",value:function(t){this.pause(),this.renderer=null,this._createAudio(),this.audio.src=t,0!==t.indexOf("http")&&this.createAudioAnalyser()}},{key:"play",value:function(){var t=this;this.audio&&s.asyncTask({macroTask:function(){t.renderer||(t.renderer=It.getRenderer(t.type,t)),t.initProps.effectRendering||(t.initProps.effectRendering=!0,t._animateEffect()),t.audio.play()}})}},{key:"pause",value:function(){this.audio&&this.audio.pause()}},{key:"setVolume",value:function(t){this.volume=t,this.audio&&(this.audio.volume=t)}},{key:"createAudioAnalyser",value:function(){var t=new f,e=t.createAnalyser();e.connect(t.destination),e.smoothingTimeConstant=.65,this.analyserBufferLength=e.frequencyBinCount;var n=t.createMediaElementSource(this.audio);n.connect(e),this.analyser=e,this.audioContext=t,this.audioSource=n}},{key:"build",value:function(){var t=this;return new I({styleName:this.styleName,children:[new V({onready:function(e){t.canvasWidget=e}})],onready:function(e){t.canvasWidget&&s.asyncTask({macroTask:function(){t.width=e.offsetWidth(),t.height=e.offsetHeight(),t.canvasWidget.setCanvasSize(t.width,t.height),t.imageData=t.canvasWidget.imageData()}})}})}},{key:"_clearImageData",value:function(){for(var t=this.imageData.data,e=0;e<t.length;e+=4)t[e]=0,t[e+1]=0,t[e+2]=0,t[e+3]=255}}])&&Mt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(O);function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function zt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Yt(o.key),o)}}function Yt(t){var e=function(t,e){if("object"!==Gt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Gt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Gt(e)?e:String(e)}function Xt(t,e){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xt(t,e)}function qt(t){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qt(t)}var Jt={titleContainer:{maxWidth:"100%",display:"inline-block",verticalAlign:"top",overflow:"hidden",whiteSpace:"nowrap"},titleContent:function(t){return{animation:"audio-playlist-title-scroll linear ".concat(t,"s alternate infinite"),float:"left"}}},$t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}(a,t);var e,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=qt(o);if(r){var n=qt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e,n=t.text,o=t.focus,r=void 0!==o&&o,u=t.onready;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,{onready:u})).text=n,e.focus=r,e}return e=a,(n=[{key:"setFocus",value:function(t){this.focus=t,this.setState({})}},{key:"_buildFocusWidget",value:function(){var t=s.measureText(this.text,"1rem normal sans-serif");return new I({style:Jt.titleContainer,children:[new I({style:Jt.titleContent(t/40),children:[new R(this.text)]})]})}},{key:"build",value:function(){var t=yt.instance().getSkin(),e=this.focus?this._buildFocusWidget():new R(this.text);return new I({styleName:this.focus?t.audioItemFocus:t.audioItemName,children:[e]})}}])&&zt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(O);function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Qt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Zt(o.key),o)}}function Zt(t){var e=function(t,e){if("object"!==Kt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Kt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Kt(e)?e:String(e)}function te(t,e){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},te(t,e)}function ee(t){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ee(t)}var ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&te(t,e)}(a,t);var e,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ee(o);if(r){var n=ee(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e,n=t.styleName,o=void 0===n?"bui-switch":n,r=t.theme,u=t.id,c=t.checked,l=void 0!==c&&c,s=t.onSwitchChecked;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,{styleName:o,id:u})).theme=r,e.onSwitchChecked=s,e.checked=l,e}return e=a,(n=[{key:"build",value:function(){var t=this;return new I({styleName:this.styleName,children:[new A({id:this.id,checked:this.checked,onClick:function(){t.checkbox&&t.onSwitchChecked&&t.onSwitchChecked(t.checkbox.isChecked())},onready:function(e){t.checkbox=e}}),new F({forId:this.id,styleName:this.theme})]})}}])&&Qt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(T);function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function re(){re=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new _(r||[]);return o(a,"_invoke",{value:k(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function h(){}function y(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,i)&&(p=m);var g=y.prototype=f.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(o,i,a,u){var c=s(t[o],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==oe(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function k(t,e,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return{value:void 0,done:!0}}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=s(t,e,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function S(t,e){var n=e.method,o=t.iterator[n];if(void 0===o)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=s(o,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=y,o(g,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new w(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},t.values=C,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return a.type="throw",a.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function ie(t,e,n,o,r,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(o,r)}function ae(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){ie(i,o,r,a,u,"next",t)}function u(t){ie(i,o,r,a,u,"throw",t)}a(void 0)}))}}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ce(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,se(o.key),o)}}function le(t,e,n){return e&&ce(t.prototype,e),n&&ce(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function se(t){var e=function(t,e){if("object"!==oe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==oe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===oe(e)?e:String(e)}function de(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}function fe(t,e){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fe(t,e)}function he(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=pe(t);if(e){var r=pe(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ye(t)}(this,n)}}function ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pe(t)}var ve="close_add_song",me="play_list_refresh",ge="change_skin_refresh",be=function(t){de(n,t);var e=he(n);function n(t){var o,r=t.onClick;return ue(this,n),(o=e.call(this,{})).onClick=r,o}return le(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onClick&&t.onClick()},child:new I({styleName:e.audioSettingButtonContainer,children:[new I({styleName:e.audioSettingButtonInner})]})})}}]),n}(T),we="rem",ke=.7,Se={title:{color:"#FFFFFF",fontSize:"1.2".concat(we),marginBottom:"0.6".concat(we)},itemContainer:{width:"100%",borderRadius:"0.4rem",backgroundColor:"rgba(255, 255, 255, 0.1)",paddingLeft:"0.3rem",paddingRight:"0.3rem",paddingTop:"0.3rem",paddingBottom:"0.6rem",color:"rgba(255, 255, 255, ".concat(ke,")"),fontSize:"1rem",marginTop:"0.3rem"},tuneContainer:{display:"flex",flexDirection:"row",alignItems:"center"},playlistHeaderContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},addPlayItemContainer:{width:"3rem",height:"2rem",textAlign:"center",lineHeight:"2rem",borderRadius:"0.6rem",backgroundColor:"rgba(255, 255, 255, 0.2)",cursor:"pointer"},audioPickerStyle:{position:"absolute",right:"0",top:"0",opacity:"0"},audioPickerContainerStyle:{backgroundColor:"rgba(255, 255, 255, ".concat(ke,")"),height:"100%",width:"7rem",position:"relative",overflow:"hidden",textAlign:"center",lineHeight:"3".concat(we),fontWeight:"900",fontSize:"1.2rem",cursor:"pointer"},songAddInputStyle:{width:"100%",height:"3".concat(we),borderRadius:"1.5".concat(we),border:"0.3".concat(we," solid rgba(255, 255, 255, ").concat(ke,")"),marginTop:"0.8".concat(we),display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"nowrap",alignItems:"center",overflow:"hidden",marginBottom:"0.6".concat(we)},songAddItemStyle:{width:"100%",height:"3".concat(we),borderRadius:"1.5".concat(we),border:"0.3".concat(we," solid rgba(255, 255, 255, ").concat(ke,")"),marginTop:"1".concat(we)},songAddHeaderStyle:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",boxSizing:"border-box"},songAddTitleStyle:{color:"rgba(255, 255, 255, ".concat(ke,")"),fontSize:"1.2".concat(we),lineHeight:"100%"},songAddTextFieldStyle:{backgroundColor:"#FFFFFF00",border:"0 solid #FFFFFF00",caretColor:"#FFFFFF",outline:"none",height:"100%",width:"100%",color:"#FFFFFF",fontSize:"1.2rem",paddingLeft:"0.5rem"},playItemContainerStyle:{height:"2".concat(we),width:"100%",borderRadius:"1".concat(we),backgroundColor:"rgba(255, 255, 255, 0.2)",marginTop:"0.5".concat(we),display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",color:"rgba(255, 255, 255, ".concat(ke,")"),fontSize:"1rem",paddingLeft:"1rem",paddingRight:"1rem",boxSizing:"border-box"},playItemNameContainerStyle:{width:"100%",textAlign:"left",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},settingSkinRadioListContainer:function(t){return{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"999999rem",boxSizing:"border-box",paddingTop:"0.2rem",paddingBottom:"0.2rem",marginTop:"0.2rem",paddingLeft:"0.2rem",paddingRight:"0.2rem"}},settingSkinRadioContainer:{height:"1.8rem",width:"1.8rem",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",cursor:"pointer"},settingSkinRadioBorderStyle:function(t){return{position:"absolute",height:"1.8rem",width:"1.8rem",borderRadius:"50%",border:"0.2".concat(we," solid ").concat(t),boxSizing:"border-box"}},settingSkinRadioStyle:function(t){return{height:"1.2rem",width:"1.2rem",borderRadius:"50%",backgroundColor:t}}},xe=[{color:"#000",skin:"black",backgroundColor:"#00000044"},{color:"rgb(108, 191, 255)",skin:"default",backgroundColor:"rgb(108, 191, 255, 0.2)"},{color:"#B22222",skin:"red",backgroundColor:"#B2222244"},{color:"#008B45",skin:"green",backgroundColor:"#008B4544"},{color:"#5D478B",skin:"purple",backgroundColor:"#5D478B44"},{color:"#8B2323",skin:"brown",backgroundColor:"#8B232344"},{color:"#CD3700",skin:"orange",backgroundColor:"#CD370044"}],Pe=function(t){de(n,t);var e=he(n);function n(t){var o,r=t.show,i=void 0!==r&&r,a=t.onAddSong,u=t.onready;return ue(this,n),(o=e.call(this,{onready:u})).show=i,o.onAddSong=a,o}return le(n,[{key:"showSettings",value:function(t){var e=this;if(this.show=t,t)this.setStateAsync({});else if(this.initProps.rootContainer){var n=yt.instance().getSkin();this.initProps.rootContainer.setStyleName("".concat(n.audioLyricRoot," audio-left-hide")),s.asyncTask({macroTask:function(){e.setStateAsync({})},duration:510})}}},{key:"initWidget",value:function(){this.initProps={origin:this}}},{key:"build",value:function(){var t=this;if(!this.show)return new I({onready:function(e){t.initProps.rootContainer=e}});var e=yt.instance().getSkin();return new I({styleName:"".concat(e.audioLyricRoot," audio-left-show"),onready:function(e){t.initProps.rootContainer=e},children:[this._buildSettingsContainer(e),new I({styleName:e.audioShadowTop}),new I({styleName:e.audioShadowBottom})]})}},{key:"_buildSettingsContainer",value:function(t){return new I({onready:function(t){},styleName:t.audioSettingsContainer,children:[this._buildSettingTitle(),this._buildSwitchItem({id:"tuneCirculation",title:"Tune circulation",skin:t,checked:ct.isTuneCirculation(),onSwitchChecked:function(t){ct.setTuneCirculation(t)}}),this._buildSwitchItem({id:"clearData",title:"Clear data",skin:t,onSwitchChecked:function(t){ct.clear(),U.sendEvent(me)}}),this._buildSkinItem(),this._buildLocalPlaylist()]})}},{key:"_buildSettingTitle",value:function(){return new I({style:Se.title,children:[new R("Player Setting")]})}},{key:"_buildSwitchItem",value:function(t){var e=t.id,n=t.title,o=t.skin,r=t.checked,i=void 0!==r&&r,a=t.onSwitchChecked,u=s.extend({objs:[Se.itemContainer,Se.playlistHeaderContainer]});return new I({style:u,children:[new I({children:[new R(n)]}),new ne({id:e,styleName:o.audioSwitchStyle,theme:"audio-bui-theme-blue",checked:i,onSwitchChecked:a})]})}},{key:"_buildLocalPlaylistItem",value:function(t){return new I({style:Se.playItemContainerStyle,children:[new I({style:Se.playItemNameContainerStyle,children:[new R("L".concat(t.playId,". ").concat(t.name))]}),new Le({onClose:(e=ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.deletePlayItem(t.playId);case 2:U.sendEvent(me);case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})]});var e}},{key:"_buildLocalPlaylistHeader",value:function(){var t=this;return new I({style:Se.playlistHeaderContainer,children:[new R("My playlist"),new D({onTap:function(){t.onAddSong&&t.onAddSong()},child:new I({style:Se.addPlayItemContainer,children:[new R("✚")]})})]})}},{key:"_buildLocalPlaylist",value:function(){var t=this,e=ct.getLocalPlaylist(),n=[];return e.forEach((function(e){n.push(t._buildLocalPlaylistItem(e))})),new I({style:Se.itemContainer,children:[this._buildLocalPlaylistHeader()].concat(n)})}},{key:"_buildSkinHeader",value:function(){return new I({style:Se.playlistHeaderContainer,children:[new R("Skin")]})}},{key:"_buildSkinItem",value:function(){return new I({style:Se.itemContainer,children:[this._buildSkinHeader(),this._buildSkinRadioList()]})}},{key:"_buildSkinRadioList",value:function(){var t=[];return xe.forEach((function(e){t.push(new _e({info:e}))})),new I({style:Se.settingSkinRadioListContainer("#008B4544"),children:t})}}]),n}(O),_e=function(t){de(n,t);var e=he(n);function n(t){var o,r=t.info;return ue(this,n),(o=e.call(this,{})).info=r,o}return le(n,[{key:"initWidget",value:function(){this.initProps={}}},{key:"setFocus",value:function(t){this.focus=t,this.setStateAsync({})}},{key:"build",value:function(){var t=this,e=ct.getSkin()==this.info.skin;return new D({onTap:function(){yt.instance().setSkin(t.info.skin),U.sendEvent(ge)},child:new I({style:Se.settingSkinRadioContainer,children:[new I({style:Se.settingSkinRadioStyle(this.info.color)}),new I({styleName:e?"audio-skin-radio-border-display":"audio-skin-radio-border",style:Se.settingSkinRadioBorderStyle(this.info.color)})]})})}}]),n}(O),Ce=function(t){de(n,t);var e=he(n);function n(t){var o=t.styleName,r=t.id,i=void 0===r?"":r,a=t.name,u=void 0===a?"":a,c=t.value,l=void 0===c?"":c,s=t.style,d=t.onready,f=t.onChange;return ue(this,n),e.call(this,{styleName:o,id:i,name:u,value:l,style:s,onready:d,onChange:f})}return le(n,[{key:"filter",value:function(){return"audio/*"}}]),n}(B),Le=function(t){de(n,t);var e=he(n);function n(t){var o,r=t.onClose;return ue(this,n),(o=e.call(this,{})).onClose=r,o}return le(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onClose&&t.onClose()},child:new I({styleName:e.audioAddSongClose,children:[new R("✖")]})})}}]),n}(T),Te=function(t){de(n,t);var e=he(n);function n(t){var o,r=t.onready;return ue(this,n),function(t,e,n){(e=se(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(ye(o=e.call(this,{onready:r})),"show",(function(t){if(o.showSongAdd!=t)if(o.showSongAdd=t,t)o.playItem={imgUrl:"https://assets.market-storefront.envato-static.com/storefront/assets/logos/envato-market-a5ace93f8482e885ae008eb481b9451d379599dfed24868e52b6b2d66f5cf633.svg",name:"anonymous",author:"anonymous",local:!0},o.setStateAsync({});else{if(o.initProps.container){var e=yt.instance().getSkin();o.initProps.container.setStyleName("".concat(e.audioAddSongContainer," audio-center-hide"))}s.asyncTask({macroTask:function(){o.setStateAsync({})},duration:510})}})),o.showSongAdd=!1,o}return le(n,[{key:"initWidget",value:function(){U.addEvent(ve,this.show),this.initProps={}}},{key:"disposeWidget",value:function(){U.removeEvent(ve,this.show)}},{key:"build",value:function(){var t=this;if(!this.showSongAdd)return new I({});var e=yt.instance().getSkin();return new I({styleName:e.audioAddSongRoot,children:[new I({onready:function(e){t.initProps.container=e},styleName:"".concat(e.audioAddSongContainer," audio-center-show"),children:[this._buildHeaderItem(),this._buildNormalItem({onChange:function(e){t.playItem.playUrl=e},placeholder:"Add your song url"}),this._buildNormalItem({title:"Add name",value:this.playItem.author,onChange:function(e){t.playItem.name=e}}),this._buildNormalItem({title:"Add author",value:this.playItem.author,onChange:function(e){t.playItem.author=e}}),this._buildSubmitItem({title:"Add image url",value:this.playItem.imgUrl,onChange:function(e){t.playItem.imgUrl=e}})]})]})}},{key:"_buildHeaderItem",value:function(){return new I({style:Se.songAddHeaderStyle,children:[new I({style:Se.songAddTitleStyle,children:[new R("Add your song")]}),new Le({onClose:function(){U.sendEvent(ve,!1)}})]})}},{key:"_buildLocalSongItem",value:function(t,e,n){var o=yt.instance().getSkin();return new I({style:Se.songAddInputStyle,children:[new N({style:Se.songAddTextFieldStyle,onChange:t,onready:n}),new I({style:Se.audioPickerContainerStyle,styleName:o.audioMainColor,children:[new R("Add"),new Ce({style:Se.audioPickerStyle,onChange:e})]})]})}},{key:"_buildNormalItem",value:function(t){var e=t.title,n=t.value,o=t.placeholder,r=t.onChange,i=t.onready,a=yt.instance().getSkin();return new I(e?{children:[new I({style:Se.songAddTitleStyle,children:[new R(e)]}),new I({style:Se.songAddInputStyle,children:[new N({styleName:a.audioAddSongInput,style:Se.songAddTextFieldStyle,value:n,onChange:r,onready:i,placeholder:o})]})]}:{children:[new I({style:Se.songAddInputStyle,children:[new N({styleName:a.audioAddSongInput,style:Se.songAddTextFieldStyle,value:n,onChange:r,onready:i,placeholder:o})]})]})}},{key:"_buildSubmitItem",value:function(t){var e,n=this,o=t.title,r=t.value,i=t.onChange,a=yt.instance().getSkin();return new I({children:[new I({style:Se.songAddTitleStyle,children:[new R(o)]}),new I({style:Se.songAddInputStyle,children:[new N({style:Se.songAddTextFieldStyle,value:r,onChange:i}),new D({onTap:(e=ae(re().mark((function t(){var e,o;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.playItem.author){t.next=3;break}return l.show({msg:"author cannot be empty"}),t.abrupt("return");case 3:if(n.playItem.name){t.next=6;break}return l.show({msg:"name cannot be empty"}),t.abrupt("return");case 6:if(n.playItem.imgUrl){t.next=9;break}return l.show({msg:"image url cannot be empty"}),t.abrupt("return");case 9:if(n.playItem.playUrl){t.next=12;break}return l.show({msg:"author cannot be empty"}),t.abrupt("return");case 12:return t.next=14,ct.getLocalPlaylist();case 14:e=t.sent,n.playItem.playId=e.length>0?e[e.length-1].playId+1:1,(o=ct.getLocalPlaylist()).push(n.playItem),ct.setLocalPlaylist(o),U.sendEvent(ve,!1),U.sendEvent(me);case 21:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)}),child:new I({style:Se.audioPickerContainerStyle,styleName:a.audioMainColor,children:[new R("Submit")]})})]})]})}}]),n}(O);function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function je(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Ne(o.key),o)}}function Ee(t,e,n){return e&&je(t.prototype,e),n&&je(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ne(t){var e=function(t,e){if("object"!==Oe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Oe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Oe(e)?e:String(e)}function Be(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ae(t,e)}function Ae(t,e){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ae(t,e)}function Re(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Me(t);if(e){var r=Me(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===Oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Me(t)}var Fe={width:"2rem",height:"2rem",zIndex:"2"},De=function(t){Be(n,t);var e=Re(n);function n(t){var o,r=t.playItem;return Ie(this,n),(o=e.call(this,{style:Fe,styleName:"audio-widget-opacity"})).onTap=o._onDownload,o.playItem=r,o}return Ee(n,[{key:"_onDownload",value:function(){if(this.playItem&&this.playItem.playUrl){var t,e=this.playItem.playUrl,n=null!==(t=e.substring(e.lastIndexOf(".")))&&void 0!==t?t:"mp3",o=this.playItem.name.replace(/\s+/g,"_")+"_"+this.playItem.author.replace(/\s+/g,"_")+n;J.download({url:e,name:o,"User-Token":"none"})}}},{key:"_drawWidget",value:function(t){var e=this.width/2,n=this.height/4,o=e,r=3*this.height/4;this._drawDownloadIcon(t,e,n,o,r)}},{key:"_drawDownloadIcon",value:function(t,e,n,o,r,i,a,u,c){var l,s,d,f;i=null!==(l=i)&&void 0!==l?l:30,a=null!==(s=a)&&void 0!==s?s:this.height/4,u=null!==(d=u)&&void 0!==d?d:2,c=null!==(f=c)&&void 0!==f?f:"#FFFFFFFF";var h=180*Math.atan2(n-r,e-o)/Math.PI,y=(h+i)*Math.PI/180,p=(h-i)*Math.PI/180,v=a*Math.cos(y),m=a*Math.sin(y),g=a*Math.cos(p),b=a*Math.sin(p);t.save(),t.beginPath();var w=e-v,k=n-m;t.moveTo(w,k),t.moveTo(e,n),t.lineTo(o,r),w=o+v,k=r+m,t.moveTo(w,k),t.lineTo(o,r),w=o+g,k=r+b,t.lineTo(w,k),t.strokeStyle=c,t.lineWidth=u,t.moveTo(this.width/5,r+1),t.lineTo(8*this.width/10,r+1),t.stroke(),t.restore()}}]),n}(function(t){Be(n,t);var e=Re(n);function n(t){var o,r=t.style,i=t.styleName,a=t.onTap;return Ie(this,n),(o=e.call(this,{styleName:i})).onTap=a,o.style=r,o}return Ee(n,[{key:"build",value:function(){var t=this;return new D({onTap:function(e){t.onTap&&t.onTap(),e.stopPropagation()},child:new I({style:this.style,styleName:this.styleName,children:[new V({onready:function(e){t.canvasWidget=e}})],onready:function(e){s.asyncTask({macroTask:function(){t.canvasWidget&&(t.width=e.offsetWidth(),t.height=e.offsetHeight(),t.canvasWidget.setCanvasSize(t.width,t.height),t._drawWidget&&t._drawWidget(t.canvasWidget.context))}})}})})}}]),n}(T));function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function We(){We=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new _(r||[]);return o(a,"_invoke",{value:k(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function h(){}function y(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,i)&&(p=m);var g=y.prototype=f.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(o,i,a,u){var c=s(t[o],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Ve(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function k(t,e,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return{value:void 0,done:!0}}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=s(t,e,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function S(t,e){var n=e.method,o=t.iterator[n];if(void 0===o)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=s(o,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=y,o(g,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new w(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},t.values=C,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return a.type="throw",a.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Ue(t,e,n,o,r,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(o,r)}function He(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){Ue(i,o,r,a,u,"next",t)}function u(t){Ue(i,o,r,a,u,"throw",t)}a(void 0)}))}}function Ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ze(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,tn(o.key),o)}}function Ye(t,e,n){return e&&ze(t.prototype,e),n&&ze(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xe(){return Xe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qe(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Xe.apply(this,arguments)}function qe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Je(t,e)}function Je(t,e){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Je(t,e)}function $e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Qe(t);if(e){var r=Qe(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===Ve(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ke(t)}(this,n)}}function Ke(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qe(t){return Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qe(t)}function Ze(t,e,n){return(e=tn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tn(t){var e=function(t,e){if("object"!==Ve(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Ve(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ve(e)?e:String(e)}var en="play_item_click",nn="play_list_loaded",on=function(t){qe(o,t);var e,n=$e(o);function o(t){var e,r=t.onready,i=void 0===r?void 0:r,a=t.playListUrl,u=void 0===a?"":a;return Ge(this,o),Ze(Ke(e=n.call(this,{styleName:"",onready:i})),"_onPlayItemClick",(function(t){e.playIndex=t;var n=e.playList[t];e.image.setImageUrl(n.imgUrl),e.title.setTitle(n.name+"-"+n.author),e.playListView&&e.playListView.resetPlayItem(t),e.audio.setPlayUrl(n.playUrl),e.audio.play(),e.playStatus=!0,e.audioButton&&e.audioButton.setPlayStatus(e.playStatus),e.lyrics&&e.lyrics.showLyrics(e._currentLyricUrl(),!0)})),Ze(Ke(e),"_playListRefresh",He(We().mark((function t(){var n;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.playList.clear(),t.next=3,ct.getPlaylist(e.playListUrl);case 3:(n=t.sent).length>0&&e.playList.push.apply(e.playList,n),e.playIndex>e.playList.length-1&&(e.playIndex=e.playList.length-1),e.initProps.origin.setStateAsync({});case 7:case"end":return t.stop()}}),t)})))),Ze(Ke(e),"_onSkinChangeRefresh",(function(){e.initProps.origin.setStateAsync({})})),Ze(Ke(e),"_onPlay",(function(t){e.playList&&e.audio&&(e.audio.hasUrl()||!t?(e.playStatus=t,t&&e.audio.hasUrl()?e.audio.play():e.audio.pause()):e._onPlayItemClick(0))})),e.playListUrl=u,e.type=Ut.kSpaceEffect,e.playStatus=!1,e.volume=ct.getVolume(),e}return Ye(o,[{key:"initWidget",value:function(){this._loadPlaylist(),this.showSettings=!1,this.showSongAdd=!1,this.initProps={origin:this},U.addEvent(en,this._onPlayItemClick),U.addEvent(me,this._playListRefresh),U.addEvent(ge,this._onSkinChangeRefresh)}},{key:"disposeWidget",value:function(){U.removeEvent(en,this._onPlayItemClick),U.removeEvent(me,this._playListRefresh),U.removeEvent(ge,this._onSkinChangeRefresh),Xe(Qe(o.prototype),"disposeWidget",this).call(this)}},{key:"_loadPlaylist",value:(e=He(We().mark((function t(){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playIndex=0,t.next=3,ct.getPlaylist(this.playListUrl);case 3:this.playList=t.sent,this.playList.length>0&&U.sendEvent(nn,this.playList);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_currentPlayUrl",value:function(){return this.playList&&0!=this.playList.length?this.playList[this.playIndex].playUrl:""}},{key:"_currentLyricUrl",value:function(){return this.playList&&0!=this.playList.length?this.playList[this.playIndex].lyricUrl:""}},{key:"_nextPlayIndex",value:function(){++this.playIndex>this.playList.length-1&&(this.playIndex=0)}},{key:"_buildEffectAudio",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.type=t.type>=Ut.kPillarEffect?Ut.kSpaceEffect:t.type+1,t.audio&&t.audio.setType(t.type)},child:new Ht({volume:this.volume,type:this.type,styleName:e.audioEffectContainer,oncanplay:function(){},onplay:function(){},onended:function(){console.log("on play completed"),ct.isTuneCirculation()||t._nextPlayIndex(),t._onPlayItemClick(t.playIndex)},onprogress:function(){},ontimeupdate:function(){t.audioProgress&&t.audio.currentTime()&&t.audio.duration()&&t.audioProgress.setProgress(t.audio.currentTime(),t.audio.duration()),t.lyrics&&t.audio&&t.lyrics.setTime(t._currentLyricUrl(),t.audio.currentTime())},onready:function(e){t.audio=e}})})}},{key:"_buildAudio",value:function(){var t=this;return new M({oncanplay:function(){},onplay:function(){},onended:function(){console.log("on play completed"),++t.playIndex>t.playList.length-1&&(t.playIndex=0),t._onPlayItemClick(t.playIndex)},onprogress:function(){},ontimeupdate:function(){t.audioProgress&&t.audio.currentTime()&&t.audio.duration()&&t.audioProgress.setProgress(t.audio.currentTime(),t.audio.duration()),t.lyrics&&t.audio&&t.lyrics.setTime(t._currentLyricUrl(),t.audio.currentTime())},onready:function(e){t.audio=e}})}},{key:"_buildAudioInfo",value:function(t){var e=this;return new I({styleName:t.audioHeader,children:[new rn({onready:function(t){e.image=t}}),new an({widget:this._buildEffectAudio(),onready:function(t){e.title=t}}),new un({onready:function(t){e.audioListButton=t},onListButtonClick:function(){e.playListView&&e.playListView.show(!e.playListView.isVisible())}}),new pn({onLyricsButtonClick:function(){e.audioSettings&&e.showSettings&&(e.showSettings=!1,e.audioSettings.showSettings(e.showSettings)),e.lyrics&&e.lyrics.showLyrics(e._currentLyricUrl())}}),new be({onClick:function(){e.lyrics&&e.lyrics.isShow()&&e.lyrics.showLyrics(e._currentLyricUrl()),e.audioSettings&&(e.showSettings=!e.showSettings,e.audioSettings.showSettings(e.showSettings))}})]})}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new I({styleName:this.styleName,children:[new I({styleName:e.audioContainerBlink}),new I({styleName:e.audioPlayer,children:[this._buildAudioInfo(e),this._buildTools(e)]}),new yn({playList:this.playList,playIndex:this.playIndex,onready:function(e){t.playListView=e}}),new vn({styleName:e.audioLyricsContainer,onready:function(e){t.lyrics=e}}),new Pe({show:this.showSettings,onready:function(e){t.audioSettings=e},onAddSong:function(){t.songAddWidget&&t.songAddWidget.show(!0)}}),new Te({showSongAdd:this.showSongAdd,onready:function(e){t.songAddWidget=e}})]})}},{key:"_buildTools",value:function(t){var e=this;return new I({styleName:t.audioBottom,children:[new cn({onBack:function(){--e.playIndex<0&&(e.playIndex=0),e._onPlayItemClick(e.playIndex)}}),new ln({status:this.playStatus,onClick:this._onPlay,onready:function(t){e.audioButton=t}}),new sn({onForward:function(){++e.playIndex>e.playList.length-1&&(e.playIndex=0),e._onPlayItemClick(e.playIndex)}}),new dn({onready:function(t){e.audioProgress=t},onAudioProgressUpdate:function(t){e.title&&e.title.updateProgressText(t)},onSeek:function(t){e.audio&&e.audio.duration()&&e.audio.seekTo(t)}}),new fn({volume:this.volume,onSetVolume:function(t){e.audio&&(console.log("audio.js---onSetVolume()---volume: "+t),e.audio.setVolume(t))}})]})}}]),o}(O),rn=function(t){qe(n,t);var e=$e(n);function n(t){var o=t.onready,r=void 0===o?void 0:o;return Ge(this,n),e.call(this,{styleName:"",onready:r})}return Ye(n,[{key:"setImageUrl",value:function(t){this.image&&this.image.setImageUrl(t)}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new I({styleName:e.audioImageContainer,children:[new j({styleName:e.audioImage,onready:function(e){t.image=e}})]})}}]),n}(T),an=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.widget,i=t.onready,a=void 0===i?void 0:i;return Ge(this,n),(o=e.call(this,{styleName:"",onready:a})).title="",o.progressText="00:00-00:00",o.widget=r,o}return Ye(n,[{key:"setTitle",value:function(t){this.title&&this.title.setText(t)}},{key:"updateProgressText",value:function(t){this.audioProgressText&&this.audioProgressText.setText(t)}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new I({styleName:e.audioTitleContainer,children:[this.widget,new I({styleName:e.audioTitleText,children:[new R(this.title,(function(e){t.title=e}))]}),new I({styleName:e.audioProgressText,children:[new R(this.progressText,(function(e){t.audioProgressText=e}))]})]})}}]),n}(T),un=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.onready,i=void 0===r?void 0:r,a=t.onListButtonClick,u=void 0===a?void 0:a;return Ge(this,n),(o=e.call(this,{styleName:"",onready:i})).onListButtonClick=u,o}return Ye(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onListButtonClick&&t.onListButtonClick()},child:new I({styleName:e.audioListButtonContainer,children:[new I({styleName:e.audioListButtonStyle}),new I({styleName:e.audioListButtonStyle}),new I({styleName:e.audioListButtonStyle})]})})}}]),n}(T),cn=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.onBack,i=void 0===r?void 0:r;return Ge(this,n),(o=e.call(this,{styleName:""})).onBack=i,o}return Ye(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onBack&&t.onBack()},child:new I({styleName:e.audioButtonContainer,children:[new I({styleName:"".concat(e.audioButton," ").concat(e.audioBackFirst)}),new I({styleName:"".concat(e.audioButton," ").concat(e.audioBack)})]})})}}]),n}(T),ln=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.status,i=void 0!==r&&r,a=t.onClick,u=void 0===a?void 0:a,c=t.onready;return Ge(this,n),(o=e.call(this,{styleName:"",onready:c})).onClick=u,o.status=i,o}return Ye(n,[{key:"setPlayStatus",value:function(t){var e=yt.instance().getSkin();this.status=t,this.buttonStatus.setStyleName("".concat(e.audioButton," ").concat(e.audioPlayPause))}},{key:"changeStyle",value:function(){var t=yt.instance().getSkin();this.status=!this.status,this.buttonStatus.setStyleName(this.status?"".concat(t.audioButton," ").concat(t.audioPlayPause):"".concat(t.audioButton," ").concat(t.audioPlayButton))}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.changeStyle(),t.onClick(t.status)},child:new I({styleName:"".concat(e.audioButtonContainer," ").concat(e.audioLayout),children:[new I({styleName:this.status?"".concat(e.audioButton," ").concat(e.audioPlayPause):"".concat(e.audioButton," ").concat(e.audioPlayButton),onready:function(e){t.buttonStatus=e}})]})})}}]),n}(T),sn=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.onForward,i=void 0===r?void 0:r;return Ge(this,n),(o=e.call(this,{styleName:""})).onForward=i,o}return Ye(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onForward&&t.onForward()},child:new I({styleName:"".concat(e.audioButtonContainer," ").concat(e.audioLayout),children:[new I({styleName:"".concat(e.audioButton," ").concat(e.audioPlayForwardFirst)}),new I({styleName:"".concat(e.audioButton," ").concat(e.audioPlayForward)})]})})}}]),n}(T),dn=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.onready,i=void 0===r?void 0:r,a=t.onAudioProgressUpdate,u=void 0===a?void 0:a,c=t.onSeek,l=void 0===c?void 0:c;return Ge(this,n),Ze(Ke(o=e.call(this,{styleName:"",onready:i})),"_onClick",(function(t){var e=o.audioProgressContainer.getBoundingClientRect();console.log("position"+JSON.stringify(e)+" event="+t.clientX),o.setProgress(t.clientX-e.left,e.right-e.left),o.onSeek&&o.onSeek((t.clientX-e.left)/(e.right-e.left))})),o.onAudioProgressUpdate=u,o.onSeek=l,o}return Ye(n,[{key:"setProgress",value:function(t,e){this.progress&&(this.progress.setWidth((t/e*100).toFixed(2)+"%"),this.onAudioProgressUpdate&&this.onAudioProgressUpdate(s.timeFormat(t)+"-"+s.timeFormat(e)))}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new I({styleName:e.audioProgressCtrl,children:[new D({onTap:this._onClick,child:new I({styleName:e.audioProgressContainer,children:[new I({styleName:e.audioProgress,onready:function(e){t.progress=e}})],onready:function(e){t.audioProgressContainer=e}})})]})}}]),n}(T),fn=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.volume,i=void 0===r?1:r,a=t.onSetVolume,u=void 0===a?void 0:a;return Ge(this,n),Ze(Ke(o=e.call(this,{styleName:""})),"_onClick",(function(t){if(o.audioVolumeContainer&&o.audioVolumeProgress&&o.audioVolumeBar){var e=o.audioVolumeContainer.getBoundingClientRect();if(e){var n=e.right-e.left,r=t.clientX-e.left;r<0&&(r=0),t.clientX-e.left>n&&(r=n),console.log("position"+JSON.stringify(e)+" event="+t.clientX),o.volume=r/n,o._setVolume()}}})),o.mute=0==i,o.volume=i,o.onSetVolume=u,o}return Ye(n,[{key:"initWidget",value:function(){var t=this;s.asyncTask({macroTask:function(){t._setVolume(t.volume)}})}},{key:"_setVolume",value:function(){var t=this.audioVolumeContainer.getBoundingClientRect();if(t){var e=t.right-t.left,n=this.volume,o=n*e;this.audioVolumeProgress.setWidth((100*n).toFixed(2)+"%"),console.log("audioVolumeBar width="+this.audioVolumeBar.offsetWidth()),this.audioVolumeBar.setLeft((o-this.audioVolumeBar.offsetWidth()<0?0:o-this.audioVolumeBar.offsetWidth())+"px"),o>0&&(this.mute=!1),this._setMuteStyle(),this.onSetVolume(n),ct.setVolume(n)}}},{key:"_setMute",value:function(){this.audioVolumeProgress.setWidth("0px"),this.audioVolumeBar.setLeft("0px"),this._setMuteStyle(),this.onSetVolume(0)}},{key:"_setMuteStyle",value:function(){this.muteRef&&this.muteRef.setStyleName(this.mute?"audio-volume-mute":"audio-widget-hide")}},{key:"_buildVolumeIcon",value:function(t){var e=this;return new D({onTap:function(){e.mute=!e.mute,e.mute?e._setMute():e._setVolume()},child:new I({styleName:"audio-volume-left-container",children:[new I({styleName:t.audioVolumeIconContainer,children:[new I({styleName:"".concat(t.audioButton," ").concat(t.audioVolumeIconFirst)}),new I({styleName:"".concat(t.audioButton," ").concat(t.audioVolumeIcon)})]}),new I({styleName:this.mute?"audio-volume-mute":"audio-widget-hide",onready:function(t){e.muteRef=t}})]})})}},{key:"_buildVolumeProgress",value:function(t){var e=this;return new D({onTap:this._onClick,child:new I({styleName:t.audioVolumeView,children:[new I({styleName:t.audioVolumeProgress,onready:function(t){e.audioVolumeProgress=t}}),new I({styleName:t.audioVolumeBar,onready:function(t){e.audioVolumeBar=t}})],onready:function(t){e.audioVolumeContainer=t}})})}},{key:"build",value:function(){var t=yt.instance().getSkin();return new I({styleName:t.audioVolumeContainer,children:[this._buildVolumeIcon(t),this._buildVolumeProgress(t)]})}}]),n}(T),hn=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.item,i=t.index,a=t.focus,u=void 0!==a&&a,c=t.onready,l=void 0===c?void 0:c;return Ge(this,n),(o=e.call(this,{styleName:"",onready:l})).item=r,o.index=i,o.focus=u,o}return Ye(n,[{key:"setItemStatus",value:function(){this.audioPlayItemName&&this.audioPlayItemName.setFocus(!0)}},{key:"resetItemStatus",value:function(){this.audioPlayItemName&&this.audioPlayItemName.setFocus(!1)}},{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){U.sendEvent(en,t.index)},child:new I({styleName:this.index%2==0?e.audioPlaylistItem:e.audioPlaylistEvenItem,children:[new I({styleName:e.audioItemIndex,children:[new R("".concat(this.item.local?"L":"").concat(this.item.playId,". "))]}),new $t({text:this.item.name,focus:this.focus,onready:function(e){t.audioPlayItemName=e}}),new I({styleName:e.audioItemAuthor,children:[new R(this.item.author)]}),new I({styleName:"audio-playlist-item-hover"}),new De({playItem:this.item})]})})}}]),n}(T),yn=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.playIndex,i=void 0===r?0:r,a=t.playList,u=void 0===a?void 0:a,c=t.onready,l=void 0===c?void 0:c;return Ge(this,n),Ze(Ke(o=e.call(this,{styleName:"",onready:l})),"_onPlayListLoaded",(function(t){o.setStateAsync({playList:t},(function(){U.sendEvent(en,o.focusIndex)}))})),o.focusIndex=i,o.state={playList:u},o}return Ye(n,[{key:"initWidget",value:function(){U.addEvent(nn,this._onPlayListLoaded),this.visible=!0,this.initProps={origin:this}}},{key:"disposeWidget",value:function(){U.removeEvent(nn,this._onPlayListLoaded)}},{key:"resetPlayItem",value:function(t){if(this.initProps.audioPlaylistView){var e=this.initProps.audioPlaylistView.children;e[this.focusIndex].resetItemStatus(),this.focusIndex=t,e[this.focusIndex].setItemStatus()}}},{key:"show",value:function(t){if(this.visible=t,this.initProps.audioPlaylistContainer){var e=yt.instance().getSkin();this.initProps.audioPlaylistContainer.setStyleName(t?"".concat(e.audioPlaylistShow," ").concat(e.audioPlaylistRoot):e.audioPlaylistContainerHide)}}},{key:"isVisible",value:function(){return this.visible}},{key:"build",value:function(){var t=this,e=[];this.state.playList&&this.state.playList.forEach((function(n,o){e.push(new hn({item:n,index:o,focus:t.focusIndex==o}))}));var n=yt.instance().getSkin();return new I({styleName:n.audioPlaylistRoot,children:[new I({styleName:n.audioPlaylistContainer,children:e,onready:function(e){t.initProps.audioPlaylistView=e}}),new I({styleName:n.audioShadowTop}),new I({styleName:n.audioShadowBottom})],onready:function(e){t.initProps.audioPlaylistContainer=e}})}}]),n}(O),pn=function(t){qe(n,t);var e=$e(n);function n(t){var o,r=t.onLyricsButtonClick,i=void 0===r?void 0:r;return Ge(this,n),(o=e.call(this,{styleName:""})).onLyricsButtonClick=i,o}return Ye(n,[{key:"build",value:function(){var t=this,e=yt.instance().getSkin();return new D({onTap:function(){t.onLyricsButtonClick&&t.onLyricsButtonClick()},child:new I({styleName:e.audioLyricButtonContainer,children:[new R("♬")]})})}}]),n}(T),vn=function(t){qe(o,t);var e,n=$e(o);function o(t){var e=t.styleName,r=void 0===e?"":e,i=t.onready,a=void 0===i?void 0:i;return Ge(this,o),n.call(this,{styleName:r,onready:a})}return Ye(o,[{key:"initWidget",value:function(){this.show=!1,this.lyricsMap={},this.focusIndex=0,this.showBuild=!1,this.initProps={}}},{key:"_parseLyric",value:function(t){var e,n=[],o=null!==(e=t.split("\n"))&&void 0!==e?e:[];if(0==o.length)return n;for(var r=/\[\d{2}:\d{2}.\d{2}\]/g;o.length>0&&!r.test(o[0]);)o=o.slice(1);return 0===o[o.length-1].length&&o.pop(),o.forEach((function(t){var e=t.match(r),o=t.replace(r,"");e.forEach((function(t){var e=t.slice(1,-1).split(":");n.push({time:60*parseInt(e[0],10)+parseFloat(e[1]),lyric:o})}))})),n.sort((function(t,e){return t.time-e.time})),n}},{key:"isShow",value:function(){return this.show}},{key:"showLyrics",value:(e=He(We().mark((function t(e){var n,o,r,i=this,a=arguments;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length>1&&void 0!==a[1]&&a[1])){t.next=7;break}if(this.show){t.next=4;break}return t.abrupt("return");case 4:this.initProps.reuse=!0,t.next=9;break;case 7:this.initProps.reuse=!1,this.show=!this.show;case 9:if(this.show){t.next=12;break}return this.initProps.rootContainer?(n=yt.instance().getSkin(),this.initProps.rootContainer.setStyleName("".concat(n.audioLyricRoot," audio-left-hide")),s.asyncTask({macroTask:function(){i.setStateAsync({})},duration:510})):this.setStateAsync({}),t.abrupt("return");case 12:if(e){t.next=16;break}return this.lyrics=null,this.setStateAsync({}),t.abrupt("return");case 16:if(o=this.lyricsMap[e]){t.next=22;break}return t.next=20,J.fetchPromise({url:e,headers:Ze({},at,"none"),method:J.HttpMethod.get,responseType:"text"});case 20:"ok"==(r=t.sent).status&&(console.log("lyric data = ",r),o=this._parseLyric(r.data),this.lyricsMap[e]=o);case 22:this.lyrics=o,this.setStateAsync({});case 24:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"setTime",value:function(t,e){var n=this.lyricsMap[t];if(n)for(var o=n.length-1;o>=0;o--)if(e>n[o].time){this._setFocus(o);break}}},{key:"_setFocus",value:function(t){this.focusIndex!=t&&(this.focusIndex=t,this.show&&(this.initProps.container&&this.initProps.container.scrollTo(s.remToPx(2.2)*t),this.setStateAsync({})))}},{key:"_buildItemListContainer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=n.length>0;return new I({onready:function(t){e.initProps.container=t},styleName:o?t.audioLyricsContainer:t.audioNoLyricTip,children:o?n:[new R("No Lyric")]})}},{key:"build",value:function(){var t=this;if(!this.show)return new I({onready:function(e){t.initProps.rootContainer=e}});var e=yt.instance().getSkin(),n=[];return this.lyrics&&this.lyrics.length>0&&this.lyrics.forEach((function(o,r){n.push(t._buildLyricItem(o.lyric,r,e))})),new I({styleName:this.initProps.reuse?"".concat(e.audioLyricRoot):"".concat(e.audioLyricRoot," audio-left-show"),onready:function(e){t.initProps.rootContainer=e},children:[this._buildItemListContainer(e,n),new I({styleName:e.audioShadowTop}),new I({styleName:e.audioShadowBottom})]})}},{key:"_buildLyricItem",value:function(t,e,n){return new I({styleName:e==this.focusIndex?n.audioLyricItemFocus:n.audioLyricItem,children:[new R(t)]})}}]),o}(O);function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function gn(t,e){return gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gn(t,e)}function bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wn(t){return wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wn(t)}function kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_n(o.key),o)}}function xn(t,e,n){return e&&Sn(t.prototype,e),n&&Sn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pn(t,e,n){return(e=_n(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _n(t){var e=function(t,e){if("object"!==mn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==mn(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===mn(e)?e:String(e)}var Cn=function(){function t(){var e=this;kn(this,t),Pn(this,"_onTouchMove",(function(t){e.target&&e.target.onTouchMove&&e.target.onTouchMove(t)})),Pn(this,"_onMouseMove",(function(t){e.target&&e.target.onMouseMove&&e.target.onMouseMove(t)})),window.onmousemove=this._onMouseMove,window.ontouchmove=this._onTouchMove}return xn(t,[{key:"setTarget",value:function(t){t instanceof L&&(this.target=t)}},{key:"resetTarget",value:function(){this.target=null}}],[{key:"instance",value:function(){return t.sInstance||(t.sInstance=new t),t.sInstance}}]),t}(),Ln=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gn(t,e)}(r,t);var e,n,o=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=wn(e);if(n){var r=wn(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return function(t,e){if(e&&("object"===mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bn(t)}(this,t)});function r(t){var e,n=t.styleName,i=t.onready,a=t.widget;return kn(this,r),Pn(bn(e=o.call(this,{styleName:n,onready:i})),"onMouseMove",(function(t){if(e.playerContainer&&e.moving){console.log("playerLeft="+e.playerLeft+" playerTop"+e.playerTop);var n=t.clientX-(e.playerLeft-e.playerOffsetLeft),o=t.clientY-(e.playerTop-e.playerOffsetTop);console.log("index.js---onMouseMove---left: "+n+" top: "+o),e.playerContainer.setLeft(n+"px"),e.playerContainer.setTop(o+"px")}})),Pn(bn(e),"onTouchMove",(function(t){if(e.playerContainer&&e.moving){console.log("playerLeft="+e.playerLeft+" playerTop"+e.playerTop);var n=t.touches[0].clientX-(e.playerLeft-e.playerOffsetLeft),o=t.touches[0].clientY-(e.playerTop-e.playerOffsetTop);console.log("index.js---onMouseMove---left: "+n+" top: "+o),e.playerContainer.setLeft(n+"px"),e.playerContainer.setTop(o+"px")}})),Pn(bn(e),"_onMouseDown",(function(t){e.moving=!0,Cn.instance().setTarget(bn(e)),e.playerContainer&&(e.playerLeft=t.clientX,e.playerTop=t.clientY,e.playerOffsetLeft=e.playerContainer.offsetLeft(),e.playerOffsetTop=e.playerContainer.offsetTop(),console.log("playerOffsetLeft="+e.playerContainer.offsetLeft()+" playerOffsetLeft"+e.playerContainer.offsetTop()),e.playerContainer.setCursor("move"))})),Pn(bn(e),"_onMouseUp",(function(t){console.log("index.js---onMouseUp"),e.moving=!1,Cn.instance().resetTarget(),e.playerContainer&&e.playerContainer.setCursor("default")})),Pn(bn(e),"_onTouchStart",(function(t){e.moving=!0,Cn.instance().setTarget(bn(e)),e.playerContainer&&(e.playerLeft=t.touches[0].clientX,e.playerTop=t.touches[0].clientY,e.playerOffsetLeft=e.playerContainer.offsetLeft(),e.playerOffsetTop=e.playerContainer.offsetTop(),console.log("playerOffsetLeft="+e.playerContainer.offsetLeft()+" playerOffsetLeft"+e.playerContainer.offsetTop()),e.playerContainer.setCursor("move"))})),e.widget=a,e.playerLeft=-1,e.playerTop=-1,e.playerOffsetLeft=-1,e.playerOffsetTop=-1,e}return xn(r,[{key:"build",value:function(){var t=this;return new D({onTouchStart:this._onTouchStart,onTouchEnd:this._onMouseUp,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,child:new I({styleName:this.styleName,children:[this.widget],onready:function(e){t.playerContainer=e}})})}}]),r}(T);function Tn(t){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(t)}function On(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,In(o.key),o)}}function In(t){var e=function(t,e){if("object"!==Tn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Tn(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Tn(e)?e:String(e)}function jn(t,e){return jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jn(t,e)}function En(t){return En=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},En(t)}var Nn={login:{path:"/boyiaweb/index/login",title:"login",page:function(){return new I({styleName:""})}},home:{path:"/boyiaweb/index/home",title:"home",page:function(){return new Bn({styleName:""})}}},Bn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jn(t,e)}(a,t);var e,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=En(o);if(r){var n=En(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Tn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e=t.styleName,n=void 0===e?"":e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,{styleName:n})}return e=a,(n=[{key:"_buildTitle",value:function(){return new I({styleName:"desktop-title",children:[new R("Boyia work desktop")]})}},{key:"_buildSetting",value:function(){var t=this;return new I({styleName:"setting-panel",children:[this._buildTitle(),new I({styleName:"setting-item",children:[new I({styleName:"setting-title",children:[new R("Desktop system enable")]}),new I({styleName:"switch-container",children:[new ne({id:"oneOpen",theme:"bui-theme-blue",onSwitchChecked:function(e){e?yt.instance().setSkin("default"):yt.instance().setSkin("black"),t.audio&&t.audio.setState({})}})]})]})]})}},{key:"build",value:function(){var t=this;return new I({styleName:"page-main",children:[this._buildSetting(),new Ln({styleName:"index-audio-player",widget:new on({onready:function(e){t.audio=e},playListUrl:kPlaylistUrl})})]})}}])&&On(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(O);$(document).ready((function(){W.init(),W.push(Nn.home)}))})();