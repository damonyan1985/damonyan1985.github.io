(window["webpackJsonpboyia-blog"]=window["webpackJsonpboyia-blog"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(20)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(9),r=a.n(o),s=(a(15),a(6)),l=a.n(s),c=a(7),u=a(1),d=a(2),p=a(4),m=a(3),f=a(5),y=(a(17),a(18),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=function(){console.log("checkbox value="+a.refs.checkbox.checked),a.props.onSwitchChecked&&a.props.onSwitchChecked(a.refs.checkbox.checked)},a.theme=a.props.theme,a.id=a.props.id,a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"bui-switch"},i.a.createElement("input",{id:this.id,name:"checkbox",ref:"checkbox",type:"checkbox",onClick:this.onClick}),i.a.createElement("label",{for:this.id,ref:"label",className:this.theme}))}}]),t}(n.Component)),h=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"get",value:function(){var e=Object(c.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.text();case 6:return n=e.sent,console.log("get data="+n),e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(0),console.log("HTTPUtil.get: error="+e.t0);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"asyncPost",value:function(e,t,a){fetch(e,{method:"POST",body:t,mode:"no-cors"}).then(function(e){return e.text()}).then(function(e){a(e)}).catch(function(e){console.log("error="+e)})}},{key:"post",value:function(){var e=Object(c.a)(l.a.mark(function e(t,a){var n,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",body:a,mode:"no-cors"});case 3:return n=e.sent,console.log("response status:"+n.status),console.log("response:"+JSON.stringify(n)),e.next=8,n.text();case 8:return i=e.sent,console.log("get data="+i),e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(0),console.log("HTTPUtil.post: error="+e.t0);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),b=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onHeaderClick=function(){a.showBody=!a.showBody,a.setState({showBody:a.showBody})},a.renderBody=function(){return a.state.showBody?i.a.createElement("div",{className:"article-body"},i.a.createElement("iframe",{className:"article-content",height:600,width:"100%",frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowtransparency:"yes",src:a.itemData.content})):null},a.itemData=a.props.itemData,a.showBody=!0,a.state={showBody:a.showBody},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.itemData?i.a.createElement("div",{className:"article-container"},i.a.createElement("div",{className:"article-header",onClick:this.onHeaderClick},this.itemData.title),this.renderBody()):null}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).dataList=a.props.dataList,a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.dataList=e.dataList}},{key:"render",value:function(){return this.dataList&&0!==this.dataList.length?i.a.createElement("div",{className:"article-list"},this.dataList.map(function(e,t){return i.a.createElement(b,{key:t,itemData:e})})):null}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=function(){a.props&&a.props.onClick()},a.playStatus=!1,a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"audio-button-container audio-layout",onClick:this.onClick},i.a.createElement("div",{className:"audio-button audio-forward-first"}),i.a.createElement("div",{className:"audio-button audio-forward"}))}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=function(){a.props&&a.props.onClick()},a.playStatus=!1,a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"audio-button-container",onClick:this.onClick},i.a.createElement("div",{className:"audio-button audio-back-first"}),i.a.createElement("div",{className:"audio-button audio-back"}))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=function(){a.playStatus=!a.playStatus,a.refs.audioButton.className=a.playStatus?"audio-button audio-play-pause":"audio-button audio-play-button",a.props&&a.props.onClick(a.playStatus)},a.playStatus=!1,a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"audio-button-container audio-layout",onClick:this.onClick},i.a.createElement("div",{ref:"audioButton",className:"audio-button audio-play-button"}))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={text:a.props.text},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"setText",value:function(e){this.setState({text:e})}},{key:"render",value:function(){return i.a.createElement("div",{className:this.props.textStyle},this.state.text)}}]),t}(n.Component),C=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getUrlParams",value:function(){}}]),e}();C.timeFormat=function(e){var t=parseInt(e/60),a=parseInt(e%60);return(t<10?"0"+t:t)+":"+(a<10?"0"+a:a)};var P=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=function(e){var t=a.refs.audioProgressContainer.getBoundingClientRect();console.log("position"+JSON.stringify(t)+" event="+e.clientX),a.setProgress(e.clientX-t.left,t.right-t.left),a.props.onSeek&&a.props.onSeek((e.clientX-t.left)/(t.right-t.left))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"updateDownload",value:function(e){}},{key:"setProgress",value:function(e,t){this.refs.progress&&(this.refs.progress.style.width=(e/t*100).toFixed(2)+"%",this.refs.audioProgressText.setText(C.timeFormat(e)+"/"+C.timeFormat(t)))}},{key:"render",value:function(){return i.a.createElement("div",{className:"audio-progress-ctrl"},i.a.createElement("div",{ref:"audioProgressContainer",className:"audio-progress-container",onClick:this.onClick.bind(this)},i.a.createElement("div",{className:"audio-progress",ref:"progress"})),i.a.createElement(j,{ref:"audioProgressText",textStyle:"audio-progress-text",text:"00:00/00:00"}))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={url:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"setImage",value:function(e){this.refs.audioImage.src=e}},{key:"render",value:function(){return i.a.createElement("div",{className:"audio-image-container"},i.a.createElement("img",{className:"audio-image",ref:"audioImage"}))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={title:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"setTitle",value:function(e){this.setState({title:e})}},{key:"render",value:function(){return i.a.createElement("div",{className:"audio-title-container"},i.a.createElement("div",{className:"audio-title-text"},this.state.title))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=function(){a.props.onItemClick&&a.props.onItemClick(a.props.index)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"setItemStatus",value:function(){this.refs.audioPlayItem&&(this.refs.audioPlayItem.className="audio-item-focus")}},{key:"resetItemStatus",value:function(){this.refs.audioPlayItem&&(this.refs.audioPlayItem.className="audio-playlist-item")}},{key:"render",value:function(){if(!this.props.itemData)return null;var e=this.props.itemData;return i.a.createElement("div",{ref:"audioPlayItem",className:"audio-playlist-item",onClick:this.onClick},i.a.createElement("div",{className:"audio-item-index"},this.props.index+1),i.a.createElement("div",{className:"audio-item-name"},e.name),i.a.createElement("div",{className:"audio-item-author"},e.author))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onItemSwitch=function(e){a.resetPlayItem(e),a.props.onPlayItem&&a.props.onPlayItem(e)},a.appendItem=function(e){a.playListItems.push(e)},a.playList=null,a.playListItems=[],a.focusIndex=0,a.visible=!0,a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"show",value:function(e){this.visible=e,this.refs.audioPlaylistContainer&&(this.refs.audioPlaylistContainer.className=e?"audio-playlist-container":"audio-playlist-container-hide")}},{key:"setPlayList",value:function(e){this.playList=e,this.setState({})}},{key:"resetPlayItem",value:function(e){this.playListItems[this.focusIndex].resetItemStatus(),this.focusIndex=e,this.playListItems[this.focusIndex].setItemStatus()}},{key:"isVisible",value:function(){return this.visible}},{key:"render",value:function(){var e=this;return this.playList&&0!==this.playList.length?i.a.createElement("div",{ref:"audioPlaylistContainer",className:"audio-playlist-container"},this.playList.map(function(t,a){return console.log("item name = "+t.name),i.a.createElement(w,{ref:function(t){return e.appendItem(t)},key:a,index:a,itemData:t,onItemClick:e.onItemSwitch})})):null}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=function(){a.props.onListButtonClick&&a.props.onListButtonClick()},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"audio-list-button-container",onClick:this.onClick},i.a.createElement("div",{className:"audio-list-button-style"}),i.a.createElement("div",{className:"audio-list-button-style"}),i.a.createElement("div",{className:"audio-list-button-style"}))}}]),t}(n.Component),L=(a(19),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onSeek=function(e){a.audioPlayer.currentTime=e*a.audioPlayer.duration},a.onForward=function(){++a.playIndex>a.playList.length-1&&(a.playIndex=0),a.onPlayItem(a.playIndex)},a.onBack=function(){--a.playIndex<0&&(a.playIndex=0),a.onPlayItem(a.playIndex)},a.onPlay=function(e){a.playList&&(a.audioPlayer.src||(a.playIndex=0,console.log("playUrl = ",a.playList[0].playUrl),a.audioPlayer.src=a.playList[0].playUrl,a.refs.audioTitle.setTitle(a.playList[0].name+"-"+a.playList[0].author),a.refs.audioImage.setImage(a.playList[0].imgUrl),a.onPlayItem(a.playIndex)),e?a.audioPlayer.play():a.audioPlayer.pause())},a.onPlayItem=function(e){a.playIndex=e;var t=a.playList[a.playIndex];a.audioPlayer.src=t.playUrl,a.audioPlayer.play(),a.refs.audioTitle.setTitle(t.name+"-"+t.author),a.refs.audioImage.setImage(t.imgUrl),a.refs.playListView&&a.refs.playListView.resetPlayItem(e)},a.onListButtonClick=function(){a.refs.playListView&&a.refs.playListView.show(!a.refs.playListView.isVisible())},a.loadPlaylist(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"loadPlaylist",value:function(){var e=Object(c.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/json/boyia-playlist.json");case 2:t=e.sent,this.playList=JSON.parse(t),this.playIndex=0,this.refs.playListView.setPlayList(this.playList);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initPlayer",value:function(){if(this.audioPlayer){var e=this;this.audioPlayer.oncanplay=function(){console.log("on audio prepared duration="+e.audioPlayer.duration)},this.audioPlayer.onplay=function(){console.log("on playing")},this.audioPlayer.onended=function(){console.log("on play completed"),++e.playIndex>e.playList.length-1&&(e.playIndex=0),e.onPlayItem(e.playIndex)},this.audioPlayer.onprogress=function(){console.log("on progress evt = "+e.audioPlayer.currentTime)},this.audioPlayer.ontimeupdate=function(){e.refs.audioProgress&&e.audioPlayer.currentTime&&e.audioPlayer.duration&&(console.log("on ontimeupdate evt = "+e.audioPlayer.currentTime),e.refs.audioProgress.setProgress(e.audioPlayer.currentTime,e.audioPlayer.duration))},this.audioPlayer.onerror=this.audioPlayer.onended}}},{key:"componentDidUpdate",value:function(){console.log("AudioPlayer play")}},{key:"componentDidMount",value:function(){this.initPlayer()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{ref:"audioPlayerContainer",className:"audio-player-container"},i.a.createElement("div",{className:"audio-player"},i.a.createElement("audio",{ref:function(t){e.audioPlayer=t},preload:"auto"}),i.a.createElement("div",{className:"audio-header"},i.a.createElement(E,{ref:"audioImage"}),i.a.createElement(I,{ref:"audioTitle"}),i.a.createElement(N,{ref:"audioListButton",onListButtonClick:this.onListButtonClick})),i.a.createElement("div",{className:"audio-bottom"},i.a.createElement(g,{onClick:this.onBack}),i.a.createElement(O,{onClick:this.onPlay}),i.a.createElement(k,{onClick:this.onForward}),i.a.createElement(P,{ref:"audioProgress",onSeek:this.onSeek}))),i.a.createElement(x,{ref:"playListView",onPlayItem:this.onPlayItem}))}}]),t}(n.Component)),S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onMouseDown=function(e){console.log("App.js---onMouseDown"),a.moving=!0,a.refs.playerContainer&&(a.playerLeft=e.clientX,a.playerTop=e.clientY,a.playerOffsetLeft=a.refs.playerContainer.offsetLeft,a.playerOffsetTop=a.refs.playerContainer.offsetTop,a.refs.playerContainer.style.cursor="move")},a.onMouseMove=function(e){if(a.refs.playerContainer&&a.moving){console.log("playerLeft="+a.playerLeft+" playerTop"+a.playerTop);var t=e.clientX-(a.playerLeft-a.playerOffsetLeft),n=e.clientY-(a.playerTop-a.playerOffsetTop);console.log("App.js---onMouseMove---left: "+t+" top: "+n),a.refs.playerContainer.style.left=t+"px",a.refs.playerContainer.style.top=n+"px"}},a.onMouseUp=function(e){console.log("App.js---onMouseUp"),a.moving=!1,a.refs.playerContainer&&(a.refs.playerContainer.style.cursor="default")},a.onMusicSwitch=function(e){a.refs.playerContainer.className=e?"blog-audio-player-hide":"blog-audio-player"},a.state={title:"Blog Test"},a.loadBloglist(),a.init(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"init",value:function(){window.onmousemove=this.onMouseMove,window.ontouchmove=this.onMouseMove,this.playerLeft=-1,this.playerTop=-1,this.playerOffsetLeft=-1,this.playerOffsetTop=-1}},{key:"loadBloglist",value:function(){var e=Object(c.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/json/boyia-blog.json");case 2:t=e.sent,a=JSON.parse(t),console.log("blogs = "+a.blogs[0].title),this.setState({title:"".concat(a.author,"'s Blog"),data:a.blogs});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state?i.a.createElement("div",{className:"App"},i.a.createElement("div",null,i.a.createElement("h1",null,this.state.title?this.state.title:"Blog Test")),i.a.createElement("div",{className:"setting-panel"},i.a.createElement("div",{className:"setting-item"},i.a.createElement("div",{className:"setting-title"},"Music Close"),i.a.createElement(y,{id:"musicSwitch",theme:"bui-theme-blue",onSwitchChecked:this.onMusicSwitch})),i.a.createElement("div",{className:"setting-item"},i.a.createElement("div",{className:"setting-title"},"One Open"),i.a.createElement(y,{id:"oneOpen",theme:"bui-theme-darkcyan"}))),i.a.createElement("div",{className:"article\u2014list"},i.a.createElement(v,{dataList:this.state.data})),i.a.createElement("div",{ref:"playerContainer",className:"blog-audio-player",onTouchStart:function(t){return e.onMouseDown(t)},onTouchEnd:function(t){return e.onMouseUp(t)},onMouseDown:function(t){return e.onMouseDown(t)},onMouseUp:function(t){return e.onMouseUp(t)}},i.a.createElement(L,null))):i.a.createElement("div",null)}}]),t}(n.Component);r.a.render(i.a.createElement(S,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.43f5d961.chunk.js.map